{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Draggable, formatUnit, createElement, isNullOrUndefined, addClass, closest } from '@syncfusion/ej2-base';\nimport { removeClass, classList, remove, EventHandler, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\n/**\n * Drag and Drop module is used to perform card actions.\n */\nvar DragAndDrop = /** @class */function () {\n  /**\n   * Constructor for drag and drop module\n   *\n   * @param {Kanban} parent Accepts the kanban instance\n   * @private\n   */\n  function DragAndDrop(parent) {\n    this.parent = parent;\n    this.dragObj = {\n      element: null,\n      cloneElement: null,\n      instance: null,\n      targetClone: null,\n      draggedClone: null,\n      targetCloneMulti: null,\n      selectedCards: [],\n      pageX: 0,\n      pageY: 0,\n      navigationInterval: null,\n      cardDetails: [],\n      modifiedData: []\n    };\n    this.dragEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.isDragging = false;\n    this.isExternalDrop = false;\n  }\n  DragAndDrop.prototype.wireDragEvents = function (element) {\n    var dragContainment;\n    if (!this.parent.element != null && this.parent.externalDropId.length === 0) {\n      dragContainment = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    }\n    this.dragObj.instance = new Draggable(element, {\n      clone: true,\n      enableTapHold: this.parent.isAdaptive,\n      enableTailMode: true,\n      cursorAt: {\n        top: -10,\n        left: -10\n      },\n      dragArea: dragContainment,\n      dragStart: this.dragStart.bind(this),\n      drag: this.drag.bind(this),\n      dragStop: this.dragStop.bind(this),\n      enableAutoScroll: false,\n      helper: this.dragHelper.bind(this)\n    });\n  };\n  DragAndDrop.prototype.dragHelper = function (e) {\n    if (this.parent.isAdaptive && this.parent.touchModule.mobilePopup && this.parent.touchModule.mobilePopup.element.classList.contains(cls.POPUP_OPEN_CLASS)) {\n      this.parent.touchModule.mobilePopup.hide();\n    }\n    this.dragObj.element = closest(e.sender.target, '.' + cls.CARD_CLASS);\n    if (isNullOrUndefined(this.dragObj.element)) {\n      return null;\n    }\n    this.dragObj.element.style.width = formatUnit(this.dragObj.element.offsetWidth);\n    var cloneWrapper = createElement('div', {\n      innerHTML: this.dragObj.element.outerHTML\n    });\n    this.dragObj.cloneElement = cloneWrapper.children.item(0);\n    addClass([this.dragObj.cloneElement], cls.CLONED_CARD_CLASS);\n    this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement);\n    this.dragObj.targetCloneMulti = createElement('div', {\n      className: cls.TARGET_MULTI_CLONE_CLASS\n    });\n    this.dragObj.targetClone = createElement('div', {\n      className: cls.DROPPED_CLONE_CLASS,\n      styles: 'width:100%;height:' + formatUnit(this.dragObj.element.offsetHeight)\n    });\n    this.dragObj.modifiedData = [];\n    return this.dragObj.cloneElement;\n  };\n  DragAndDrop.prototype.dragStart = function (e) {\n    var _this = this;\n    this.dragObj.selectedCards = this.dragObj.element;\n    if (this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n      var className = '.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')';\n      var closestEle = closest(this.dragObj.element, '.' + cls.CONTENT_ROW_CLASS);\n      this.dragObj.selectedCards = [].slice.call(closestEle.querySelectorAll(className));\n      this.dragObj.selectedCards.forEach(function (element) {\n        _this.dragObj.cardDetails.push(_this.parent.getCardDetails(element));\n      });\n    } else {\n      this.dragObj.cardDetails = [this.parent.getCardDetails(this.dragObj.element)];\n    }\n    var dragArgs = {\n      cancel: false,\n      data: this.dragObj.cardDetails,\n      event: e,\n      element: this.dragObj.selectedCards\n    };\n    this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n      if (dragEventArgs.cancel) {\n        _this.removeElement(_this.dragObj.cloneElement);\n        _this.dragObj.instance.intDestroy(e);\n        _this.dragObj.element = null;\n        _this.dragObj.targetClone = null;\n        _this.dragObj.draggedClone = null;\n        _this.dragObj.cloneElement = null;\n        _this.dragObj.targetCloneMulti = null;\n        return;\n      }\n      if (_this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n        _this.dragObj.selectedCards.forEach(function (element) {\n          _this.draggedClone(element);\n        });\n        if (_this.dragObj.selectedCards.length > 1) {\n          _this.dragObj.cloneElement.innerHTML = '';\n          var drag = createElement('div', {\n            className: 'e-multi-card-text',\n            innerHTML: _this.dragObj.selectedCards.length + ' Cards'\n          });\n          _this.dragObj.cloneElement.appendChild(drag);\n          classList(_this.dragObj.cloneElement, ['e-multi-card-clone'], [cls.CARD_SELECTION_CLASS]);\n          _this.parent.layoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n          _this.dragObj.cloneElement.style.width = '90px';\n        }\n      } else {\n        _this.draggedClone(_this.dragObj.element);\n      }\n      EventHandler.add(document.body, 'keydown', _this.keydownHandler, _this);\n      _this.parent.notify(events.contentReady, {});\n    });\n  };\n  DragAndDrop.prototype.draggedClone = function (element) {\n    this.dragObj.draggedClone = createElement('div', {\n      className: cls.DRAGGED_CLONE_CLASS,\n      styles: 'width:' + formatUnit(element.offsetWidth - 1) + ';height:' + formatUnit(element.offsetHeight)\n    });\n    element.insertAdjacentElement('afterend', this.dragObj.draggedClone);\n    addClass([element], cls.DRAGGED_CARD_CLASS);\n  };\n  DragAndDrop.prototype.drag = function (e) {\n    var _this = this;\n    if (!e.target) {\n      return;\n    }\n    var cardElement = closest(e.target, '.' + cls.ROOT_CLASS + ' .' + cls.CARD_CLASS);\n    var target = cardElement || e.target;\n    var selector = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS + '.' + cls.DROPPABLE_CLASS;\n    var contentCell = closest(target, selector);\n    this.externalDrop(target);\n    this.kanbanObj = this.parent.isExternalKanbanDrop ? this.parent.externalDropObj : this.parent;\n    this.calculateArgs(e);\n    if (contentCell && document.body.style.cursor !== 'not-allowed') {\n      var targetKey = this.getColumnKey(contentCell);\n      var keys = targetKey.split(',');\n      this.multiCloneRemove();\n      var isDrag = targetKey === this.getColumnKey(closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS)) ? true : false;\n      if (keys.length === 1 || isDrag) {\n        if (target.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n          this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n        }\n        if (target.classList.contains(cls.CARD_CLASS)) {\n          var element = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? target.previousElementSibling.classList.contains(cls.DRAGGED_CARD_CLASS) ? null : target.previousElementSibling : target.previousElementSibling;\n          var insertClone = 'afterend';\n          if (isNullOrUndefined(element)) {\n            var pageY = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? this.dragObj.pageY / 2 : this.dragObj.pageY;\n            var height = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? target.offsetHeight : target.offsetHeight / 2;\n            if (pageY - (this.kanbanObj.element.getBoundingClientRect().top + target.offsetTop) < height) {\n              insertClone = 'beforebegin';\n            }\n          }\n          target.insertAdjacentElement(insertClone, this.dragObj.targetClone);\n        } else if (target.classList.contains(cls.CONTENT_CELLS_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)) {\n          if (target.querySelectorAll('.' + cls.DRAGGED_CARD_CLASS).length !== 0 && target.querySelectorAll('.' + cls.CARD_CLASS + ':not(.e-kanban-dragged-card):not(.e-cloned-card)').length === 0) {\n            return;\n          } else {\n            target.querySelector('.' + cls.CARD_WRAPPER_CLASS).appendChild(this.dragObj.targetClone);\n          }\n        } else if (target.classList.contains(cls.CARD_WRAPPER_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS) && contentCell.querySelectorAll('.' + cls.CARD_CLASS).length === 0) {\n          target.appendChild(this.dragObj.targetClone);\n        }\n      } else if (keys.length > 1 && contentCell.classList.contains(cls.DROPPING_CLASS)) {\n        this.multiCloneCreate(keys, contentCell);\n      }\n      this.kanbanObj.notify(events.contentReady, {});\n    }\n    if (this.kanbanObj.element.querySelectorAll('.' + cls.DROPPING_CLASS).length === 0) {\n      this.cellDropping();\n    }\n    var isCollapsed = false;\n    if (contentCell) {\n      isCollapsed = contentCell.classList.contains(cls.COLLAPSED_CLASS) && contentCell.classList.contains(cls.DROPPING_CLASS);\n    }\n    if (isCollapsed) {\n      this.toggleVisible(target);\n      addClass([contentCell], cls.TOGGLE_VISIBLE_CLASS);\n    }\n    var tColumn = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TOGGLE_VISIBLE_CLASS));\n    if (tColumn.length > 0 && !target.classList.contains(cls.TOGGLE_VISIBLE_CLASS) && !closest(target, '.' + cls.TOGGLE_VISIBLE_CLASS)) {\n      this.toggleVisible(target, tColumn.slice(-1)[0]);\n      removeClass(tColumn, cls.TOGGLE_VISIBLE_CLASS);\n    }\n    this.kanbanObj.notify(events.contentReady, {});\n    var multiKeyTarget = closest(target, '.' + cls.MULTI_COLUMN_KEY_CLASS);\n    if (multiKeyTarget) {\n      var columnKeys = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' + cls.DISABLED_CLASS + ')')).filter(function (element) {\n        return _this.getColumnKey(element) === _this.getColumnKey(multiKeyTarget);\n      });\n      if (columnKeys.length > 0) {\n        addClass(columnKeys, cls.MULTI_ACTIVE_CLASS);\n        if (columnKeys[0].previousElementSibling) {\n          addClass([columnKeys[0].previousElementSibling], 'e-multi-bottom-border');\n        }\n      }\n    }\n    document.body.style.cursor = contentCell && contentCell.classList.contains(cls.DROPPING_CLASS) ? '' : 'not-allowed';\n    if (cardElement && !closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS).classList.contains(cls.DROPPING_CLASS)) {\n      cardElement.style.cursor = 'not-allowed';\n      document.body.style.cursor = 'not-allowed';\n    }\n    if (this.isExternalDrop && document.body.style.cursor === 'not-allowed') {\n      document.body.style.cursor = '';\n    }\n    if (document.body.style.cursor === 'not-allowed') {\n      this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n      this.multiCloneRemove();\n    }\n    this.updateScrollPosition();\n    var dragArgs = {\n      data: this.dragObj.cardDetails,\n      event: e,\n      element: this.dragObj.selectedCards\n    };\n    this.kanbanObj.trigger(events.drag, dragArgs);\n    this.parent.isExternalKanbanDrop = false;\n    this.isExternalDrop = false;\n  };\n  DragAndDrop.prototype.removeElement = function (element, kanbanObj) {\n    kanbanObj = kanbanObj ? kanbanObj : this.parent;\n    if (kanbanObj.element.getElementsByClassName(element.className).length > 0) {\n      remove(element);\n    }\n  };\n  DragAndDrop.prototype.externalDrop = function (target) {\n    var _this = this;\n    this.parent.externalDropId.forEach(function (externalDropId) {\n      var targetRootElement = closest(target, externalDropId);\n      if (targetRootElement) {\n        if (targetRootElement.classList.contains('e-kanban')) {\n          _this.parent.externalDropObj = document.querySelector(externalDropId).ej2_instances[0];\n          _this.parent.isExternalKanbanDrop = true;\n          var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + '):not(.' + cls.COLLAPSED_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n          var cells = [].slice.call(_this.parent.externalDropObj.element.querySelectorAll(className));\n          addClass(cells, cls.DROPPING_CLASS);\n        } else {\n          _this.isExternalDrop = true;\n        }\n      }\n    });\n  };\n  DragAndDrop.prototype.multiCloneCreate = function (keys, contentCell) {\n    var offsetHeight = contentCell.offsetHeight;\n    var limitEle = contentCell.querySelector('.' + cls.LIMITS_CLASS);\n    if (limitEle) {\n      offsetHeight -= limitEle.offsetHeight;\n    }\n    this.dragObj.targetCloneMulti.style.height = formatUnit(offsetHeight);\n    if (contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n      addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n    }\n    addClass([contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n    contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS).style.height = 'auto';\n    contentCell.style.borderStyle = 'none';\n    this.removeElement(this.dragObj.targetClone);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n      var key = keys_1[_i];\n      var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n      var transition = this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n      var allowTransition = this.allowedTransition(this.dragObj.element.getAttribute('data-key'), key, transition);\n      var name_1 = allowTransition ? '' : ' ' + cls.DISABLED_CLASS;\n      var colKey = createElement('div', {\n        className: cls.MULTI_COLUMN_KEY_CLASS + name_1,\n        attrs: {\n          'data-key': key.trim()\n        }\n      });\n      var text = createElement('div', {\n        className: 'e-text',\n        innerHTML: key.trim()\n      });\n      contentCell.appendChild(this.dragObj.targetCloneMulti).appendChild(colKey).appendChild(text);\n      colKey.style.cursor = allowTransition ? '' : 'not-allowed';\n      colKey.style.lineHeight = colKey.style.height = formatUnit(offsetHeight / keys.length);\n      text.style.top = formatUnit(offsetHeight / 2 - text.offsetHeight / 2);\n    }\n  };\n  DragAndDrop.prototype.allowedTransition = function (currentCardKey, targetCardKey, allowedKey) {\n    var allowTransition = true;\n    var targetKey = targetCardKey.split(',');\n    for (var i = 0; i < targetKey.length; i++) {\n      if (currentCardKey === targetKey[i].trim()) {\n        return true;\n      }\n      if (allowedKey) {\n        if (allowedKey.length === 1 && allowedKey[0].length === 0) {\n          return true;\n        }\n        for (var j = 0; j < allowedKey.length; j++) {\n          if (targetKey[i].trim() === allowedKey[j].trim()) {\n            return true;\n          } else {\n            allowTransition = false;\n          }\n        }\n      }\n    }\n    return allowTransition;\n  };\n  DragAndDrop.prototype.cellDropping = function () {\n    var _this = this;\n    var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n    var dragRow = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_ROW_CLASS);\n    this.addDropping(dragRow, dragCell);\n    if (dragCell && dragCell.classList.contains(cls.DROP_CLASS)) {\n      addClass([dragCell], cls.DROPPING_CLASS);\n    }\n    if (this.kanbanObj.swimlaneSettings.keyField && this.kanbanObj.swimlaneSettings.allowDragAndDrop) {\n      var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + '):not(.' + cls.COLLAPSED_CLASS + ')';\n      var rows = [].slice.call(this.kanbanObj.element.querySelectorAll(className));\n      [].slice.call(rows).forEach(function (row) {\n        if (dragRow !== row) {\n          _this.addDropping(row, dragCell);\n        }\n      });\n    }\n  };\n  DragAndDrop.prototype.addDropping = function (dragRow, dragCell) {\n    var _this = this;\n    if (dragCell && dragRow) {\n      [].slice.call(dragRow.children).forEach(function (cell) {\n        var transition = _this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n        if (cell !== dragCell && cell.classList.contains(cls.DROP_CLASS) && _this.allowedTransition(dragCell.getAttribute('data-key'), cell.getAttribute('data-key'), transition)) {\n          addClass([cell], cls.DROPPING_CLASS);\n        }\n      });\n    }\n  };\n  DragAndDrop.prototype.keydownHandler = function (e) {\n    if (e.code === 'Escape' && this.dragObj.cloneElement) {\n      EventHandler.remove(this.dragObj.cloneElement, 'keydown', this.keydownHandler);\n      this.dragObj.element.removeAttribute('aria-grabbed');\n      this.dragStopClear();\n      this.dragStopPostClear();\n    }\n  };\n  DragAndDrop.prototype.dragStop = function (e) {\n    var _this = this;\n    var contentCell = closest(this.dragObj.targetClone, '.' + cls.CONTENT_CELLS_CLASS);\n    var columnKey;\n    var dropIndex;\n    EventHandler.remove(document.body, 'keydown', this.keydownHandler);\n    if (this.dragObj.targetClone.parentElement) {\n      var className = '.' + cls.CARD_CLASS + ':not(.' + cls.DRAGGED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS;\n      var element = [].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(className));\n      dropIndex = element.indexOf(this.dragObj.targetClone);\n    }\n    if (!isNullOrUndefined(this.kanbanObj) && this.kanbanObj.element.querySelector('.' + cls.TARGET_MULTI_CLONE_CLASS)) {\n      columnKey = closest(e.target, '.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' + cls.DISABLED_CLASS + ')');\n    }\n    if (contentCell || columnKey) {\n      var cardStatus_1;\n      if (contentCell) {\n        cardStatus_1 = this.getColumnKey(contentCell);\n      } else {\n        cardStatus_1 = this.getColumnKey(columnKey);\n        contentCell = closest(columnKey, '.' + cls.CONTENT_CELLS_CLASS);\n      }\n      if (this.dragObj.selectedCards instanceof HTMLElement) {\n        this.updateDroppedData(this.dragObj.selectedCards, cardStatus_1, contentCell);\n      } else {\n        this.dragObj.selectedCards.forEach(function (element) {\n          _this.updateDroppedData(element, cardStatus_1, contentCell);\n        });\n      }\n      if (this.parent.sortSettings.field && this.parent.sortSettings.sortBy === 'Index') {\n        this.changeOrder(this.dragObj.modifiedData);\n      }\n    }\n    if (this.dragObj.modifiedData.length === 0) {\n      this.dragObj.modifiedData = this.dragObj.cardDetails;\n    }\n    var dragArgs = {\n      cancel: false,\n      data: this.dragObj.modifiedData,\n      event: e,\n      element: this.dragObj.selectedCards,\n      dropIndex: dropIndex\n    };\n    this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n      _this.dragStopClear();\n      if (!dragEventArgs.cancel) {\n        if (contentCell || columnKey) {\n          var updateCard = dragEventArgs.data instanceof Array && dragEventArgs.data.length > 1 ? dragEventArgs.data : dragEventArgs.data[0];\n          _this.parent.crudModule.updateCard(updateCard, dragEventArgs.dropIndex);\n        }\n      }\n      _this.dragStopPostClear();\n    });\n  };\n  DragAndDrop.prototype.dragStopClear = function () {\n    this.removeElement(this.dragObj.draggedClone);\n    this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n    this.removeElement(this.dragObj.cloneElement);\n    var dragMultiClone = [].slice.call(this.parent.element.querySelectorAll('.' + cls.DRAGGED_CLONE_CLASS));\n    dragMultiClone.forEach(function (clone) {\n      remove(clone);\n    });\n    this.dragObj.element.style.removeProperty('width');\n    this.multiCloneRemove();\n    if (this.dragObj.selectedCards instanceof HTMLElement) {\n      removeClass([this.dragObj.selectedCards], cls.DRAGGED_CARD_CLASS);\n    } else {\n      removeClass(this.dragObj.selectedCards, cls.DRAGGED_CARD_CLASS);\n    }\n    clearInterval(this.dragObj.navigationInterval);\n    this.dragObj.navigationInterval = null;\n    if (document.body.style.cursor === 'not-allowed') {\n      document.body.style.cursor = '';\n    }\n    var styleCards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[style]'));\n    styleCards.forEach(function (styleCard) {\n      styleCard.style.cursor = '';\n    });\n    var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ')';\n    var cells = [].slice.call(this.parent.element.querySelectorAll(className + ' .' + cls.CONTENT_CELLS_CLASS));\n    cells.forEach(function (cell) {\n      return removeClass([cell], cls.DROPPING_CLASS);\n    });\n    if (this.parent.externalDropObj) {\n      var externalCells = [].slice.call(this.parent.externalDropObj.element.querySelectorAll(className + ' .' + cls.CONTENT_CELLS_CLASS));\n      externalCells.forEach(function (externalCell) {\n        return removeClass([externalCell], cls.DROPPING_CLASS);\n      });\n    }\n  };\n  DragAndDrop.prototype.dragStopPostClear = function () {\n    if (this.parent.isAdaptive) {\n      this.parent.touchModule.tabHold = false;\n    }\n    this.dragObj.cardDetails = this.dragObj.modifiedData = [];\n    this.isDragging = false;\n    this.parent.isExternalKanbanDrop = false;\n    this.parent.externalDropObj = null;\n  };\n  DragAndDrop.prototype.updateDroppedData = function (element, cardStatus, contentCell) {\n    var crudObj = this.parent.getCardDetails(element);\n    var crudData = extend({}, crudObj, null, true);\n    if (cardStatus.split(',').length === 1) {\n      crudData[this.parent.keyField] = cardStatus;\n    }\n    if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneSettings.allowDragAndDrop) {\n      var prev = closest(contentCell, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling;\n      if (this.parent.isAdaptive) {\n        var keyField = this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;\n        crudData[this.parent.swimlaneSettings.keyField] = keyField;\n      } else {\n        crudData[this.parent.swimlaneSettings.keyField] = this.getColumnKey(prev);\n      }\n    }\n    this.dragObj.modifiedData.push(crudData);\n  };\n  DragAndDrop.prototype.changeOrder = function (modifieddata) {\n    var _this = this;\n    var prevele = false;\n    var element = this.kanbanObj.sortSettings.direction === 'Ascending' ? this.dragObj.targetClone.previousElementSibling : this.dragObj.targetClone.nextElementSibling;\n    if (element && !element.classList.contains(cls.DRAGGED_CARD_CLASS) && !element.classList.contains(cls.CLONED_CARD_CLASS) && !element.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n      prevele = true;\n    } else if (this.dragObj.targetClone.nextElementSibling && this.kanbanObj.sortSettings.direction === 'Ascending') {\n      element = this.dragObj.targetClone.nextElementSibling;\n    } else if (this.dragObj.targetClone.previousElementSibling && this.kanbanObj.sortSettings.direction === 'Descending') {\n      element = this.dragObj.targetClone.previousElementSibling;\n    } else {\n      return;\n    }\n    if (element.classList.contains(cls.CARD_CLASS)) {\n      var obj = this.kanbanObj.getCardDetails(element);\n      var keyIndex_1 = obj[this.kanbanObj.sortSettings.field];\n      if (modifieddata.length > 1 && this.kanbanObj.sortSettings.direction === 'Descending') {\n        modifieddata = modifieddata.reverse();\n      }\n      modifieddata.forEach(function (data, index) {\n        if (prevele) {\n          data[_this.kanbanObj.sortSettings.field] = ++keyIndex_1;\n        } else if (keyIndex_1 !== 1 && index <= data[_this.kanbanObj.sortSettings.field]) {\n          data[_this.kanbanObj.sortSettings.field] = --keyIndex_1;\n        } else if (keyIndex_1 === 1) {\n          data[_this.kanbanObj.sortSettings.field] = index + 1;\n        }\n      });\n    }\n  };\n  DragAndDrop.prototype.toggleVisible = function (target, tColumn) {\n    var _this = this;\n    var headerCells = '.' + cls.HEADER_CELLS_CLASS + ':not(.' + cls.STACKED_HEADER_CELL_CLASS + ')';\n    var lists = [].slice.call(this.kanbanObj.element.querySelectorAll(headerCells));\n    lists.forEach(function (list) {\n      if (_this.getColumnKey(list) === _this.getColumnKey(tColumn || target)) {\n        _this.kanbanObj.actionModule.columnToggle(list);\n      }\n    });\n    var cloneTarget = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n    if (cloneTarget) {\n      var width = formatUnit(cloneTarget.offsetWidth - events.cardSpace);\n      this.dragObj.draggedClone.style.width = width;\n      this.dragObj.cloneElement.style.width = width;\n    }\n  };\n  DragAndDrop.prototype.multiCloneRemove = function () {\n    var cloneMulti = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TARGET_MULTI_CLONE_CLASS));\n    if (cloneMulti.length > 0) {\n      var columnKey = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS));\n      columnKey.forEach(function (node) {\n        return remove(node);\n      });\n      cloneMulti.forEach(function (node) {\n        var cell = closest(node, '.' + cls.CONTENT_CELLS_CLASS);\n        if (cell) {\n          cell.style.borderStyle = '';\n          if (cell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n            removeClass([cell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n          }\n          removeClass([cell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n        }\n      });\n      this.removeElement(this.dragObj.targetCloneMulti, this.kanbanObj);\n    }\n  };\n  DragAndDrop.prototype.calculateArgs = function (e) {\n    var eventArgs = this.getPageCoordinates(e);\n    this.dragObj.pageY = eventArgs.pageY;\n    this.dragObj.pageX = eventArgs.pageX;\n    this.isDragging = true;\n    if (this.kanbanObj.isAdaptive && this.kanbanObj.tooltipModule) {\n      this.kanbanObj.tooltipModule.tooltipObj.close();\n    }\n  };\n  DragAndDrop.prototype.getPageCoordinates = function (e) {\n    var eventArgs = e.event;\n    return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;\n  };\n  DragAndDrop.prototype.getColumnKey = function (target) {\n    if (target && target.getAttribute('data-key')) {\n      return target.getAttribute('data-key').trim();\n    }\n    return '';\n  };\n  DragAndDrop.prototype.updateScrollPosition = function () {\n    var _this = this;\n    if (isNullOrUndefined(this.dragObj.navigationInterval)) {\n      this.dragObj.navigationInterval = window.setInterval(function () {\n        _this.autoScroll();\n      }, 100);\n    }\n  };\n  DragAndDrop.prototype.autoScrollValidation = function () {\n    var pageY = this.dragObj.pageY;\n    var pageX = this.dragObj.pageX;\n    var autoScrollDistance = 30;\n    var dragEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var viewBoundaries = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS).getBoundingClientRect();\n    if (pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset && pageY > viewBoundaries.top + window.pageYOffset) {\n      dragEdges.top = true;\n    }\n    if (pageY > viewBoundaries.bottom - autoScrollDistance + window.pageYOffset && pageY < viewBoundaries.bottom + window.pageYOffset) {\n      dragEdges.bottom = true;\n    }\n    if (pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset && pageX > viewBoundaries.left + window.pageXOffset) {\n      dragEdges.left = true;\n    }\n    if (pageX > viewBoundaries.right - autoScrollDistance + window.pageXOffset && pageX < viewBoundaries.right + window.pageXOffset) {\n      dragEdges.right = true;\n    }\n    this.dragEdges = dragEdges;\n  };\n  DragAndDrop.prototype.autoScroll = function () {\n    this.autoScrollValidation();\n    var scrollSensitivity = 30;\n    if (this.kanbanObj.isAdaptive) {\n      var parent_1;\n      if (this.dragEdges.top || this.dragEdges.bottom) {\n        if (this.dragObj.targetClone) {\n          parent_1 = closest(this.dragObj.targetClone, '.' + cls.CARD_WRAPPER_CLASS);\n        } else {\n          parent_1 = closest(this.dragObj.draggedClone, '.' + cls.CARD_WRAPPER_CLASS);\n        }\n      } else if (this.dragEdges.right || this.dragEdges.left) {\n        parent_1 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n      }\n      if (parent_1) {\n        var yIsScrollable = parent_1.offsetHeight <= parent_1.scrollHeight;\n        var xIsScrollable = parent_1.offsetWidth <= parent_1.scrollWidth;\n        var yInBounds = parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n        var xInBounds = parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n        if (yIsScrollable && yInBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n          parent_1.scrollTop += this.dragEdges.top ? -(scrollSensitivity + 36) : scrollSensitivity;\n        }\n        if (xIsScrollable && xInBounds && (this.dragEdges.left || this.dragEdges.right)) {\n          var scroll_1 = this.kanbanObj.layoutModule.getWidth() * (this.kanbanObj.columns.length - 1) > parent_1.scrollLeft;\n          if (scroll_1 || this.dragEdges.left) {\n            parent_1.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n          }\n        }\n      }\n    } else {\n      var parent_2 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n      var column = this.dragObj.targetClone.parentElement;\n      var yScrollable = parent_2.offsetHeight <= parent_2.scrollHeight;\n      var xScrollable = parent_2.offsetWidth <= parent_2.scrollWidth;\n      var yBounds = yScrollable && parent_2.scrollTop >= 0 && parent_2.scrollTop + parent_2.offsetHeight <= parent_2.scrollHeight;\n      var xBounds = xScrollable && parent_2.scrollLeft >= 0 && parent_2.scrollLeft + parent_2.offsetWidth <= parent_2.scrollWidth;\n      if (yBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n        parent_2.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n        if (column) {\n          column.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n        }\n      }\n      if (xBounds && (this.dragEdges.left || this.dragEdges.right)) {\n        parent_2.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n        if (column) {\n          column.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n        }\n      }\n      if (this.dragObj.pageY - window.scrollY < scrollSensitivity) {\n        window.scrollTo(window.scrollX, window.scrollY - scrollSensitivity);\n      } else if (window.innerHeight - (this.dragObj.pageY - window.scrollY) < scrollSensitivity) {\n        window.scrollTo(window.scrollX, window.scrollY + scrollSensitivity);\n      }\n    }\n  };\n  DragAndDrop.prototype.unWireDragEvents = function (element) {\n    var dragInstance = element.ej2_instances[0];\n    if (dragInstance && !dragInstance.isDestroyed) {\n      dragInstance.destroy();\n    }\n  };\n  return DragAndDrop;\n}();\nexport { DragAndDrop };","map":{"version":3,"names":["Draggable","formatUnit","createElement","isNullOrUndefined","addClass","closest","removeClass","classList","remove","EventHandler","extend","cls","events","DragAndDrop","parent","dragObj","element","cloneElement","instance","targetClone","draggedClone","targetCloneMulti","selectedCards","pageX","pageY","navigationInterval","cardDetails","modifiedData","dragEdges","left","right","top","bottom","isDragging","isExternalDrop","prototype","wireDragEvents","dragContainment","externalDropId","length","querySelector","CONTENT_CLASS","clone","enableTapHold","isAdaptive","enableTailMode","cursorAt","dragArea","dragStart","bind","drag","dragStop","enableAutoScroll","helper","dragHelper","e","touchModule","mobilePopup","contains","POPUP_OPEN_CLASS","hide","sender","target","CARD_CLASS","style","width","offsetWidth","cloneWrapper","innerHTML","outerHTML","children","item","CLONED_CARD_CLASS","parentElement","appendChild","className","TARGET_MULTI_CLONE_CLASS","DROPPED_CLONE_CLASS","styles","offsetHeight","_this","CARD_SELECTION_CLASS","closestEle","CONTENT_ROW_CLASS","slice","call","querySelectorAll","forEach","push","getCardDetails","dragArgs","cancel","data","event","trigger","dragEventArgs","removeElement","intDestroy","layoutModule","disableAttributeSelection","add","document","body","keydownHandler","notify","contentReady","DRAGGED_CLONE_CLASS","insertAdjacentElement","DRAGGED_CARD_CLASS","cardElement","ROOT_CLASS","selector","SWIMLANE_ROW_CLASS","CONTENT_CELLS_CLASS","DROPPABLE_CLASS","contentCell","externalDrop","kanbanObj","isExternalKanbanDrop","externalDropObj","calculateArgs","cursor","targetKey","getColumnKey","keys","split","multiCloneRemove","isDrag","previousElementSibling","insertClone","height","getBoundingClientRect","offsetTop","CARD_WRAPPER_CLASS","DROPPING_CLASS","multiCloneCreate","cellDropping","isCollapsed","COLLAPSED_CLASS","toggleVisible","TOGGLE_VISIBLE_CLASS","tColumn","multiKeyTarget","MULTI_COLUMN_KEY_CLASS","columnKeys","DISABLED_CLASS","filter","MULTI_ACTIVE_CLASS","updateScrollPosition","getElementsByClassName","targetRootElement","ej2_instances","cells","limitEle","LIMITS_CLASS","SHOW_ADD_BUTTON","MULTI_CARD_WRAPPER_CLASS","borderStyle","_i","keys_1","key","dragCell","transition","columns","cellIndex","transitionColumns","allowTransition","allowedTransition","getAttribute","name_1","colKey","attrs","trim","text","lineHeight","currentCardKey","targetCardKey","allowedKey","i","j","dragRow","addDropping","DROP_CLASS","swimlaneSettings","keyField","allowDragAndDrop","rows","row","cell","code","removeAttribute","dragStopClear","dragStopPostClear","columnKey","dropIndex","indexOf","cardStatus_1","HTMLElement","updateDroppedData","sortSettings","field","sortBy","changeOrder","updateCard","Array","crudModule","dragMultiClone","removeProperty","clearInterval","styleCards","styleCard","externalCells","externalCell","tabHold","cardStatus","crudObj","crudData","prev","kanbanRows","swimlaneIndex","modifieddata","prevele","direction","nextElementSibling","obj","keyIndex_1","reverse","index","headerCells","HEADER_CELLS_CLASS","STACKED_HEADER_CELL_CLASS","lists","list","actionModule","columnToggle","cloneTarget","cardSpace","cloneMulti","node","eventArgs","getPageCoordinates","tooltipModule","tooltipObj","close","changedTouches","window","setInterval","autoScroll","autoScrollValidation","autoScrollDistance","viewBoundaries","pageYOffset","pageXOffset","scrollSensitivity","parent_1","yIsScrollable","scrollHeight","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","scroll_1","getWidth","parent_2","column","yScrollable","xScrollable","yBounds","xBounds","scrollY","scrollTo","scrollX","innerHeight","unWireDragEvents","dragInstance","isDestroyed","destroy"],"sources":["C:/skyz-web-react-he/node_modules/@syncfusion/ej2-kanban/src/kanban/actions/drag.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Draggable, formatUnit, createElement, isNullOrUndefined, addClass, closest } from '@syncfusion/ej2-base';\nimport { removeClass, classList, remove, EventHandler, extend } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\n/**\n * Drag and Drop module is used to perform card actions.\n */\nvar DragAndDrop = /** @class */ (function () {\n    /**\n     * Constructor for drag and drop module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function DragAndDrop(parent) {\n        this.parent = parent;\n        this.dragObj = {\n            element: null, cloneElement: null, instance: null, targetClone: null, draggedClone: null, targetCloneMulti: null,\n            selectedCards: [], pageX: 0, pageY: 0, navigationInterval: null, cardDetails: [], modifiedData: []\n        };\n        this.dragEdges = { left: false, right: false, top: false, bottom: false };\n        this.isDragging = false;\n        this.isExternalDrop = false;\n    }\n    DragAndDrop.prototype.wireDragEvents = function (element) {\n        var dragContainment;\n        if (!this.parent.element != null && this.parent.externalDropId.length === 0) {\n            dragContainment = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        }\n        this.dragObj.instance = new Draggable(element, {\n            clone: true,\n            enableTapHold: this.parent.isAdaptive,\n            enableTailMode: true,\n            cursorAt: { top: -10, left: -10 },\n            dragArea: dragContainment,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this)\n        });\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        if (this.parent.isAdaptive && this.parent.touchModule.mobilePopup &&\n            this.parent.touchModule.mobilePopup.element.classList.contains(cls.POPUP_OPEN_CLASS)) {\n            this.parent.touchModule.mobilePopup.hide();\n        }\n        this.dragObj.element = closest(e.sender.target, '.' + cls.CARD_CLASS);\n        if (isNullOrUndefined(this.dragObj.element)) {\n            return null;\n        }\n        this.dragObj.element.style.width = formatUnit(this.dragObj.element.offsetWidth);\n        var cloneWrapper = createElement('div', { innerHTML: this.dragObj.element.outerHTML });\n        this.dragObj.cloneElement = cloneWrapper.children.item(0);\n        addClass([this.dragObj.cloneElement], cls.CLONED_CARD_CLASS);\n        this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement);\n        this.dragObj.targetCloneMulti = createElement('div', { className: cls.TARGET_MULTI_CLONE_CLASS });\n        this.dragObj.targetClone = createElement('div', {\n            className: cls.DROPPED_CLONE_CLASS,\n            styles: 'width:100%;height:' + formatUnit(this.dragObj.element.offsetHeight)\n        });\n        this.dragObj.modifiedData = [];\n        return this.dragObj.cloneElement;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        this.dragObj.selectedCards = this.dragObj.element;\n        if (this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n            var className = '.' + cls.CARD_CLASS + '.' + cls.CARD_SELECTION_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')';\n            var closestEle = closest(this.dragObj.element, '.' + cls.CONTENT_ROW_CLASS);\n            this.dragObj.selectedCards = [].slice.call(closestEle.querySelectorAll(className));\n            this.dragObj.selectedCards.forEach(function (element) {\n                _this.dragObj.cardDetails.push(_this.parent.getCardDetails(element));\n            });\n        }\n        else {\n            this.dragObj.cardDetails = [this.parent.getCardDetails(this.dragObj.element)];\n        }\n        var dragArgs = { cancel: false, data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                _this.removeElement(_this.dragObj.cloneElement);\n                _this.dragObj.instance.intDestroy(e);\n                _this.dragObj.element = null;\n                _this.dragObj.targetClone = null;\n                _this.dragObj.draggedClone = null;\n                _this.dragObj.cloneElement = null;\n                _this.dragObj.targetCloneMulti = null;\n                return;\n            }\n            if (_this.dragObj.element.classList.contains(cls.CARD_SELECTION_CLASS)) {\n                _this.dragObj.selectedCards.forEach(function (element) { _this.draggedClone(element); });\n                if (_this.dragObj.selectedCards.length > 1) {\n                    _this.dragObj.cloneElement.innerHTML = '';\n                    var drag = createElement('div', {\n                        className: 'e-multi-card-text',\n                        innerHTML: _this.dragObj.selectedCards.length + ' Cards'\n                    });\n                    _this.dragObj.cloneElement.appendChild(drag);\n                    classList(_this.dragObj.cloneElement, ['e-multi-card-clone'], [cls.CARD_SELECTION_CLASS]);\n                    _this.parent.layoutModule.disableAttributeSelection(_this.dragObj.cloneElement);\n                    _this.dragObj.cloneElement.style.width = '90px';\n                }\n            }\n            else {\n                _this.draggedClone(_this.dragObj.element);\n            }\n            EventHandler.add(document.body, 'keydown', _this.keydownHandler, _this);\n            _this.parent.notify(events.contentReady, {});\n        });\n    };\n    DragAndDrop.prototype.draggedClone = function (element) {\n        this.dragObj.draggedClone = createElement('div', {\n            className: cls.DRAGGED_CLONE_CLASS,\n            styles: 'width:' + formatUnit(element.offsetWidth - 1) + ';height:' + formatUnit(element.offsetHeight)\n        });\n        element.insertAdjacentElement('afterend', this.dragObj.draggedClone);\n        addClass([element], cls.DRAGGED_CARD_CLASS);\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        var _this = this;\n        if (!e.target) {\n            return;\n        }\n        var cardElement = closest(e.target, '.' + cls.ROOT_CLASS + ' .' + cls.CARD_CLASS);\n        var target = cardElement || e.target;\n        var selector = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DROPPABLE_CLASS;\n        var contentCell = closest(target, selector);\n        this.externalDrop(target);\n        this.kanbanObj = this.parent.isExternalKanbanDrop ? this.parent.externalDropObj : this.parent;\n        this.calculateArgs(e);\n        if (contentCell && document.body.style.cursor !== 'not-allowed') {\n            var targetKey = this.getColumnKey(contentCell);\n            var keys = targetKey.split(',');\n            this.multiCloneRemove();\n            var isDrag = (targetKey === this.getColumnKey(closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS)))\n                ? true : false;\n            if (keys.length === 1 || isDrag) {\n                if (target.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n                    this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n                }\n                if (target.classList.contains(cls.CARD_CLASS)) {\n                    var element = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ?\n                        (target.previousElementSibling.classList.contains(cls.DRAGGED_CARD_CLASS) ? null : target.previousElementSibling)\n                        : target.previousElementSibling;\n                    var insertClone = 'afterend';\n                    if (isNullOrUndefined(element)) {\n                        var pageY = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? (this.dragObj.pageY / 2) :\n                            this.dragObj.pageY;\n                        var height = target.classList.contains(cls.DRAGGED_CLONE_CLASS) ? target.offsetHeight :\n                            (target.offsetHeight / 2);\n                        if ((pageY - (this.kanbanObj.element.getBoundingClientRect().top + target.offsetTop)) < height) {\n                            insertClone = 'beforebegin';\n                        }\n                    }\n                    target.insertAdjacentElement(insertClone, this.dragObj.targetClone);\n                }\n                else if (target.classList.contains(cls.CONTENT_CELLS_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)) {\n                    if (target.querySelectorAll('.' + cls.DRAGGED_CARD_CLASS).length !== 0 &&\n                        target.querySelectorAll('.' + cls.CARD_CLASS + ':not(.e-kanban-dragged-card):not(.e-cloned-card)').length === 0) {\n                        return;\n                    }\n                    else {\n                        target.querySelector('.' + cls.CARD_WRAPPER_CLASS).appendChild(this.dragObj.targetClone);\n                    }\n                }\n                else if (target.classList.contains(cls.CARD_WRAPPER_CLASS) && !closest(target, '.' + cls.SWIMLANE_ROW_CLASS)\n                    && contentCell.querySelectorAll('.' + cls.CARD_CLASS).length === 0) {\n                    target.appendChild(this.dragObj.targetClone);\n                }\n            }\n            else if (keys.length > 1 && contentCell.classList.contains(cls.DROPPING_CLASS)) {\n                this.multiCloneCreate(keys, contentCell);\n            }\n            this.kanbanObj.notify(events.contentReady, {});\n        }\n        if (this.kanbanObj.element.querySelectorAll('.' + cls.DROPPING_CLASS).length === 0) {\n            this.cellDropping();\n        }\n        var isCollapsed = false;\n        if (contentCell) {\n            isCollapsed = contentCell.classList.contains(cls.COLLAPSED_CLASS) && contentCell.classList.contains(cls.DROPPING_CLASS);\n        }\n        if (isCollapsed) {\n            this.toggleVisible(target);\n            addClass([contentCell], cls.TOGGLE_VISIBLE_CLASS);\n        }\n        var tColumn = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TOGGLE_VISIBLE_CLASS));\n        if (tColumn.length > 0 && !target.classList.contains(cls.TOGGLE_VISIBLE_CLASS)\n            && !closest(target, '.' + cls.TOGGLE_VISIBLE_CLASS)) {\n            this.toggleVisible(target, tColumn.slice(-1)[0]);\n            removeClass(tColumn, cls.TOGGLE_VISIBLE_CLASS);\n        }\n        this.kanbanObj.notify(events.contentReady, {});\n        var multiKeyTarget = closest(target, '.' + cls.MULTI_COLUMN_KEY_CLASS);\n        if (multiKeyTarget) {\n            var columnKeys = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' +\n                cls.DISABLED_CLASS + ')')).filter(function (element) { return _this.getColumnKey(element) === _this.getColumnKey(multiKeyTarget); });\n            if (columnKeys.length > 0) {\n                addClass(columnKeys, cls.MULTI_ACTIVE_CLASS);\n                if (columnKeys[0].previousElementSibling) {\n                    addClass([columnKeys[0].previousElementSibling], 'e-multi-bottom-border');\n                }\n            }\n        }\n        document.body.style.cursor = (contentCell && contentCell.classList.contains(cls.DROPPING_CLASS)) ? '' : 'not-allowed';\n        if (cardElement && !(closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS)).classList.contains(cls.DROPPING_CLASS)) {\n            cardElement.style.cursor = 'not-allowed';\n            document.body.style.cursor = 'not-allowed';\n        }\n        if (this.isExternalDrop && document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        if (document.body.style.cursor === 'not-allowed') {\n            this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n            this.multiCloneRemove();\n        }\n        this.updateScrollPosition();\n        var dragArgs = { data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };\n        this.kanbanObj.trigger(events.drag, dragArgs);\n        this.parent.isExternalKanbanDrop = false;\n        this.isExternalDrop = false;\n    };\n    DragAndDrop.prototype.removeElement = function (element, kanbanObj) {\n        kanbanObj = kanbanObj ? kanbanObj : this.parent;\n        if (kanbanObj.element.getElementsByClassName(element.className).length > 0) {\n            remove(element);\n        }\n    };\n    DragAndDrop.prototype.externalDrop = function (target) {\n        var _this = this;\n        this.parent.externalDropId.forEach(function (externalDropId) {\n            var targetRootElement = closest(target, externalDropId);\n            if (targetRootElement) {\n                if (targetRootElement.classList.contains('e-kanban')) {\n                    _this.parent.externalDropObj = document.querySelector(externalDropId).ej2_instances[0];\n                    _this.parent.isExternalKanbanDrop = true;\n                    var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS +\n                        '):not(.' + cls.COLLAPSED_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n                    var cells = [].slice.call(_this.parent.externalDropObj.element.querySelectorAll(className));\n                    addClass(cells, cls.DROPPING_CLASS);\n                }\n                else {\n                    _this.isExternalDrop = true;\n                }\n            }\n        });\n    };\n    DragAndDrop.prototype.multiCloneCreate = function (keys, contentCell) {\n        var offsetHeight = contentCell.offsetHeight;\n        var limitEle = contentCell.querySelector('.' + cls.LIMITS_CLASS);\n        if (limitEle) {\n            offsetHeight -= limitEle.offsetHeight;\n        }\n        this.dragObj.targetCloneMulti.style.height = formatUnit(offsetHeight);\n        if (contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n            addClass([contentCell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n        }\n        addClass([contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n        contentCell.querySelector('.' + cls.CARD_WRAPPER_CLASS).style.height = 'auto';\n        contentCell.style.borderStyle = 'none';\n        this.removeElement(this.dragObj.targetClone);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n            var transition = this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n            var allowTransition = this.allowedTransition(this.dragObj.element.getAttribute('data-key'), key, transition);\n            var name_1 = allowTransition ? '' : ' ' + cls.DISABLED_CLASS;\n            var colKey = createElement('div', {\n                className: cls.MULTI_COLUMN_KEY_CLASS + name_1,\n                attrs: { 'data-key': key.trim() }\n            });\n            var text = createElement('div', { className: 'e-text', innerHTML: key.trim() });\n            contentCell.appendChild(this.dragObj.targetCloneMulti).appendChild(colKey).appendChild(text);\n            colKey.style.cursor = allowTransition ? '' : 'not-allowed';\n            colKey.style.lineHeight = colKey.style.height = formatUnit((offsetHeight / keys.length));\n            text.style.top = formatUnit((offsetHeight / 2) - (text.offsetHeight / 2));\n        }\n    };\n    DragAndDrop.prototype.allowedTransition = function (currentCardKey, targetCardKey, allowedKey) {\n        var allowTransition = true;\n        var targetKey = targetCardKey.split(',');\n        for (var i = 0; i < targetKey.length; i++) {\n            if (currentCardKey === targetKey[i].trim()) {\n                return true;\n            }\n            if (allowedKey) {\n                if (allowedKey.length === 1 && allowedKey[0].length === 0) {\n                    return true;\n                }\n                for (var j = 0; j < allowedKey.length; j++) {\n                    if (targetKey[i].trim() === allowedKey[j].trim()) {\n                        return true;\n                    }\n                    else {\n                        allowTransition = false;\n                    }\n                }\n            }\n        }\n        return allowTransition;\n    };\n    DragAndDrop.prototype.cellDropping = function () {\n        var _this = this;\n        var dragCell = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        var dragRow = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_ROW_CLASS);\n        this.addDropping(dragRow, dragCell);\n        if (dragCell && dragCell.classList.contains(cls.DROP_CLASS)) {\n            addClass([dragCell], cls.DROPPING_CLASS);\n        }\n        if (this.kanbanObj.swimlaneSettings.keyField && this.kanbanObj.swimlaneSettings.allowDragAndDrop) {\n            var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + '):not(.' + cls.COLLAPSED_CLASS + ')';\n            var rows = [].slice.call(this.kanbanObj.element.querySelectorAll(className));\n            [].slice.call(rows).forEach(function (row) {\n                if (dragRow !== row) {\n                    _this.addDropping(row, dragCell);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.addDropping = function (dragRow, dragCell) {\n        var _this = this;\n        if (dragCell && dragRow) {\n            [].slice.call(dragRow.children).forEach(function (cell) {\n                var transition = _this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;\n                if (cell !== dragCell && cell.classList.contains(cls.DROP_CLASS) &&\n                    _this.allowedTransition(dragCell.getAttribute('data-key'), cell.getAttribute('data-key'), transition)) {\n                    addClass([cell], cls.DROPPING_CLASS);\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.keydownHandler = function (e) {\n        if (e.code === 'Escape' && this.dragObj.cloneElement) {\n            EventHandler.remove(this.dragObj.cloneElement, 'keydown', this.keydownHandler);\n            this.dragObj.element.removeAttribute('aria-grabbed');\n            this.dragStopClear();\n            this.dragStopPostClear();\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        var contentCell = closest(this.dragObj.targetClone, '.' + cls.CONTENT_CELLS_CLASS);\n        var columnKey;\n        var dropIndex;\n        EventHandler.remove(document.body, 'keydown', this.keydownHandler);\n        if (this.dragObj.targetClone.parentElement) {\n            var className = '.' + cls.CARD_CLASS + ':not(.' + cls.DRAGGED_CARD_CLASS + '),.' + cls.DROPPED_CLONE_CLASS;\n            var element = [].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(className));\n            dropIndex = element.indexOf(this.dragObj.targetClone);\n        }\n        if (!isNullOrUndefined(this.kanbanObj) && this.kanbanObj.element.querySelector('.' + cls.TARGET_MULTI_CLONE_CLASS)) {\n            columnKey = closest(e.target, '.' + cls.MULTI_COLUMN_KEY_CLASS + ':not(.' + cls.DISABLED_CLASS + ')');\n        }\n        if (contentCell || columnKey) {\n            var cardStatus_1;\n            if (contentCell) {\n                cardStatus_1 = this.getColumnKey(contentCell);\n            }\n            else {\n                cardStatus_1 = this.getColumnKey(columnKey);\n                contentCell = closest(columnKey, '.' + cls.CONTENT_CELLS_CLASS);\n            }\n            if (this.dragObj.selectedCards instanceof HTMLElement) {\n                this.updateDroppedData(this.dragObj.selectedCards, cardStatus_1, contentCell);\n            }\n            else {\n                this.dragObj.selectedCards.forEach(function (element) { _this.updateDroppedData(element, cardStatus_1, contentCell); });\n            }\n            if (this.parent.sortSettings.field && this.parent.sortSettings.sortBy === 'Index') {\n                this.changeOrder(this.dragObj.modifiedData);\n            }\n        }\n        if (this.dragObj.modifiedData.length === 0) {\n            this.dragObj.modifiedData = this.dragObj.cardDetails;\n        }\n        var dragArgs = {\n            cancel: false, data: this.dragObj.modifiedData, event: e, element: this.dragObj.selectedCards,\n            dropIndex: dropIndex\n        };\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            _this.dragStopClear();\n            if (!dragEventArgs.cancel) {\n                if (contentCell || columnKey) {\n                    var updateCard = dragEventArgs.data instanceof Array &&\n                        dragEventArgs.data.length > 1 ? dragEventArgs.data :\n                        dragEventArgs.data[0];\n                    _this.parent.crudModule.updateCard(updateCard, dragEventArgs.dropIndex);\n                }\n            }\n            _this.dragStopPostClear();\n        });\n    };\n    DragAndDrop.prototype.dragStopClear = function () {\n        this.removeElement(this.dragObj.draggedClone);\n        this.removeElement(this.dragObj.targetClone, this.kanbanObj);\n        this.removeElement(this.dragObj.cloneElement);\n        var dragMultiClone = [].slice.call(this.parent.element.querySelectorAll('.' + cls.DRAGGED_CLONE_CLASS));\n        dragMultiClone.forEach(function (clone) { remove(clone); });\n        this.dragObj.element.style.removeProperty('width');\n        this.multiCloneRemove();\n        if (this.dragObj.selectedCards instanceof HTMLElement) {\n            removeClass([this.dragObj.selectedCards], cls.DRAGGED_CARD_CLASS);\n        }\n        else {\n            removeClass(this.dragObj.selectedCards, cls.DRAGGED_CARD_CLASS);\n        }\n        clearInterval(this.dragObj.navigationInterval);\n        this.dragObj.navigationInterval = null;\n        if (document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        var styleCards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[style]'));\n        styleCards.forEach(function (styleCard) { styleCard.style.cursor = ''; });\n        var className = '.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ')';\n        var cells = [].slice.call(this.parent.element.querySelectorAll(className + ' .' + cls.CONTENT_CELLS_CLASS));\n        cells.forEach(function (cell) { return removeClass([cell], cls.DROPPING_CLASS); });\n        if (this.parent.externalDropObj) {\n            var externalCells = [].slice.call(this.parent.externalDropObj.element.querySelectorAll(className + ' .' +\n                cls.CONTENT_CELLS_CLASS));\n            externalCells.forEach(function (externalCell) { return removeClass([externalCell], cls.DROPPING_CLASS); });\n        }\n    };\n    DragAndDrop.prototype.dragStopPostClear = function () {\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.tabHold = false;\n        }\n        this.dragObj.cardDetails = this.dragObj.modifiedData = [];\n        this.isDragging = false;\n        this.parent.isExternalKanbanDrop = false;\n        this.parent.externalDropObj = null;\n    };\n    DragAndDrop.prototype.updateDroppedData = function (element, cardStatus, contentCell) {\n        var crudObj = this.parent.getCardDetails(element);\n        var crudData = extend({}, crudObj, null, true);\n        if (cardStatus.split(',').length === 1) {\n            crudData[this.parent.keyField] = cardStatus;\n        }\n        if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneSettings.allowDragAndDrop) {\n            var prev = closest(contentCell, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling;\n            if (this.parent.isAdaptive) {\n                var keyField = this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;\n                crudData[this.parent.swimlaneSettings.keyField] = keyField;\n            }\n            else {\n                crudData[this.parent.swimlaneSettings.keyField] = this.getColumnKey(prev);\n            }\n        }\n        this.dragObj.modifiedData.push(crudData);\n    };\n    DragAndDrop.prototype.changeOrder = function (modifieddata) {\n        var _this = this;\n        var prevele = false;\n        var element = this.kanbanObj.sortSettings.direction === 'Ascending' ?\n            this.dragObj.targetClone.previousElementSibling : this.dragObj.targetClone.nextElementSibling;\n        if (element && !element.classList.contains(cls.DRAGGED_CARD_CLASS) && !element.classList.contains(cls.CLONED_CARD_CLASS)\n            && !element.classList.contains(cls.DRAGGED_CLONE_CLASS)) {\n            prevele = true;\n        }\n        else if (this.dragObj.targetClone.nextElementSibling && this.kanbanObj.sortSettings.direction === 'Ascending') {\n            element = this.dragObj.targetClone.nextElementSibling;\n        }\n        else if (this.dragObj.targetClone.previousElementSibling && this.kanbanObj.sortSettings.direction === 'Descending') {\n            element = this.dragObj.targetClone.previousElementSibling;\n        }\n        else {\n            return;\n        }\n        if (element.classList.contains(cls.CARD_CLASS)) {\n            var obj = this.kanbanObj.getCardDetails(element);\n            var keyIndex_1 = obj[this.kanbanObj.sortSettings.field];\n            if (modifieddata.length > 1 && this.kanbanObj.sortSettings.direction === 'Descending') {\n                modifieddata = modifieddata.reverse();\n            }\n            modifieddata.forEach(function (data, index) {\n                if (prevele) {\n                    data[_this.kanbanObj.sortSettings.field] = ++keyIndex_1;\n                }\n                else if (keyIndex_1 !== 1 && index <= data[_this.kanbanObj.sortSettings.field]) {\n                    data[_this.kanbanObj.sortSettings.field] = --keyIndex_1;\n                }\n                else if (keyIndex_1 === 1) {\n                    data[_this.kanbanObj.sortSettings.field] = index + 1;\n                }\n            });\n        }\n    };\n    DragAndDrop.prototype.toggleVisible = function (target, tColumn) {\n        var _this = this;\n        var headerCells = '.' + cls.HEADER_CELLS_CLASS + ':not(.' + cls.STACKED_HEADER_CELL_CLASS + ')';\n        var lists = [].slice.call(this.kanbanObj.element.querySelectorAll(headerCells));\n        lists.forEach(function (list) {\n            if (_this.getColumnKey(list) === _this.getColumnKey(tColumn || target)) {\n                _this.kanbanObj.actionModule.columnToggle(list);\n            }\n        });\n        var cloneTarget = closest(this.dragObj.draggedClone, '.' + cls.CONTENT_CELLS_CLASS);\n        if (cloneTarget) {\n            var width = formatUnit(cloneTarget.offsetWidth - events.cardSpace);\n            this.dragObj.draggedClone.style.width = width;\n            this.dragObj.cloneElement.style.width = width;\n        }\n    };\n    DragAndDrop.prototype.multiCloneRemove = function () {\n        var cloneMulti = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.TARGET_MULTI_CLONE_CLASS));\n        if (cloneMulti.length > 0) {\n            var columnKey = [].slice.call(this.kanbanObj.element.querySelectorAll('.' + cls.MULTI_COLUMN_KEY_CLASS));\n            columnKey.forEach(function (node) { return remove(node); });\n            cloneMulti.forEach(function (node) {\n                var cell = closest(node, '.' + cls.CONTENT_CELLS_CLASS);\n                if (cell) {\n                    cell.style.borderStyle = '';\n                    if (cell.querySelector('.' + cls.SHOW_ADD_BUTTON)) {\n                        removeClass([cell.querySelector('.' + cls.SHOW_ADD_BUTTON)], cls.MULTI_CARD_WRAPPER_CLASS);\n                    }\n                    removeClass([cell.querySelector('.' + cls.CARD_WRAPPER_CLASS)], cls.MULTI_CARD_WRAPPER_CLASS);\n                }\n            });\n            this.removeElement(this.dragObj.targetCloneMulti, this.kanbanObj);\n        }\n    };\n    DragAndDrop.prototype.calculateArgs = function (e) {\n        var eventArgs = this.getPageCoordinates(e);\n        this.dragObj.pageY = eventArgs.pageY;\n        this.dragObj.pageX = eventArgs.pageX;\n        this.isDragging = true;\n        if (this.kanbanObj.isAdaptive && this.kanbanObj.tooltipModule) {\n            this.kanbanObj.tooltipModule.tooltipObj.close();\n        }\n    };\n    DragAndDrop.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    DragAndDrop.prototype.getColumnKey = function (target) {\n        if (target && target.getAttribute('data-key')) {\n            return target.getAttribute('data-key').trim();\n        }\n        return '';\n    };\n    DragAndDrop.prototype.updateScrollPosition = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.dragObj.navigationInterval)) {\n            this.dragObj.navigationInterval = window.setInterval(function () { _this.autoScroll(); }, 100);\n        }\n    };\n    DragAndDrop.prototype.autoScrollValidation = function () {\n        var pageY = this.dragObj.pageY;\n        var pageX = this.dragObj.pageX;\n        var autoScrollDistance = 30;\n        var dragEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            dragEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            dragEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            dragEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            dragEdges.right = true;\n        }\n        this.dragEdges = dragEdges;\n    };\n    DragAndDrop.prototype.autoScroll = function () {\n        this.autoScrollValidation();\n        var scrollSensitivity = 30;\n        if (this.kanbanObj.isAdaptive) {\n            var parent_1;\n            if (this.dragEdges.top || this.dragEdges.bottom) {\n                if (this.dragObj.targetClone) {\n                    parent_1 = closest(this.dragObj.targetClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n                else {\n                    parent_1 = closest(this.dragObj.draggedClone, '.' + cls.CARD_WRAPPER_CLASS);\n                }\n            }\n            else if (this.dragEdges.right || this.dragEdges.left) {\n                parent_1 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            }\n            if (parent_1) {\n                var yIsScrollable = parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xIsScrollable = parent_1.offsetWidth <= parent_1.scrollWidth;\n                var yInBounds = parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n                var xInBounds = parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n                if (yIsScrollable && yInBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                    parent_1.scrollTop += this.dragEdges.top ? -(scrollSensitivity + 36) : scrollSensitivity;\n                }\n                if (xIsScrollable && xInBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                    var scroll_1 = (this.kanbanObj.layoutModule.getWidth() * (this.kanbanObj.columns.length - 1)) >\n                        parent_1.scrollLeft;\n                    if (scroll_1 || this.dragEdges.left) {\n                        parent_1.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                    }\n                }\n            }\n        }\n        else {\n            var parent_2 = this.kanbanObj.element.querySelector('.' + cls.CONTENT_CLASS);\n            var column = this.dragObj.targetClone.parentElement;\n            var yScrollable = parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xScrollable = parent_2.offsetWidth <= parent_2.scrollWidth;\n            var yBounds = yScrollable && parent_2.scrollTop >= 0 && parent_2.scrollTop + parent_2.offsetHeight <= parent_2.scrollHeight;\n            var xBounds = xScrollable && parent_2.scrollLeft >= 0 && parent_2.scrollLeft + parent_2.offsetWidth <= parent_2.scrollWidth;\n            if (yBounds && (this.dragEdges.top || this.dragEdges.bottom)) {\n                parent_2.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                if (column) {\n                    column.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (xBounds && (this.dragEdges.left || this.dragEdges.right)) {\n                parent_2.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                if (column) {\n                    column.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;\n                }\n            }\n            if (this.dragObj.pageY - window.scrollY < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY - scrollSensitivity);\n            }\n            else if (window.innerHeight - (this.dragObj.pageY - window.scrollY) < scrollSensitivity) {\n                window.scrollTo(window.scrollX, window.scrollY + scrollSensitivity);\n            }\n        }\n    };\n    DragAndDrop.prototype.unWireDragEvents = function (element) {\n        var dragInstance = element.ej2_instances[0];\n        if (dragInstance && !dragInstance.isDestroyed) {\n            dragInstance.destroy();\n        }\n    };\n    return DragAndDrop;\n}());\nexport { DragAndDrop };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}