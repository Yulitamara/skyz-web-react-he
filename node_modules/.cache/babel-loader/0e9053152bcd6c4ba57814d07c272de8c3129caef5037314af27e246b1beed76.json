{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const defaultPrefs={fontScale:1,// 1, 1.15, 1.3\ncontrast:false,dyslexia:false,underlineLinks:false,focus:false,reduceMotion:false};const STORAGE_KEY=\"a11y_prefs_v1\";export default function AccessibilityWidget(){var _i18n$language;const{i18n}=useTranslation();const isHe=(_i18n$language=i18n.language)===null||_i18n$language===void 0?void 0:_i18n$language.startsWith(\"he\");const[open,setOpen]=useState(false);const[prefs,setPrefs]=useState(defaultPrefs);const panelRef=useRef(null);const buttonRef=useRef(null);// load\nuseEffect(()=>{try{const saved=JSON.parse(localStorage.getItem(STORAGE_KEY));if(saved)setPrefs({...defaultPrefs,...saved});}catch{}},[]);// click-away & Esc to close\nuseEffect(()=>{if(!open)return;const handleDocMouseDown=e=>{const panelEl=panelRef.current;const btnEl=buttonRef.current;if(!panelEl||!btnEl)return;const clickedOutside=!panelEl.contains(e.target)&&!btnEl.contains(e.target);if(clickedOutside)setOpen(false);};const handleKeyDown=e=>{if(e.key===\"Escape\")setOpen(false);};document.addEventListener(\"mousedown\",handleDocMouseDown);document.addEventListener(\"keydown\",handleKeyDown);return()=>{document.removeEventListener(\"mousedown\",handleDocMouseDown);document.removeEventListener(\"keydown\",handleKeyDown);};},[open]);// apply + persist\nuseEffect(()=>{const root=document.documentElement;root.style.setProperty(\"--a11y-font-scale\",String(prefs.fontScale));root.classList.toggle(\"a11y-contrast\",prefs.contrast);root.classList.toggle(\"a11y-dyslexia\",prefs.dyslexia);root.classList.toggle(\"a11y-underline-links\",prefs.underlineLinks);root.classList.toggle(\"a11y-focus\",prefs.focus);root.classList.toggle(\"a11y-reduce-motion\",prefs.reduceMotion);localStorage.setItem(STORAGE_KEY,JSON.stringify(prefs));},[prefs]);const t=(he,en)=>isHe?he:en;const incFont=()=>setPrefs(p=>({...p,fontScale:Math.min(1.3,+(p.fontScale+0.15).toFixed(2))}));const decFont=()=>setPrefs(p=>({...p,fontScale:Math.max(1,+(p.fontScale-0.15).toFixed(2))}));const resetAll=()=>setPrefs(defaultPrefs);return/*#__PURE__*/_jsxs(\"div\",{className:\"a11y-widget\",\"aria-live\":\"polite\",children:[/*#__PURE__*/_jsx(\"button\",{ref:buttonRef,className:\"a11y-toggle\",\"aria-haspopup\":\"true\",\"aria-expanded\":open,\"aria-label\":t(\"פתיחת תפריט נגישות\",\"Open accessibility menu\"),onClick:()=>setOpen(o=>!o),children:\"\\u267F\"}),open&&/*#__PURE__*/_jsxs(\"div\",{ref:panelRef,className:\"a11y-panel\",role:\"dialog\",\"aria-label\":t(\"תפריט נגישות\",\"Accessibility menu\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"גודל טקסט\",\"Text size\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"group\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:decFont,\"aria-label\":t(\"הקטנת טקסט\",\"Decrease text\"),children:\"A\\u2212\"}),/*#__PURE__*/_jsx(\"button\",{onClick:incFont,\"aria-label\":t(\"הגדלת טקסט\",\"Increase text\"),children:\"A+\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"ניגודיות גבוהה\",\"High contrast\")}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:prefs.contrast,onChange:e=>setPrefs(p=>({...p,contrast:e.target.checked}))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"קו תחתון לקישורים\",\"Underline links\")}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:prefs.underlineLinks,onChange:e=>setPrefs(p=>({...p,underlineLinks:e.target.checked}))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"הדגשת פוקוס במקלדת\",\"Highlight keyboard focus\")}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:prefs.focus,onChange:e=>setPrefs(p=>({...p,focus:e.target.checked}))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"reset\",onClick:resetAll,children:t(\"איפוס\",\"Reset\")})]})]});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useTranslation","jsx","_jsx","jsxs","_jsxs","defaultPrefs","fontScale","contrast","dyslexia","underlineLinks","focus","reduceMotion","STORAGE_KEY","AccessibilityWidget","_i18n$language","i18n","isHe","language","startsWith","open","setOpen","prefs","setPrefs","panelRef","buttonRef","saved","JSON","parse","localStorage","getItem","handleDocMouseDown","e","panelEl","current","btnEl","clickedOutside","contains","target","handleKeyDown","key","document","addEventListener","removeEventListener","root","documentElement","style","setProperty","String","classList","toggle","setItem","stringify","t","he","en","incFont","p","Math","min","toFixed","decFont","max","resetAll","className","children","ref","onClick","o","role","type","checked","onChange"],"sources":["C:/Users/yulit/skyz-web-react-he/src/components/AccessibilityWidget.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst defaultPrefs = {\r\n  fontScale: 1,        // 1, 1.15, 1.3\r\n  contrast: false,\r\n  dyslexia: false,\r\n  underlineLinks: false,\r\n  focus: false,     \r\n  reduceMotion: false,\r\n};\r\n\r\nconst STORAGE_KEY = \"a11y_prefs_v1\";\r\n\r\nexport default function AccessibilityWidget() {\r\n  const { i18n } = useTranslation();\r\n  const isHe = i18n.language?.startsWith(\"he\");\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [prefs, setPrefs] = useState(defaultPrefs);\r\n\r\n  const panelRef = useRef(null);\r\n  const buttonRef = useRef(null);\r\n\r\n  // load\r\n  useEffect(() => {\r\n    try {\r\n      const saved = JSON.parse(localStorage.getItem(STORAGE_KEY));\r\n      if (saved) setPrefs({ ...defaultPrefs, ...saved });\r\n    } catch {}\r\n  }, []);\r\n\r\n  // click-away & Esc to close\r\n  useEffect(() => {\r\n    if (!open) return;\r\n\r\n    const handleDocMouseDown = (e) => {\r\n      const panelEl = panelRef.current;\r\n      const btnEl = buttonRef.current;\r\n      if (!panelEl || !btnEl) return;\r\n      const clickedOutside =\r\n        !panelEl.contains(e.target) && !btnEl.contains(e.target);\r\n      if (clickedOutside) setOpen(false);\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === \"Escape\") setOpen(false);\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleDocMouseDown);\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleDocMouseDown);\r\n      document.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  }, [open]);\r\n\r\n  // apply + persist\r\n  useEffect(() => {\r\n    const root = document.documentElement;\r\n    root.style.setProperty(\"--a11y-font-scale\", String(prefs.fontScale));\r\n    root.classList.toggle(\"a11y-contrast\", prefs.contrast);\r\n    root.classList.toggle(\"a11y-dyslexia\", prefs.dyslexia);\r\n    root.classList.toggle(\"a11y-underline-links\", prefs.underlineLinks);\r\n    root.classList.toggle(\"a11y-focus\", prefs.focus);\r\n    root.classList.toggle(\"a11y-reduce-motion\", prefs.reduceMotion);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(prefs));\r\n  }, [prefs]);\r\n\r\n  const t = (he, en) => (isHe ? he : en);\r\n\r\n  const incFont = () =>\r\n    setPrefs((p) => ({\r\n      ...p,\r\n      fontScale: Math.min(1.3, +(p.fontScale + 0.15).toFixed(2)),\r\n    }));\r\n  const decFont = () =>\r\n    setPrefs((p) => ({\r\n      ...p,\r\n      fontScale: Math.max(1, +(p.fontScale - 0.15).toFixed(2)),\r\n    }));\r\n  const resetAll = () => setPrefs(defaultPrefs);\r\n\r\n  return (\r\n    <div className=\"a11y-widget\" aria-live=\"polite\">\r\n      <button\r\n        ref={buttonRef}\r\n        className=\"a11y-toggle\"\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open}\r\n        aria-label={t(\"פתיחת תפריט נגישות\", \"Open accessibility menu\")}\r\n        onClick={() => setOpen((o) => !o)}\r\n      >\r\n        ♿\r\n      </button>\r\n\r\n      {open && (\r\n        <div\r\n          ref={panelRef}\r\n          className=\"a11y-panel\"\r\n          role=\"dialog\"\r\n          aria-label={t(\"תפריט נגישות\", \"Accessibility menu\")}\r\n        >\r\n          <div className=\"row\">\r\n            <span>{t(\"גודל טקסט\", \"Text size\")}</span>\r\n            <div className=\"group\">\r\n              <button\r\n                onClick={decFont}\r\n                aria-label={t(\"הקטנת טקסט\", \"Decrease text\")}\r\n              >\r\n                A−\r\n              </button>\r\n              <button\r\n                onClick={incFont}\r\n                aria-label={t(\"הגדלת טקסט\", \"Increase text\")}\r\n              >\r\n                A+\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <label className=\"row\">\r\n            <span>{t(\"ניגודיות גבוהה\", \"High contrast\")}</span>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={prefs.contrast}\r\n              onChange={(e) =>\r\n                setPrefs((p) => ({ ...p, contrast: e.target.checked }))\r\n              }\r\n            />\r\n          </label>\r\n\r\n          <label className=\"row\">\r\n            <span>{t(\"קו תחתון לקישורים\", \"Underline links\")}</span>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={prefs.underlineLinks}\r\n              onChange={(e) =>\r\n                setPrefs((p) => ({ ...p, underlineLinks: e.target.checked }))\r\n              }\r\n            />\r\n          </label>\r\n\r\n          <label className=\"row\">\r\n            <span>{t(\"הדגשת פוקוס במקלדת\", \"Highlight keyboard focus\")}</span>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={prefs.focus}\r\n              onChange={(e) =>\r\n                setPrefs((p) => ({ ...p, focus: e.target.checked }))\r\n              }\r\n            />\r\n          </label>\r\n\r\n          <button className=\"reset\" onClick={resetAll}>\r\n            {t(\"איפוס\", \"Reset\")}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}