{"ast":null,"code":"import React,{useEffect,useMemo,useState}from\"react\";import{useParams,Link}from\"react-router-dom\";import{Helmet}from\"react-helmet-async\";import{useTranslation}from\"react-i18next\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const BlogPost=()=>{var _i18n$language;const{i18n}=useTranslation();const{url}=useParams();const[post,setPost]=useState(null);const[notFound,setNotFound]=useState(false);const isHe=(_i18n$language=i18n.language)===null||_i18n$language===void 0?void 0:_i18n$language.startsWith(\"he\");const dir=isHe?\"rtl\":\"ltr\";const lang=isHe?\"he\":\"en\";useEffect(()=>{const lng=isHe?\"he\":\"en\";import(\"../data/blogs.\".concat(lng,\".json\")).then(m=>{var _m$default$blogs,_m$default;const raw=(_m$default$blogs=(_m$default=m.default)===null||_m$default===void 0?void 0:_m$default.blogs)!==null&&_m$default$blogs!==void 0?_m$default$blogs:[];const arr=Array.isArray(raw)?raw:Object.values(raw);const normalized=arr.map(b=>({...b,content:Array.isArray(b.content)?b.content.join(\"\"):b.content}));const found=normalized.find(b=>b.url===url);setPost(found||null);setNotFound(!found);}).catch(()=>setNotFound(true));},[isHe,url]);const html=useMemo(()=>({__html:(post===null||post===void 0?void 0:post.content)||\"\"}),[post]);if(notFound){return/*#__PURE__*/_jsxs(\"section\",{dir:dir,className:\"blog-post\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsxs(\"title\",{children:[isHe?\"הפוסט לא נמצא\":\"Post not found\",\" | SkyzCRM\"]}),/*#__PURE__*/_jsx(\"meta\",{httpEquiv:\"content-language\",content:lang})]}),/*#__PURE__*/_jsx(\"h1\",{children:isHe?\"הפוסט לא נמצא\":\"Post not found\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\\u05D1\\u05DC\\u05D5\\u05D2/\",children:isHe?\"חזרה לבלוג\":\"Back to blog\"})})]});}if(!post){return/*#__PURE__*/_jsxs(\"section\",{dir:dir,className:\"blog-post\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"meta\",{httpEquiv:\"content-language\",content:lang})}),/*#__PURE__*/_jsx(\"p\",{children:isHe?\"טוען…\":\"Loading…\"})]});}return/*#__PURE__*/_jsxs(\"section\",{dir:dir,className:\"blog-post\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsxs(\"title\",{children:[post.title,\" | SkyzCRM\"]}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:post.short||post.title}),/*#__PURE__*/_jsx(\"meta\",{httpEquiv:\"content-language\",content:lang}),/*#__PURE__*/_jsx(\"link\",{rel:\"canonical\",href:\"/\\u05D1\\u05DC\\u05D5\\u05D2/\".concat(post.url,\"/\")})]}),/*#__PURE__*/_jsx(\"h1\",{children:post.title}),post.img&&/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{className:\"blog-post-img\",src:post.img,alt:post.title})}),/*#__PURE__*/_jsx(\"article\",{className:\"content\",dangerouslySetInnerHTML:html}),/*#__PURE__*/_jsx(\"p\",{className:\"back-to-articles\",children:/*#__PURE__*/_jsx(Link,{to:\"/\\u05D1\\u05DC\\u05D5\\u05D2/\",children:isHe?\"← חזרה לכל המאמרים\":\"← Back to all articles\"})})]});};export default BlogPost;","map":{"version":3,"names":["React","useEffect","useMemo","useState","useParams","Link","Helmet","useTranslation","jsxs","_jsxs","jsx","_jsx","BlogPost","_i18n$language","i18n","url","post","setPost","notFound","setNotFound","isHe","language","startsWith","dir","lang","lng","concat","then","m","_m$default$blogs","_m$default","raw","default","blogs","arr","Array","isArray","Object","values","normalized","map","b","content","join","found","find","catch","html","__html","className","children","httpEquiv","to","title","name","short","rel","href","img","src","alt","dangerouslySetInnerHTML"],"sources":["C:/Users/yulit/skyz-web-react-he/src/components/BlogPost.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst BlogPost = () => {\r\n  const { i18n } = useTranslation();\r\n  const { url } = useParams();\r\n  const [post, setPost] = useState(null);\r\n  const [notFound, setNotFound] = useState(false);\r\n\r\n  const isHe = i18n.language?.startsWith(\"he\");\r\n  const dir = isHe ? \"rtl\" : \"ltr\";\r\n  const lang = isHe ? \"he\" : \"en\";\r\n\r\n  useEffect(() => {\r\n    const lng = isHe ? \"he\" : \"en\";\r\n    import(`../data/blogs.${lng}.json`)\r\n      .then((m) => {\r\n        const raw = m.default?.blogs ?? [];\r\n        const arr = Array.isArray(raw) ? raw : Object.values(raw);\r\n        const normalized = arr.map((b) => ({\r\n          ...b,\r\n          content: Array.isArray(b.content) ? b.content.join(\"\") : b.content,\r\n        }));\r\n        const found = normalized.find((b) => b.url === url);\r\n        setPost(found || null);\r\n        setNotFound(!found);\r\n      })\r\n      .catch(() => setNotFound(true));\r\n  }, [isHe, url]);\r\n\r\n  const html = useMemo(() => ({ __html: post?.content || \"\" }), [post]);\r\n\r\n  if (notFound) {\r\n    return (\r\n      <section dir={dir} className=\"blog-post\">\r\n        {/* לא משנים את <html> ולא את התפריט */}\r\n        <Helmet>\r\n          <title>{isHe ? \"הפוסט לא נמצא\" : \"Post not found\"} | SkyzCRM</title>\r\n          <meta httpEquiv=\"content-language\" content={lang} />\r\n        </Helmet>\r\n        <h1>{isHe ? \"הפוסט לא נמצא\" : \"Post not found\"}</h1>\r\n        <p><Link to=\"/בלוג/\">{isHe ? \"חזרה לבלוג\" : \"Back to blog\"}</Link></p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (!post) {\r\n    return (\r\n      <section dir={dir} className=\"blog-post\">\r\n        <Helmet>\r\n          <meta httpEquiv=\"content-language\" content={lang} />\r\n        </Helmet>\r\n        <p>{isHe ? \"טוען…\" : \"Loading…\"}</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <section dir={dir} className=\"blog-post\">\r\n      {/* לא נוגעים ב-<html dir>; רק מטא/כותרת מקומית */}\r\n      <Helmet>\r\n        <title>{post.title} | SkyzCRM</title>\r\n        <meta name=\"description\" content={post.short || post.title} />\r\n        <meta httpEquiv=\"content-language\" content={lang} />\r\n        <link rel=\"canonical\" href={`/בלוג/${post.url}/`} />\r\n      </Helmet>\r\n\r\n      <h1>{post.title}</h1>\r\n\r\n      {post.img && (\r\n        <div className=\"img-container\">\r\n          <img className=\"blog-post-img\" src={post.img} alt={post.title} />\r\n        </div>\r\n      )}\r\n\r\n      <article className=\"content\" dangerouslySetInnerHTML={html} />\r\n\r\n      <p className=\"back-to-articles\">\r\n        <Link to=\"/בלוג/\">\r\n          {isHe ? \"← חזרה לכל המאמרים\" : \"← Back to all articles\"}\r\n        </Link>\r\n      </p>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BlogPost;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}