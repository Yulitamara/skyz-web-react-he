{"ast":null,"code":"import { isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban CRUD module\n */\nvar Crud = /** @class */function () {\n  /**\n   * Constructor for CRUD module\n   *\n   * @param {Kanban} parent Accepts the kanban instance\n   * @private\n   */\n  function Crud(parent) {\n    this.parent = parent;\n  }\n  Crud.prototype.addCard = function (cardData, index) {\n    var _this = this;\n    var args = {\n      cancel: false,\n      requestType: 'cardCreate',\n      addedRecords: cardData instanceof Array ? cardData : [cardData],\n      changedRecords: [],\n      deletedRecords: []\n    };\n    this.parent.trigger(events.actionBegin, args, function (addArgs) {\n      if (!addArgs.cancel) {\n        var modifiedData_1 = [];\n        if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n          if (cardData instanceof Array) {\n            modifiedData_1 = cardData;\n          } else {\n            modifiedData_1.push(cardData);\n          }\n          modifiedData_1.forEach(function (data, index) {\n            if (!data[_this.parent.sortSettings.field]) {\n              var columnData = _this.parent.getColumnData(data[_this.parent.keyField]);\n              if (_this.parent.sortSettings.direction === 'Ascending' && columnData.length > 0) {\n                data[_this.parent.sortSettings.field] = columnData[columnData.length - 1][_this.parent.sortSettings.field] + index + 1;\n              } else if (_this.parent.sortSettings.direction === 'Descending' && columnData.length > 0) {\n                data[_this.parent.sortSettings.field] = columnData[0][_this.parent.sortSettings.field] + index + 1;\n              }\n              if (columnData.length === 0) {\n                data[_this.parent.sortSettings.field] = 1;\n              }\n            }\n          });\n          if (!(cardData instanceof Array)) {\n            if (!index && _this.parent.sortSettings.direction === 'Descending') {\n              _this.parent.getColumnData(modifiedData_1[0][_this.parent.keyField]).filter(function (obj, count) {\n                if (obj[_this.parent.sortSettings.field] === modifiedData_1[0][_this.parent.sortSettings.field]) {\n                  index = count + 1;\n                }\n              });\n            }\n          }\n          if (index !== 0 && !index && _this.parent.sortSettings.direction === 'Descending') {\n            index = 0;\n          }\n          modifiedData_1 = _this.priorityOrder(modifiedData_1, index);\n        }\n        var addedRecords = cardData instanceof Array ? cardData : [cardData];\n        var changedRecords = _this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index' ? modifiedData_1 : [];\n        var editParms = {\n          addedRecords: addedRecords,\n          changedRecords: changedRecords,\n          deletedRecords: []\n        };\n        var type = cardData instanceof Array || modifiedData_1.length > 0 ? 'batch' : 'insert';\n        _this.parent.dataModule.updateDataManager(type, editParms, 'cardCreated', cardData, index);\n      }\n    });\n  };\n  Crud.prototype.getIndexFromData = function (data) {\n    var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + data[this.parent.cardSettings.headerField] + \"\\\"]\");\n    var element = closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS);\n    var index = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS)).indexOf(cardElement);\n    return index;\n  };\n  Crud.prototype.updateCard = function (cardData, index) {\n    var _this = this;\n    var args = {\n      requestType: 'cardChange',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: cardData instanceof Array ? cardData : [cardData],\n      deletedRecords: []\n    };\n    index = isNullOrUndefined(index) ? this.getIndexFromData(args.changedRecords[0]) : index;\n    this.parent.trigger(events.actionBegin, args, function (updateArgs) {\n      if (!updateArgs.cancel) {\n        if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n          var modifiedData = [];\n          if (cardData instanceof Array) {\n            modifiedData = cardData;\n          } else {\n            modifiedData.push(cardData);\n          }\n          cardData = _this.priorityOrder(modifiedData, index);\n        }\n        var editParms = {\n          addedRecords: [],\n          changedRecords: cardData instanceof Array ? cardData : [cardData],\n          deletedRecords: []\n        };\n        var type = cardData instanceof Array ? 'batch' : 'update';\n        _this.parent.dataModule.updateDataManager(type, editParms, 'cardChanged', cardData, index);\n      }\n    });\n  };\n  Crud.prototype.deleteCard = function (cardData) {\n    var _this = this;\n    var editParms = {\n      addedRecords: [],\n      changedRecords: [],\n      deletedRecords: []\n    };\n    if (typeof cardData === 'string' || typeof cardData === 'number') {\n      editParms.deletedRecords = this.parent.kanbanData.filter(function (data) {\n        return data[_this.parent.cardSettings.headerField] === cardData;\n      });\n    } else {\n      editParms.deletedRecords = cardData instanceof Array ? cardData : [cardData];\n    }\n    var args = {\n      requestType: 'cardRemove',\n      cancel: false,\n      addedRecords: [],\n      changedRecords: [],\n      deletedRecords: editParms.deletedRecords\n    };\n    this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n      if (!deleteArgs.cancel) {\n        var type = editParms.deletedRecords.length > 1 ? 'batch' : 'delete';\n        var cardData_1 = editParms.deletedRecords;\n        _this.parent.dataModule.updateDataManager(type, editParms, 'cardRemoved', cardData_1[0]);\n      }\n    });\n  };\n  Crud.prototype.priorityOrder = function (cardData, cardIndex) {\n    var _this = this;\n    var cardsId = cardData.map(function (obj) {\n      return obj[_this.parent.cardSettings.headerField];\n    });\n    var num = cardData[cardData.length - 1][this.parent.sortSettings.field];\n    var allModifiedKeys = cardData.map(function (obj) {\n      return obj[_this.parent.keyField];\n    });\n    var modifiedKey = allModifiedKeys.filter(function (key, index) {\n      return allModifiedKeys.indexOf(key) === index;\n    }).sort();\n    var columnAllDatas;\n    var finalData = [];\n    var originalIndex = [];\n    var _loop_1 = function (columnKey) {\n      var keyData = cardData.filter(function (cardObj) {\n        return cardObj[_this.parent.keyField] === columnKey;\n      });\n      columnAllDatas = this_1.parent.layoutModule.getColumnData(columnKey);\n      for (var _i = 0, _a = keyData; _i < _a.length; _i++) {\n        var data = _a[_i];\n        if (this_1.parent.swimlaneSettings.keyField) {\n          var swimlaneDatas = this_1.parent.getSwimlaneData(data[this_1.parent.swimlaneSettings.keyField]);\n          columnAllDatas = this_1.parent.getColumnData(columnKey, swimlaneDatas);\n        }\n      }\n      keyData.forEach(function (key) {\n        return finalData.push(key);\n      });\n      if (!isNullOrUndefined(cardIndex)) {\n        var _loop_2 = function (j) {\n          columnAllDatas.filter(function (data, index) {\n            if (data[_this.parent.cardSettings.headerField] === cardsId[j] && index <= cardIndex) {\n              originalIndex.push(index);\n            }\n          });\n        };\n        for (var j = 0; j < cardsId.length; j++) {\n          _loop_2(j);\n        }\n        if (originalIndex.length > 0) {\n          cardIndex = cardIndex + originalIndex.length;\n        }\n        if (this_1.parent.sortSettings.direction === 'Ascending') {\n          for (var i = cardIndex; i < columnAllDatas.length; i++) {\n            if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n              columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n              finalData.push(columnAllDatas[i]);\n            }\n          }\n        } else {\n          for (var i = cardIndex - 1; i >= 0; i--) {\n            if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n              columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n              finalData.push(columnAllDatas[i]);\n            }\n          }\n        }\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, modifiedKey_1 = modifiedKey; _i < modifiedKey_1.length; _i++) {\n      var columnKey = modifiedKey_1[_i];\n      _loop_1(columnKey);\n    }\n    return finalData;\n  };\n  return Crud;\n}();\nexport { Crud };","map":{"version":3,"names":["isNullOrUndefined","closest","events","cls","Crud","parent","prototype","addCard","cardData","index","_this","args","cancel","requestType","addedRecords","Array","changedRecords","deletedRecords","trigger","actionBegin","addArgs","modifiedData_1","sortSettings","field","sortBy","push","forEach","data","columnData","getColumnData","keyField","direction","length","filter","obj","count","priorityOrder","editParms","type","dataModule","updateDataManager","getIndexFromData","cardElement","element","querySelector","CARD_CLASS","cardSettings","headerField","CONTENT_CELLS_CLASS","slice","call","querySelectorAll","indexOf","updateCard","updateArgs","modifiedData","deleteCard","kanbanData","deleteArgs","cardData_1","cardIndex","cardsId","map","num","allModifiedKeys","modifiedKey","key","sort","columnAllDatas","finalData","originalIndex","_loop_1","columnKey","keyData","cardObj","this_1","layoutModule","_i","_a","swimlaneSettings","swimlaneDatas","getSwimlaneData","_loop_2","j","i","modifiedKey_1"],"sources":["C:/skyz-web-react-he/node_modules/@syncfusion/ej2-kanban/src/kanban/actions/crud.js"],"sourcesContent":["import { isNullOrUndefined, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban CRUD module\n */\nvar Crud = /** @class */ (function () {\n    /**\n     * Constructor for CRUD module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Crud(parent) {\n        this.parent = parent;\n    }\n    Crud.prototype.addCard = function (cardData, index) {\n        var _this = this;\n        var args = {\n            cancel: false, requestType: 'cardCreate', addedRecords: (cardData instanceof Array) ? cardData : [cardData],\n            changedRecords: [], deletedRecords: []\n        };\n        this.parent.trigger(events.actionBegin, args, function (addArgs) {\n            if (!addArgs.cancel) {\n                var modifiedData_1 = [];\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    if (cardData instanceof Array) {\n                        modifiedData_1 = cardData;\n                    }\n                    else {\n                        modifiedData_1.push(cardData);\n                    }\n                    modifiedData_1.forEach(function (data, index) {\n                        if (!data[_this.parent.sortSettings.field]) {\n                            var columnData = _this.parent.getColumnData(data[_this.parent.keyField]);\n                            if (_this.parent.sortSettings.direction === 'Ascending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] = (columnData[columnData.length - 1][_this.parent.sortSettings.field]) + index + 1;\n                            }\n                            else if (_this.parent.sortSettings.direction === 'Descending' && columnData.length > 0) {\n                                data[_this.parent.sortSettings.field] = columnData[0][_this.parent.sortSettings.field] + index + 1;\n                            }\n                            if (columnData.length === 0) {\n                                data[_this.parent.sortSettings.field] = 1;\n                            }\n                        }\n                    });\n                    if (!(cardData instanceof Array)) {\n                        if (!index && _this.parent.sortSettings.direction === 'Descending') {\n                            _this.parent.getColumnData(modifiedData_1[0][_this.parent.keyField]).filter(function (obj, count) {\n                                if (obj[_this.parent.sortSettings.field] === modifiedData_1[0][_this.parent.sortSettings.field]) {\n                                    index = count + 1;\n                                }\n                            });\n                        }\n                    }\n                    if (index !== 0 && !index && _this.parent.sortSettings.direction === 'Descending') {\n                        index = 0;\n                    }\n                    modifiedData_1 = _this.priorityOrder(modifiedData_1, index);\n                }\n                var addedRecords = (cardData instanceof Array) ? cardData : [cardData];\n                var changedRecords = (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') ? modifiedData_1 : [];\n                var editParms = { addedRecords: addedRecords, changedRecords: changedRecords, deletedRecords: [] };\n                var type = (cardData instanceof Array || modifiedData_1.length > 0) ? 'batch' : 'insert';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardCreated', cardData, index);\n            }\n        });\n    };\n    Crud.prototype.getIndexFromData = function (data) {\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + data[this.parent.cardSettings.headerField] + \"\\\"]\");\n        var element = closest(cardElement, '.' + cls.CONTENT_CELLS_CLASS);\n        var index = [].slice.call(element.querySelectorAll('.' + cls.CARD_CLASS)).indexOf(cardElement);\n        return index;\n    };\n    Crud.prototype.updateCard = function (cardData, index) {\n        var _this = this;\n        var args = {\n            requestType: 'cardChange', cancel: false, addedRecords: [],\n            changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n        };\n        index = isNullOrUndefined(index) ? this.getIndexFromData(args.changedRecords[0]) : index;\n        this.parent.trigger(events.actionBegin, args, function (updateArgs) {\n            if (!updateArgs.cancel) {\n                if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === 'Index') {\n                    var modifiedData = [];\n                    if (cardData instanceof Array) {\n                        modifiedData = cardData;\n                    }\n                    else {\n                        modifiedData.push(cardData);\n                    }\n                    cardData = _this.priorityOrder(modifiedData, index);\n                }\n                var editParms = {\n                    addedRecords: [], changedRecords: (cardData instanceof Array) ? cardData : [cardData], deletedRecords: []\n                };\n                var type = (cardData instanceof Array) ? 'batch' : 'update';\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardChanged', cardData, index);\n            }\n        });\n    };\n    Crud.prototype.deleteCard = function (cardData) {\n        var _this = this;\n        var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n        if (typeof cardData === 'string' || typeof cardData === 'number') {\n            editParms.deletedRecords = this.parent.kanbanData.filter(function (data) {\n                return data[_this.parent.cardSettings.headerField] === cardData;\n            });\n        }\n        else {\n            editParms.deletedRecords = (cardData instanceof Array) ? cardData : [cardData];\n        }\n        var args = {\n            requestType: 'cardRemove', cancel: false, addedRecords: [], changedRecords: [], deletedRecords: editParms.deletedRecords\n        };\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var type = (editParms.deletedRecords.length > 1) ? 'batch' : 'delete';\n                var cardData_1 = editParms.deletedRecords;\n                _this.parent.dataModule.updateDataManager(type, editParms, 'cardRemoved', cardData_1[0]);\n            }\n        });\n    };\n    Crud.prototype.priorityOrder = function (cardData, cardIndex) {\n        var _this = this;\n        var cardsId = cardData.map(function (obj) { return obj[_this.parent.cardSettings.headerField]; });\n        var num = cardData[cardData.length - 1][this.parent.sortSettings.field];\n        var allModifiedKeys = cardData.map(function (obj) { return obj[_this.parent.keyField]; });\n        var modifiedKey = allModifiedKeys.filter(function (key, index) { return allModifiedKeys.indexOf(key) === index; }).sort();\n        var columnAllDatas;\n        var finalData = [];\n        var originalIndex = [];\n        var _loop_1 = function (columnKey) {\n            var keyData = cardData.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnKey;\n            });\n            columnAllDatas = this_1.parent.layoutModule.getColumnData(columnKey);\n            for (var _i = 0, _a = keyData; _i < _a.length; _i++) {\n                var data = _a[_i];\n                if (this_1.parent.swimlaneSettings.keyField) {\n                    var swimlaneDatas = this_1.parent.getSwimlaneData(data[this_1.parent.swimlaneSettings.keyField]);\n                    columnAllDatas = this_1.parent.getColumnData(columnKey, swimlaneDatas);\n                }\n            }\n            keyData.forEach(function (key) { return finalData.push(key); });\n            if (!isNullOrUndefined(cardIndex)) {\n                var _loop_2 = function (j) {\n                    columnAllDatas.filter(function (data, index) {\n                        if (data[_this.parent.cardSettings.headerField] === cardsId[j] && index <= cardIndex) {\n                            originalIndex.push(index);\n                        }\n                    });\n                };\n                for (var j = 0; j < cardsId.length; j++) {\n                    _loop_2(j);\n                }\n                if (originalIndex.length > 0) {\n                    cardIndex = cardIndex + originalIndex.length;\n                }\n                if (this_1.parent.sortSettings.direction === 'Ascending') {\n                    for (var i = cardIndex; i < columnAllDatas.length; i++) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n                else {\n                    for (var i = cardIndex - 1; i >= 0; i--) {\n                        if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {\n                            columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;\n                            finalData.push(columnAllDatas[i]);\n                        }\n                    }\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, modifiedKey_1 = modifiedKey; _i < modifiedKey_1.length; _i++) {\n            var columnKey = modifiedKey_1[_i];\n            _loop_1(columnKey);\n        }\n        return finalData;\n    };\n    return Crud;\n}());\nexport { Crud };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}