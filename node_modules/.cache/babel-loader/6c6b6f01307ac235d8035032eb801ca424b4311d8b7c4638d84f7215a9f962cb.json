{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\nvar Action = /** @class */function () {\n  /**\n   * Constructor for action module\n   *\n   * @param {Kanban} parent Accepts the kanban instance\n   * @private\n   */\n  function Action(parent) {\n    this.parent = parent;\n    this.columnToggleArray = [];\n    this.selectionArray = [];\n    this.lastCardSelection = null;\n    this.lastSelectionRow = null;\n    this.lastCard = null;\n    this.selectedCardsElement = [];\n    this.selectedCardsData = [];\n    this.hideColumnKeys = [];\n  }\n  Action.prototype.clickHandler = function (e) {\n    var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' + cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS + ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n    var target = closest(e.target, elementSelector);\n    if (!target) {\n      return;\n    }\n    if (target.classList.contains(cls.CARD_CLASS)) {\n      if (this.parent.allowKeyboard) {\n        this.parent.keyboardModule.cardTabIndexRemove();\n      }\n      this.cardClick(e);\n    } else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n      this.columnExpandCollapse(e);\n    } else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n      this.rowExpandCollapse(e);\n    } else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n      this.addButtonClick(target);\n    } else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n      var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n      this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n      var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n      if (isCollapsed) {\n        classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n      } else {\n        classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n      }\n    }\n  };\n  Action.prototype.addButtonClick = function (target) {\n    var _this = this;\n    var newData = {};\n    if (this.parent.kanbanData.length === 0) {\n      newData[this.parent.cardSettings.headerField] = 1;\n    } else if (typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField] === 'number') {\n      var id = this.parent.kanbanData.map(function (obj) {\n        return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n      });\n      newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n    }\n    newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n    if (this.parent.sortSettings.sortBy === 'Index') {\n      newData[this.parent.sortSettings.field] = 1;\n      if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n        var card = this.parent.sortSettings.direction === 'Ascending' ? target.nextElementSibling.lastElementChild : target.nextElementSibling.firstElementChild;\n        var data = this.parent.getCardDetails(card);\n        newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n      }\n    }\n    if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField && closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n      newData[this.parent.swimlaneSettings.keyField] = closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n    }\n    this.parent.openDialog('Add', newData);\n  };\n  Action.prototype.doubleClickHandler = function (e) {\n    var target = closest(e.target, '.' + cls.CARD_CLASS);\n    if (target) {\n      this.cardDoubleClick(e);\n    }\n  };\n  Action.prototype.cardClick = function (e, selectedCard) {\n    var _this = this;\n    var target = closest(selectedCard ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n    var cardClickObj = this.parent.getCardDetails(target);\n    if (cardClickObj) {\n      this.parent.activeCardData = {\n        data: cardClickObj,\n        element: target\n      };\n      var args = {\n        data: cardClickObj,\n        element: target,\n        cancel: false,\n        event: e\n      };\n      this.parent.trigger(events.cardClick, args, function (clickArgs) {\n        if (!clickArgs.cancel) {\n          if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n            removeClass([target], cls.CARD_SELECTION_CLASS);\n            _this.parent.layoutModule.disableAttributeSelection(target);\n          } else {\n            var isCtrlKey = e.ctrlKey;\n            if (_this.parent.isAdaptive && _this.parent.touchModule) {\n              isCtrlKey = _this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold || isCtrlKey;\n            }\n            _this.cardSelection(target, isCtrlKey, e.shiftKey);\n          }\n          if (_this.parent.isAdaptive && _this.parent.touchModule) {\n            _this.parent.touchModule.updatePopupContent();\n          }\n          var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n          if (_this.parent.allowKeyboard) {\n            var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n            element.forEach(function (e) {\n              e.setAttribute('tabindex', '0');\n            });\n            _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n          }\n        }\n      });\n    }\n  };\n  Action.prototype.cardDoubleClick = function (e) {\n    var _this = this;\n    var target = closest(e.target, '.' + cls.CARD_CLASS);\n    var cardDoubleClickObj = this.parent.getCardDetails(target);\n    this.parent.activeCardData = {\n      data: cardDoubleClickObj,\n      element: target\n    };\n    this.cardSelection(target, false, false);\n    var args = {\n      data: cardDoubleClickObj,\n      element: target,\n      cancel: false,\n      event: e\n    };\n    this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n      if (!doubleClickArgs.cancel) {\n        _this.parent.dialogModule.openDialog('Edit', args.data);\n      }\n    });\n  };\n  Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n    var _this = this;\n    var headerTarget = e instanceof HTMLElement ? e : e.target;\n    var currentSwimlaneHeader = !isNullOrUndefined(isFrozenElem) ? isFrozenElem : headerTarget;\n    var args = {\n      cancel: false,\n      target: headerTarget,\n      requestType: 'rowExpandCollapse'\n    };\n    this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n        var key = target.getAttribute('data-key');\n        var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n        var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n        var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n        var tabIndex_1;\n        if (isCollapsed) {\n          removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n          classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n          _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n          tabIndex_1 = '0';\n        } else {\n          addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n          classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n          _this.parent.swimlaneToggleArray.push(key);\n          tabIndex_1 = '-1';\n        }\n        targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n        target.setAttribute('aria-expanded', isCollapsed.toString());\n        tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n        var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n        rows.forEach(function (cell) {\n          cell.setAttribute('tabindex', tabIndex_1);\n        });\n        _this.parent.notify(events.contentReady, {});\n        _this.parent.trigger(events.actionComplete, {\n          target: headerTarget,\n          requestType: 'rowExpandCollapse'\n        });\n      }\n    });\n  };\n  Action.prototype.columnExpandCollapse = function (e) {\n    var _this = this;\n    var headerTarget = e instanceof HTMLElement ? e : e.target;\n    var args = {\n      cancel: false,\n      target: headerTarget,\n      requestType: 'columnExpandCollapse'\n    };\n    this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n      if (!actionArgs.cancel) {\n        var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n        var colIndex = target.cellIndex;\n        _this.columnToggle(target);\n        var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n        if (collapsed === _this.parent.columns.length - _this.hideColumnKeys.length) {\n          var index = colIndex + 1 === collapsed ? 1 : colIndex + 2;\n          var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n          var nextCol = _this.parent.element.querySelector(headerSelector);\n          addClass([nextCol], cls.COLLAPSED_CLASS);\n          _this.columnToggle(nextCol);\n        }\n        _this.parent.notify(events.contentReady, {});\n        _this.parent.trigger(events.actionComplete, {\n          target: headerTarget,\n          requestType: 'columnExpandCollapse'\n        });\n      }\n    });\n  };\n  Action.prototype.columnToggle = function (target) {\n    var _this = this;\n    var colIndex = target.cellIndex;\n    var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n    var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n    var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n    var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n    var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n    if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n      removeClass(colGroup, cls.COLLAPSED_CLASS);\n      if (this.parent.isAdaptive) {\n        colGroup.forEach(function (col) {\n          return col.style.width = formatUnit(_this.parent.layoutModule.getWidth());\n        });\n      }\n      classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n      var _loop_1 = function (row) {\n        var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n        removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n        remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n        target.setAttribute('aria-expanded', 'true');\n        targetCol.setAttribute('aria-expanded', 'true');\n        var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n        collapsedCell.forEach(function (cell) {\n          var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n          collapasedText.style.height = 'auto';\n          if (collapasedText && targetCol.getBoundingClientRect().height < collapasedText.getBoundingClientRect().height + 10) {\n            collapasedText.style.height = targetCol.getBoundingClientRect().height - 4 + 'px';\n          }\n        });\n      };\n      for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n        var row = targetRow_1[_i];\n        _loop_1(row);\n      }\n      this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n      this.parent.columns[colIndex].setProperties({\n        isExpanded: true\n      }, true);\n      target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n    } else {\n      addClass(colGroup, cls.COLLAPSED_CLASS);\n      if (this.parent.isAdaptive) {\n        colGroup.forEach(function (col) {\n          return col.style.width = formatUnit(events.toggleWidth);\n        });\n      }\n      classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n      var key = target.getAttribute('data-key');\n      var _loop_2 = function (row) {\n        var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n        var index = targetCol.cellIndex;\n        var text = (this_1.parent.columns[index].showItemCount ? '[' + targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n        targetCol.appendChild(createElement('div', {\n          className: cls.COLLAPSE_HEADER_TEXT_CLASS,\n          innerHTML: text\n        }));\n        addClass([targetCol, target], cls.COLLAPSED_CLASS);\n        target.setAttribute('aria-expanded', 'false');\n        targetCol.setAttribute('aria-expanded', 'false');\n        var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n        collapsedCell.forEach(function (cell) {\n          var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n          if (collapasedText && targetCol.getBoundingClientRect().height < collapasedText.getBoundingClientRect().height + 10) {\n            collapasedText.style.height = targetCol.getBoundingClientRect().height - 4 + 'px';\n          }\n        });\n      };\n      var this_1 = this;\n      for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n        var row = targetRow_2[_a];\n        _loop_2(row);\n      }\n      this.columnToggleArray.push(target.getAttribute('data-key'));\n      this.parent.columns[colIndex].setProperties({\n        isExpanded: false\n      }, true);\n      target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n    }\n  };\n  Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n    var _this = this;\n    if (!target) {\n      return;\n    }\n    var cards = this.parent.getSelectedCards();\n    if (this.parent.cardSettings.selectionType !== 'None') {\n      var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n      var index = !isNullOrUndefined(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n      if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n        return;\n      }\n      if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.parent.layoutModule.disableAttributeSelection(cards);\n        cards.forEach(function (el) {\n          _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n          _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n          _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n        });\n      }\n      if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n        var curCards_1 = [];\n        var start = void 0;\n        var end = void 0;\n        var i = void 0;\n        var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n        allCards.forEach(function (el) {\n          return curCards_1.push(el.getAttribute('data-id'));\n        });\n        var curId = target.getAttribute('data-id');\n        var lastId = this.lastCard.getAttribute('data-id');\n        var curIndex = end = curCards_1.indexOf(curId);\n        var lastIndex = start = curCards_1.indexOf(lastId);\n        var select = curIndex > lastIndex ? 'next' : 'prev';\n        if (select === 'prev') {\n          start = curIndex;\n          end = lastIndex;\n        }\n        for (i = start; i <= end; i++) {\n          var card = allCards[i];\n          addClass([card], cls.CARD_SELECTION_CLASS);\n          card.setAttribute('aria-selected', 'true');\n          card.setAttribute('tabindex', '0');\n          this.selectionArray.push(card.getAttribute('data-id'));\n          this.selectedCardsElement.push(card);\n          this.selectedCardsData.push(this.parent.getCardDetails(card));\n          this.lastCardSelection = card;\n          if (select === 'prev') {\n            this.lastCardSelection = allCards[start];\n          }\n        }\n      } else {\n        addClass([target], cls.CARD_SELECTION_CLASS);\n        target.setAttribute('aria-selected', 'true');\n        target.setAttribute('tabindex', '0');\n        this.selectionArray.push(target.getAttribute('data-id'));\n        this.selectedCardsElement.push(target);\n        this.selectedCardsData.push(this.parent.getCardDetails(target));\n        this.lastCard = this.lastCardSelection = target;\n        this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n        if (this.lastSelectionRow.previousElementSibling) {\n          var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n          var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n          if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n            this.rowExpandCollapse(parentEle);\n          }\n        }\n      }\n    }\n  };\n  Action.prototype.addColumn = function (columnOptions, index) {\n    var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n    this.parent.columns.splice(index, 0, addColumn);\n    this.parent.notify(events.dataReady, {\n      processedData: this.parent.kanbanData\n    });\n  };\n  Action.prototype.deleteColumn = function (index) {\n    var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n    if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n      this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n    }\n    this.parent.columns.splice(index, 1);\n    if (this.parent.columns.length === 0) {\n      detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n      detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n    } else {\n      this.parent.notify(events.dataReady, {\n        processedData: this.parent.kanbanData\n      });\n    }\n  };\n  Action.prototype.showColumn = function (key) {\n    var index = this.hideColumnKeys.indexOf(key.toString());\n    if (index !== -1) {\n      this.hideColumnKeys.splice(index, 1);\n      this.parent.notify(events.dataReady, {\n        processedData: this.parent.kanbanData\n      });\n    }\n  };\n  Action.prototype.hideColumn = function (key) {\n    this.hideColumnKeys.push(key.toString());\n    this.parent.notify(events.dataReady, {\n      processedData: this.parent.kanbanData\n    });\n  };\n  /**\n   * Maintain the single card selection\n   *\n   * @param {Record<string, any>} data - Specifies the selected card data.\n   * @returns {void}\n   * @private\n   * @hidden\n   */\n  Action.prototype.SingleCardSelection = function (data) {\n    if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n      var card = this.parent.element.querySelector('.e-card[data-id=\\\"' + data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n      if (card) {\n        addClass([card], cls.CARD_SELECTION_CLASS);\n        card.setAttribute('aria-selected', 'true');\n        card.setAttribute('tabindex', '0');\n      }\n    }\n  };\n  return Action;\n}();\nexport { Action };","map":{"version":3,"names":["closest","classList","createElement","remove","addClass","removeClass","isNullOrUndefined","formatUnit","createInstance","detach","Columns","events","cls","Action","parent","columnToggleArray","selectionArray","lastCardSelection","lastSelectionRow","lastCard","selectedCardsElement","selectedCardsData","hideColumnKeys","prototype","clickHandler","e","elementSelector","CARD_CLASS","HEADER_ICON_CLASS","CONTENT_ROW_CLASS","SWIMLANE_ROW_CLASS","SHOW_ADD_BUTTON","FROZEN_SWIMLANE_ROW_CLASS","CONTENT_CELLS_CLASS","target","contains","allowKeyboard","keyboardModule","cardTabIndexRemove","cardClick","columnExpandCollapse","rowExpandCollapse","addButtonClick","swimlaneRows","slice","call","element","querySelectorAll","targetIcon","layoutModule","frozenSwimlaneRow","querySelector","ICON_CLASS","frozenOrder","isCollapsed","SWIMLANE_ROW_COLLAPSE_CLASS","SWIMLANE_ROW_EXPAND_CLASS","_this","newData","kanbanData","length","cardSettings","headerField","id","map","obj","parseInt","Math","max","apply","keyField","getAttribute","sortSettings","sortBy","field","card","direction","nextElementSibling","lastElementChild","firstElementChild","data","getCardDetails","swimlaneSettings","previousElementSibling","openDialog","doubleClickHandler","cardDoubleClick","selectedCard","cardClickObj","activeCardData","args","cancel","event","trigger","clickArgs","CARD_SELECTION_CLASS","type","disableAttributeSelection","isCtrlKey","ctrlKey","isAdaptive","touchModule","mobilePopup","tabHold","cardSelection","shiftKey","updatePopupContent","cell","forEach","setAttribute","addRemoveTabIndex","cardDoubleClickObj","doubleClickArgs","dialogModule","isFrozenElem","headerTarget","HTMLElement","currentSwimlaneHeader","requestType","actionBegin","actionArgs","key","tgtRow","rowIndex","COLLAPSED_CLASS","tabIndex_1","swimlaneToggleArray","splice","indexOf","push","toString","rows","notify","contentReady","actionComplete","HEADER_CELLS_CLASS","colIndex","cellIndex","columnToggle","collapsed","columns","index","headerSelector","STACKED_HEADER_CELL_CLASS","nextCol","targetRow","colSelector","TABLE_CLASS","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","colGroup","col","style","width","getWidth","_loop_1","row","targetCol","COLLAPSE_HEADER_TEXT_CLASS","collapsedCell","parentElement","collapasedText","height","getBoundingClientRect","_i","targetRow_1","setProperties","isExpanded","toggleWidth","_loop_2","text","this_1","showItemCount","headerText","appendChild","className","innerHTML","_a","targetRow_2","isCtrl","isShift","cards","getSelectedCards","selectionType","contentRow","el","curCards_1","start","end","i","allCards","curId","lastId","curIndex","lastIndex","select","parentEle","addColumn","columnOptions","dataReady","processedData","deleteColumn","listKey","item","HEADER_ROW_TOGGLE_CLASS","HEADER_CLASS","CONTENT_CLASS","showColumn","hideColumn","SingleCardSelection"],"sources":["C:/skyz-web-react-he/node_modules/@syncfusion/ej2-kanban/src/kanban/actions/action.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, classList, createElement, remove, addClass, removeClass, isNullOrUndefined, formatUnit, createInstance, detach } from '@syncfusion/ej2-base';\nimport { Columns } from '../models/columns';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Action module is used to perform card actions.\n */\nvar Action = /** @class */ (function () {\n    /**\n     * Constructor for action module\n     *\n     * @param {Kanban} parent Accepts the kanban instance\n     * @private\n     */\n    function Action(parent) {\n        this.parent = parent;\n        this.columnToggleArray = [];\n        this.selectionArray = [];\n        this.lastCardSelection = null;\n        this.lastSelectionRow = null;\n        this.lastCard = null;\n        this.selectedCardsElement = [];\n        this.selectedCardsData = [];\n        this.hideColumnKeys = [];\n    }\n    Action.prototype.clickHandler = function (e) {\n        var elementSelector = '.' + cls.CARD_CLASS + ',.' + cls.HEADER_ICON_CLASS + ',.' + cls.CONTENT_ROW_CLASS + '.' +\n            cls.SWIMLANE_ROW_CLASS + ',.' + cls.SHOW_ADD_BUTTON + ',.' + cls.FROZEN_SWIMLANE_ROW_CLASS + ',.' + cls.CONTENT_ROW_CLASS +\n            ':not(.' + cls.SWIMLANE_ROW_CLASS + ') .' + cls.CONTENT_CELLS_CLASS;\n        var target = closest(e.target, elementSelector);\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.CARD_CLASS)) {\n            if (this.parent.allowKeyboard) {\n                this.parent.keyboardModule.cardTabIndexRemove();\n            }\n            this.cardClick(e);\n        }\n        else if (target.classList.contains(cls.HEADER_ICON_CLASS)) {\n            this.columnExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.CONTENT_ROW_CLASS) && target.classList.contains(cls.SWIMLANE_ROW_CLASS)) {\n            this.rowExpandCollapse(e);\n        }\n        else if (target.classList.contains(cls.SHOW_ADD_BUTTON)) {\n            this.addButtonClick(target);\n        }\n        else if (target.classList.contains(cls.FROZEN_SWIMLANE_ROW_CLASS)) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector('.' + cls.ICON_CLASS);\n            this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);\n            var isCollapsed = targetIcon.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;\n            if (isCollapsed) {\n                classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n            }\n            else {\n                classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n            }\n        }\n    };\n    Action.prototype.addButtonClick = function (target) {\n        var _this = this;\n        var newData = {};\n        if (this.parent.kanbanData.length === 0) {\n            newData[this.parent.cardSettings.headerField] = 1;\n        }\n        else if (typeof (this.parent.kanbanData[0])[this.parent.cardSettings.headerField] === 'number') {\n            var id = this.parent.kanbanData.map(function (obj) {\n                return parseInt(obj[_this.parent.cardSettings.headerField], 10);\n            });\n            newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;\n        }\n        newData[this.parent.keyField] = closest(target, '.' + cls.CONTENT_CELLS_CLASS).getAttribute('data-key');\n        if (this.parent.sortSettings.sortBy === 'Index') {\n            newData[this.parent.sortSettings.field] = 1;\n            if (closest(target, '.' + cls.CONTENT_CELLS_CLASS).querySelector('.' + cls.CARD_CLASS)) {\n                var card = this.parent.sortSettings.direction === 'Ascending' ?\n                    target.nextElementSibling.lastElementChild : target.nextElementSibling.firstElementChild;\n                var data = this.parent.getCardDetails(card);\n                newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;\n            }\n        }\n        if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField &&\n            closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling) {\n            newData[this.parent.swimlaneSettings.keyField] =\n                closest(target, '.' + cls.CONTENT_ROW_CLASS).previousElementSibling.getAttribute('data-key');\n        }\n        this.parent.openDialog('Add', newData);\n    };\n    Action.prototype.doubleClickHandler = function (e) {\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        if (target) {\n            this.cardDoubleClick(e);\n        }\n    };\n    Action.prototype.cardClick = function (e, selectedCard) {\n        var _this = this;\n        var target = closest((selectedCard) ? selectedCard : e.target, '.' + cls.CARD_CLASS);\n        var cardClickObj = this.parent.getCardDetails(target);\n        if (cardClickObj) {\n            this.parent.activeCardData = { data: cardClickObj, element: target };\n            var args = { data: cardClickObj, element: target, cancel: false, event: e };\n            this.parent.trigger(events.cardClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (target.classList.contains(cls.CARD_SELECTION_CLASS) && e.type === 'click') {\n                        removeClass([target], cls.CARD_SELECTION_CLASS);\n                        _this.parent.layoutModule.disableAttributeSelection(target);\n                    }\n                    else {\n                        var isCtrlKey = e.ctrlKey;\n                        if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                            isCtrlKey = (_this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold) || isCtrlKey;\n                        }\n                        _this.cardSelection(target, isCtrlKey, e.shiftKey);\n                    }\n                    if (_this.parent.isAdaptive && _this.parent.touchModule) {\n                        _this.parent.touchModule.updatePopupContent();\n                    }\n                    var cell = closest(target, '.' + cls.CONTENT_CELLS_CLASS);\n                    if (_this.parent.allowKeyboard) {\n                        var element = [].slice.call(cell.querySelectorAll('.' + cls.CARD_CLASS));\n                        element.forEach(function (e) { e.setAttribute('tabindex', '0'); });\n                        _this.parent.keyboardModule.addRemoveTabIndex('Remove');\n                    }\n                }\n            });\n        }\n    };\n    Action.prototype.cardDoubleClick = function (e) {\n        var _this = this;\n        var target = closest(e.target, '.' + cls.CARD_CLASS);\n        var cardDoubleClickObj = this.parent.getCardDetails(target);\n        this.parent.activeCardData = { data: cardDoubleClickObj, element: target };\n        this.cardSelection(target, false, false);\n        var args = { data: cardDoubleClickObj, element: target, cancel: false, event: e };\n        this.parent.trigger(events.cardDoubleClick, args, function (doubleClickArgs) {\n            if (!doubleClickArgs.cancel) {\n                _this.parent.dialogModule.openDialog('Edit', args.data);\n            }\n        });\n    };\n    Action.prototype.rowExpandCollapse = function (e, isFrozenElem) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var currentSwimlaneHeader = !isNullOrUndefined(isFrozenElem) ? isFrozenElem : headerTarget;\n        var args = { cancel: false, target: headerTarget, requestType: 'rowExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(currentSwimlaneHeader, '.' + cls.SWIMLANE_ROW_CLASS);\n                var key = target.getAttribute('data-key');\n                var tgtRow = _this.parent.element.querySelector('.' + cls.CONTENT_ROW_CLASS + (\":nth-child(\" + (target.rowIndex + 2) + \")\"));\n                var targetIcon = target.querySelector(\".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS);\n                var isCollapsed = target.classList.contains(cls.COLLAPSED_CLASS) ? true : false;\n                var tabIndex_1;\n                if (isCollapsed) {\n                    removeClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_EXPAND_CLASS], [cls.SWIMLANE_ROW_COLLAPSE_CLASS]);\n                    _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);\n                    tabIndex_1 = '0';\n                }\n                else {\n                    addClass([tgtRow, target], cls.COLLAPSED_CLASS);\n                    classList(targetIcon, [cls.SWIMLANE_ROW_COLLAPSE_CLASS], [cls.SWIMLANE_ROW_EXPAND_CLASS]);\n                    _this.parent.swimlaneToggleArray.push(key);\n                    tabIndex_1 = '-1';\n                }\n                targetIcon.setAttribute('aria-label', isCollapsed ? key + ' Expand' : key + ' Collapse');\n                target.setAttribute('aria-expanded', isCollapsed.toString());\n                tgtRow.setAttribute('aria-expanded', isCollapsed.toString());\n                var rows = [].slice.call(tgtRow.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n                rows.forEach(function (cell) { cell.setAttribute('tabindex', tabIndex_1); });\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'rowExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnExpandCollapse = function (e) {\n        var _this = this;\n        var headerTarget = (e instanceof HTMLElement) ? e : e.target;\n        var args = { cancel: false, target: headerTarget, requestType: 'columnExpandCollapse' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var target = closest(headerTarget, '.' + cls.HEADER_CELLS_CLASS);\n                var colIndex = target.cellIndex;\n                _this.columnToggle(target);\n                var collapsed = _this.parent.element.querySelectorAll(\".\" + cls.HEADER_CELLS_CLASS + \".\" + cls.COLLAPSED_CLASS).length;\n                if (collapsed === (_this.parent.columns.length - _this.hideColumnKeys.length)) {\n                    var index = (colIndex + 1 === collapsed) ? 1 : colIndex + 2;\n                    var headerSelector = \".\" + cls.HEADER_CELLS_CLASS + \":not(.\" + cls.STACKED_HEADER_CELL_CLASS + \"):nth-child(\" + index + \")\";\n                    var nextCol = _this.parent.element.querySelector(headerSelector);\n                    addClass([nextCol], cls.COLLAPSED_CLASS);\n                    _this.columnToggle(nextCol);\n                }\n                _this.parent.notify(events.contentReady, {});\n                _this.parent.trigger(events.actionComplete, { target: headerTarget, requestType: 'columnExpandCollapse' });\n            }\n        });\n    };\n    Action.prototype.columnToggle = function (target) {\n        var _this = this;\n        var colIndex = target.cellIndex;\n        var elementSelector = \".\" + cls.CONTENT_ROW_CLASS + \":not(.\" + cls.SWIMLANE_ROW_CLASS + \")\";\n        var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        var colSelector = \".\" + cls.TABLE_CLASS + \" col:nth-child(\" + (colIndex + 1) + \")\";\n        var targetIcon = target.querySelector(\".\" + cls.COLUMN_EXPAND_CLASS + \",.\" + cls.COLUMN_COLLAPSE_CLASS);\n        var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));\n        if (target.classList.contains(cls.COLLAPSED_CLASS)) {\n            removeClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(_this.parent.layoutModule.getWidth()); });\n            }\n            classList(targetIcon, [cls.COLUMN_EXPAND_CLASS], [cls.COLUMN_COLLAPSE_CLASS]);\n            var _loop_1 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \":nth-child(\" + (colIndex + 1) + \")\");\n                removeClass([targetCol, target], cls.COLLAPSED_CLASS);\n                remove(targetCol.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS));\n                target.setAttribute('aria-expanded', 'true');\n                targetCol.setAttribute('aria-expanded', 'true');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    collapasedText.style.height = 'auto';\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {\n                var row = targetRow_1[_i];\n                _loop_1(row);\n            }\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute('data-key')), 1);\n            this.parent.columns[colIndex].setProperties({ isExpanded: true }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', target.getAttribute('data-key') + ' Expand');\n        }\n        else {\n            addClass(colGroup, cls.COLLAPSED_CLASS);\n            if (this.parent.isAdaptive) {\n                colGroup.forEach(function (col) { return col.style.width = formatUnit(events.toggleWidth); });\n            }\n            classList(targetIcon, [cls.COLUMN_COLLAPSE_CLASS], [cls.COLUMN_EXPAND_CLASS]);\n            var key = target.getAttribute('data-key');\n            var _loop_2 = function (row) {\n                var targetCol = row.querySelector(\".\" + cls.CONTENT_CELLS_CLASS + \"[data-key=\\\"\" + key + \"\\\"]\");\n                var index = targetCol.cellIndex;\n                var text = (this_1.parent.columns[index].showItemCount ? '[' +\n                    targetCol.querySelectorAll('.' + cls.CARD_CLASS).length + '] ' : '') + this_1.parent.columns[index].headerText;\n                targetCol.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                addClass([targetCol, target], cls.COLLAPSED_CLASS);\n                target.setAttribute('aria-expanded', 'false');\n                targetCol.setAttribute('aria-expanded', 'false');\n                var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll('.' + cls.COLLAPSED_CLASS));\n                collapsedCell.forEach(function (cell) {\n                    var collapasedText = cell.querySelector('.' + cls.COLLAPSE_HEADER_TEXT_CLASS);\n                    if (collapasedText && targetCol.getBoundingClientRect().height < (collapasedText.getBoundingClientRect().height + 10)) {\n                        collapasedText.style.height = (targetCol.getBoundingClientRect().height - 4) + 'px';\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {\n                var row = targetRow_2[_a];\n                _loop_2(row);\n            }\n            this.columnToggleArray.push(target.getAttribute('data-key'));\n            this.parent.columns[colIndex].setProperties({ isExpanded: false }, true);\n            target.querySelector('.e-header-icon').setAttribute('aria-label', key + ' Collapse');\n        }\n    };\n    Action.prototype.cardSelection = function (target, isCtrl, isShift) {\n        var _this = this;\n        if (!target) {\n            return;\n        }\n        var cards = this.parent.getSelectedCards();\n        if (this.parent.cardSettings.selectionType !== 'None') {\n            var contentRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n            var index = !isNullOrUndefined(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;\n            if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === 'Multiple') {\n                return;\n            }\n            if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === 'Single')) {\n                removeClass(cards, cls.CARD_SELECTION_CLASS);\n                this.parent.layoutModule.disableAttributeSelection(cards);\n                cards.forEach(function (el) {\n                    _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute('data-id')), 1);\n                    _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);\n                    _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));\n                });\n            }\n            if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === 'Multiple') {\n                var curCards_1 = [];\n                var start = void 0;\n                var end = void 0;\n                var i = void 0;\n                var allCards = [].slice.call(contentRow.querySelectorAll('.' + cls.CARD_CLASS));\n                allCards.forEach(function (el) { return curCards_1.push(el.getAttribute('data-id')); });\n                var curId = target.getAttribute('data-id');\n                var lastId = this.lastCard.getAttribute('data-id');\n                var curIndex = end = curCards_1.indexOf(curId);\n                var lastIndex = start = curCards_1.indexOf(lastId);\n                var select = curIndex > lastIndex ? 'next' : 'prev';\n                if (select === 'prev') {\n                    start = curIndex;\n                    end = lastIndex;\n                }\n                for (i = start; i <= end; i++) {\n                    var card = allCards[i];\n                    addClass([card], cls.CARD_SELECTION_CLASS);\n                    card.setAttribute('aria-selected', 'true');\n                    card.setAttribute('tabindex', '0');\n                    this.selectionArray.push(card.getAttribute('data-id'));\n                    this.selectedCardsElement.push(card);\n                    this.selectedCardsData.push(this.parent.getCardDetails(card));\n                    this.lastCardSelection = card;\n                    if (select === 'prev') {\n                        this.lastCardSelection = allCards[start];\n                    }\n                }\n            }\n            else {\n                addClass([target], cls.CARD_SELECTION_CLASS);\n                target.setAttribute('aria-selected', 'true');\n                target.setAttribute('tabindex', '0');\n                this.selectionArray.push(target.getAttribute('data-id'));\n                this.selectedCardsElement.push(target);\n                this.selectedCardsData.push(this.parent.getCardDetails(target));\n                this.lastCard = this.lastCardSelection = target;\n                this.lastSelectionRow = closest(target, '.' + cls.CONTENT_ROW_CLASS);\n                if (this.lastSelectionRow.previousElementSibling) {\n                    var elementSelector = \".\" + cls.SWIMLANE_ROW_EXPAND_CLASS + \",.\" + cls.SWIMLANE_ROW_COLLAPSE_CLASS;\n                    var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);\n                    if (parentEle && parentEle.classList.contains(cls.SWIMLANE_ROW_COLLAPSE_CLASS)) {\n                        this.rowExpandCollapse(parentEle);\n                    }\n                }\n            }\n        }\n    };\n    Action.prototype.addColumn = function (columnOptions, index) {\n        var addColumn = createInstance(Columns, [this.parent, 'columns', columnOptions, true]);\n        this.parent.columns.splice(index, 0, addColumn);\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    Action.prototype.deleteColumn = function (index) {\n        var listKey = this.parent.element.querySelectorAll('.' + cls.HEADER_CELLS_CLASS).item(index);\n        if (listKey && listKey.classList.contains(cls.HEADER_ROW_TOGGLE_CLASS)) {\n            this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute('data-key'), 0));\n        }\n        this.parent.columns.splice(index, 1);\n        if (this.parent.columns.length === 0) {\n            detach(this.parent.element.querySelector('.' + cls.HEADER_CLASS));\n            detach(this.parent.element.querySelector('.' + cls.CONTENT_CLASS));\n        }\n        else {\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.showColumn = function (key) {\n        var index = this.hideColumnKeys.indexOf(key.toString());\n        if (index !== -1) {\n            this.hideColumnKeys.splice(index, 1);\n            this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n        }\n    };\n    Action.prototype.hideColumn = function (key) {\n        this.hideColumnKeys.push(key.toString());\n        this.parent.notify(events.dataReady, { processedData: this.parent.kanbanData });\n    };\n    /**\n     * Maintain the single card selection\n     *\n     * @param {Record<string, any>} data - Specifies the selected card data.\n     * @returns {void}\n     * @private\n     * @hidden\n     */\n    Action.prototype.SingleCardSelection = function (data) {\n        if (this.parent.cardSettings.selectionType !== 'None' && data[this.parent.cardSettings.headerField]) {\n            var card = this.parent.element.querySelector('.e-card[data-id=\\\"' +\n                data[this.parent.cardSettings.headerField].toString() + '\"\\]');\n            if (card) {\n                addClass([card], cls.CARD_SELECTION_CLASS);\n                card.setAttribute('aria-selected', 'true');\n                card.setAttribute('tabindex', '0');\n            }\n        }\n    };\n    return Action;\n}());\nexport { Action };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}