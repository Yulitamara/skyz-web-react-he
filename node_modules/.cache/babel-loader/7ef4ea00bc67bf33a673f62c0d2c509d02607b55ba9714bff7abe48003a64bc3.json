{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar LayoutRender = /** @class */function (_super) {\n  __extends(LayoutRender, _super);\n  function LayoutRender(parent) {\n    var _this = _super.call(this, parent) || this;\n    _this.kanbanRows = [];\n    _this.parent = parent;\n    _this.columnKeys = [];\n    _this.swimlaneIndex = 0;\n    _this.swimlaneData = {};\n    _this.scrollLeft = 0;\n    _this.frozenOrder = 0;\n    _this.parent.on(events.dataReady, _this.initRender, _this);\n    _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n    return _this;\n  }\n  LayoutRender.prototype.initRender = function () {\n    if (this.parent.columns.length === 0) {\n      return;\n    }\n    this.columnData = this.getColumnCards();\n    this.kanbanRows = this.getRows();\n    this.swimlaneData = this.getSwimlaneCards();\n    if (this.parent.isAdaptive) {\n      var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n      if (parent_1) {\n        this.scrollLeft = parent_1.scrollLeft;\n      }\n    }\n    this.destroy();\n    this.parent.on(events.dataReady, this.initRender, this);\n    this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n    if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n      this.renderSwimlaneHeader();\n    }\n    var header = createElement('div', {\n      className: cls.HEADER_CLASS\n    });\n    this.parent.element.appendChild(header);\n    this.renderHeader(header);\n    this.renderContent();\n    this.renderCards();\n    this.renderValidation();\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n    this.wireEvents();\n    if (this.parent.isInitialRender) {\n      this.parent.isInitialRender = false;\n    }\n  };\n  LayoutRender.prototype.renderHeader = function (header) {\n    var headerWrap = createElement('div', {\n      className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : ''\n    });\n    header.appendChild(headerWrap);\n    var headerTable = createElement('table', {\n      className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n      attrs: {\n        'role': 'presentation'\n      }\n    });\n    headerWrap.appendChild(headerTable);\n    this.renderColGroup(headerTable);\n    var tableHead = createElement('thead');\n    headerTable.appendChild(tableHead);\n    if (this.parent.stackedHeaders.length > 0) {\n      tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n    }\n    var tr = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS\n    });\n    tableHead.appendChild(tr);\n    var _loop_1 = function (column) {\n      if (this_1.isColumnVisible(column)) {\n        var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n        var th_1 = createElement('th', {\n          className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n          attrs: {\n            'data-role': 'kanban-column',\n            'data-key': column.keyField.toString()\n          }\n        });\n        var classList = [];\n        if (column.allowToggle) {\n          classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n          if (!column.isExpanded) {\n            classList.push(cls.COLLAPSED_CLASS);\n          }\n        }\n        addClass([th_1], classList);\n        var headerWrapper = createElement('div', {\n          className: cls.HEADER_WRAP_CLASS\n        });\n        th_1.appendChild(headerWrapper);\n        var noOfCard = this_1.columnData[column.keyField].length;\n        var headerTitle = createElement('div', {\n          className: cls.HEADER_TITLE_CLASS\n        });\n        headerWrapper.appendChild(headerTitle);\n        if (column.template) {\n          var templateArgs = {\n            keyField: column.keyField,\n            headerText: column.headerText,\n            minCount: column.minCount,\n            maxCount: column.maxCount,\n            allowToggle: column.allowToggle,\n            isExpanded: column.isExpanded,\n            showItemCount: column.showItemCount,\n            count: noOfCard\n          };\n          addClass([th_1], cls.TEMPLATE_CLASS);\n          var templateId = this_1.parent.element.id + '_columnTemplate';\n          var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n          append(templateHeader, headerTitle);\n        } else {\n          var header_1 = createElement('div', {\n            className: cls.HEADER_TEXT_CLASS,\n            innerHTML: column.headerText\n          });\n          headerTitle.appendChild(header_1);\n          if (column.showItemCount) {\n            var itemCount = createElement('div', {\n              className: cls.CARD_ITEM_COUNT_CLASS,\n              innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n            });\n            headerTitle.appendChild(itemCount);\n          }\n        }\n        if (column.allowToggle) {\n          var isExpand = column.isExpanded && index === -1 ? true : false;\n          var name_1 = isExpand ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n          var icon = createElement('div', {\n            className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n            attrs: {\n              'tabindex': '0'\n            }\n          });\n          icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n          th_1.setAttribute('aria-expanded', isExpand.toString());\n          headerWrapper.appendChild(icon);\n        }\n        var dataObj = [{\n          keyField: column.keyField,\n          textField: column.headerText,\n          count: noOfCard\n        }];\n        var args = {\n          data: dataObj,\n          element: tr,\n          cancel: false,\n          requestType: 'headerRow'\n        };\n        this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n          if (!columnArgs.cancel) {\n            tr.appendChild(th_1);\n          }\n        });\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      _loop_1(column);\n    }\n  };\n  LayoutRender.prototype.renderContent = function () {\n    var content = createElement('div', {\n      className: cls.CONTENT_CLASS\n    });\n    this.parent.element.appendChild(content);\n    var contentWrap = createElement('div', {\n      className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : ''\n    });\n    content.appendChild(contentWrap);\n    var contentTable = createElement('table', {\n      className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n      attrs: {\n        'role': 'presentation'\n      }\n    });\n    contentWrap.appendChild(contentTable);\n    this.renderColGroup(contentTable);\n    var tBody = createElement('tbody');\n    contentTable.appendChild(tBody);\n    var className;\n    var isCollaspsed = false;\n    this.swimlaneRow = this.kanbanRows;\n    this.initializeSwimlaneTree();\n    for (var _i = 0, _a = this.swimlaneRow; _i < _a.length; _i++) {\n      var row = _a[_i];\n      if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n        var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n        isCollaspsed = index !== -1;\n      }\n      if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n        this.renderSwimlaneRow(tBody, row, isCollaspsed);\n      }\n      this.renderSingleContent(tBody, row, isCollaspsed);\n    }\n  };\n  LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n    var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n    var tr = createElement('tr', {\n      className: className,\n      attrs: {\n        'aria-expanded': 'true'\n      }\n    });\n    for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n      var column = _a[_i];\n      if (this.isColumnVisible(column)) {\n        var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n        var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n        var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS + ' ' + cls.DROPPABLE_CLASS : '');\n        var td = createElement('td', {\n          className: className_1 + dragClass,\n          attrs: {\n            'data-role': 'kanban-column',\n            'data-key': column.keyField.toString(),\n            'aria-expanded': 'true',\n            'tabindex': '0',\n            'role': 'navigation'\n          }\n        });\n        if (column.allowToggle && !column.isExpanded || index !== -1) {\n          addClass([td], cls.COLLAPSED_CLASS);\n          var text = (column.showItemCount ? '[' + this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n          td.appendChild(createElement('div', {\n            className: cls.COLLAPSE_HEADER_TEXT_CLASS,\n            innerHTML: text\n          }));\n          td.setAttribute('aria-expanded', 'false');\n        }\n        if (column.showAddButton) {\n          var button = createElement('div', {\n            className: cls.SHOW_ADD_BUTTON,\n            attrs: {\n              'tabindex': '-1'\n            }\n          });\n          button.appendChild(createElement('div', {\n            className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS\n          }));\n          td.appendChild(button);\n        }\n        tr.appendChild(td);\n      }\n    }\n    var dataObj = [{\n      keyField: row.keyField,\n      textField: row.textField,\n      count: row.count\n    }];\n    var args = {\n      data: dataObj,\n      element: tr,\n      cancel: false,\n      requestType: 'contentRow'\n    };\n    this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n      if (!columnArgs.cancel) {\n        if (tBody.classList.contains('e-swimlane-row')) {\n          tBody.insertAdjacentElement('beforebegin', tr);\n        } else {\n          tBody.appendChild(tr);\n        }\n      }\n    });\n  };\n  LayoutRender.prototype.initializeSwimlaneTree = function () {\n    if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n      this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n      this.renderSwimlaneTree();\n      this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS).innerHTML = this.swimlaneRow[0].textField;\n    }\n  };\n  LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n    var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n    var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n    var tr = createElement('tr', {\n      className: name + className,\n      attrs: {\n        'data-key': row.keyField,\n        'aria-expanded': (!isCollapsed).toString()\n      }\n    });\n    var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n    var td = createElement('td', {\n      className: cls.CONTENT_CELLS_CLASS,\n      attrs: {\n        'data-role': 'kanban-column',\n        'colspan': col.toString()\n      }\n    });\n    var swimlaneHeader = createElement('div', {\n      className: cls.SWIMLANE_HEADER_CLASS\n    });\n    td.appendChild(swimlaneHeader);\n    var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n    var iconDiv = createElement('div', {\n      className: cls.ICON_CLASS + ' ' + iconClass,\n      attrs: {\n        'tabindex': '0',\n        'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n      }\n    });\n    swimlaneHeader.appendChild(iconDiv);\n    var headerWrap = createElement('div', {\n      className: cls.HEADER_WRAP_CLASS\n    });\n    swimlaneHeader.appendChild(headerWrap);\n    var cardCount = this.swimlaneData[row.keyField].length;\n    if (this.parent.swimlaneSettings.template) {\n      var templateArgs = extend({}, row, {\n        count: cardCount\n      }, true);\n      addClass([td], cls.TEMPLATE_CLASS);\n      var templateId = this.parent.element.id + '_swimlaneTemplate';\n      var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n      append(swimlaneTemplate, headerWrap);\n    } else {\n      headerWrap.appendChild(createElement('div', {\n        className: cls.SWIMLANE_ROW_TEXT_CLASS,\n        innerHTML: row.textField,\n        attrs: {\n          'data-role': row.textField\n        }\n      }));\n    }\n    if (this.parent.swimlaneSettings.showItemCount) {\n      swimlaneHeader.appendChild(createElement('div', {\n        className: cls.CARD_ITEM_COUNT_CLASS,\n        innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n      }));\n    }\n    tr.appendChild(td);\n    var dataObj = [{\n      keyField: row.keyField,\n      textField: row.textField,\n      count: row.count\n    }];\n    var args = {\n      data: dataObj,\n      element: tr,\n      cancel: false,\n      requestType: 'swimlaneRow'\n    };\n    this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n      if (!columnArgs.cancel) {\n        if (tBody.classList.contains('e-swimlane-row')) {\n          tBody.insertAdjacentElement('beforebegin', tr);\n        } else {\n          tBody.appendChild(tr);\n        }\n      }\n    });\n  };\n  LayoutRender.prototype.renderCards = function () {\n    var _this = this;\n    var rows = this.swimlaneRow;\n    var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n    var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n    var removeTrs = [];\n    cardRows.forEach(function (tr, index) {\n      var dataCount = 0;\n      var _loop_2 = function (column) {\n        if (_this.isColumnVisible(column)) {\n          var columnData = _this.parent.swimlaneSettings.keyField ? _this.getColumnData(column.keyField, _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n          dataCount += columnData.length;\n          var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n          var cardWrapper_1 = createElement('div', {\n            className: cls.CARD_WRAPPER_CLASS,\n            attrs: {\n              'role': 'listbox'\n            }\n          });\n          columnWrapper.appendChild(cardWrapper_1);\n          if (columnData.length > 0) {\n            var _loop_3 = function (data) {\n              var cardText = data[_this.parent.cardSettings.headerField];\n              var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n              var cardElement = _this.renderCard(data);\n              if (cardIndex !== -1) {\n                cardElement.setAttribute('aria-selected', 'true');\n                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n              }\n              var args = {\n                data: data,\n                element: cardElement,\n                cancel: false\n              };\n              _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                  cardWrapper_1.appendChild(cardElement);\n                }\n              });\n            };\n            for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n              var data = _a[_i];\n              _loop_3(data);\n            }\n          } else {\n            cardWrapper_1.appendChild(_this.renderEmptyCard());\n          }\n        }\n      };\n      for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n        var column = _a[_i];\n        _loop_2(column);\n      }\n      if (dataCount === 0) {\n        removeTrs.push(tr);\n        if (swimlaneRows.length > 0) {\n          removeTrs.push(swimlaneRows[index]);\n        }\n      }\n    });\n    if (!this.parent.swimlaneSettings.showEmptyRow && this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn) {\n      removeTrs.forEach(function (tr) {\n        return remove(tr);\n      });\n    }\n  };\n  LayoutRender.prototype.renderCard = function (data) {\n    var cardElement = createElement('div', {\n      className: cls.CARD_CLASS,\n      attrs: {\n        'data-id': data[this.parent.cardSettings.headerField],\n        'data-key': data[this.parent.keyField],\n        'aria-selected': 'false',\n        'tabindex': '-1',\n        'role': 'option'\n      }\n    });\n    if (this.parent.cardSettings.template) {\n      addClass([cardElement], cls.TEMPLATE_CLASS);\n      var templateId = this.parent.element.id + '_cardTemplate';\n      var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n      append(cardTemplate, cardElement);\n    } else {\n      var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n      if (this.parent.cardSettings.showHeader) {\n        var cardHeader = createElement('div', {\n          className: cls.CARD_HEADER_CLASS\n        });\n        var cardCaption = createElement('div', {\n          className: cls.CARD_HEADER_TEXT_CLASS\n        });\n        var cardText = createElement('div', {\n          className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n          innerHTML: data[this.parent.cardSettings.headerField] || ''\n        });\n        cardHeader.appendChild(cardCaption);\n        cardCaption.appendChild(cardText);\n        cardElement.appendChild(cardHeader);\n      }\n      var cardContent = createElement('div', {\n        className: cls.CARD_CONTENT_CLASS + tooltipClass,\n        innerHTML: data[this.parent.cardSettings.contentField] || ''\n      });\n      cardElement.appendChild(cardContent);\n      if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n        var cardTags = createElement('div', {\n          className: cls.CARD_TAGS_CLASS\n        });\n        var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n        for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n          var tag = tags_1[_i];\n          cardTags.appendChild(createElement('div', {\n            className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS,\n            innerHTML: tag\n          }));\n        }\n        cardElement.appendChild(cardTags);\n      }\n      if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n        addClass([cardElement], cls.CARD_COLOR_CLASS);\n        cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n      }\n      if (this.parent.cardSettings.footerCssField) {\n        var cardFields = createElement('div', {\n          className: cls.CARD_FOOTER_CLASS\n        });\n        var keys = data[this.parent.cardSettings.footerCssField].split(',');\n        for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n          var key = keys_1[_a];\n          cardFields.appendChild(createElement('div', {\n            className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n          }));\n        }\n        cardElement.appendChild(cardFields);\n      }\n    }\n    return cardElement;\n  };\n  LayoutRender.prototype.renderEmptyCard = function () {\n    var emptyCard = createElement('span', {\n      className: cls.EMPTY_CARD_CLASS,\n      innerHTML: this.parent.localeObj.getConstant('noCard')\n    });\n    return emptyCard;\n  };\n  LayoutRender.prototype.renderColGroup = function (table) {\n    var _this = this;\n    var colGroup = createElement('colgroup');\n    this.parent.columns.forEach(function (column) {\n      if (_this.isColumnVisible(column)) {\n        var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n        var isToggle = column.allowToggle && !column.isExpanded;\n        var className = index === -1 ? isToggle ? cls.COLLAPSED_CLASS : '' : cls.COLLAPSED_CLASS;\n        var col = createElement('col', {\n          className: className,\n          attrs: {\n            'data-key': column.keyField.toString()\n          },\n          styles: _this.parent.isAdaptive ? 'width: ' + (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n        });\n        colGroup.appendChild(col);\n      }\n    });\n    table.appendChild(colGroup);\n  };\n  LayoutRender.prototype.getRows = function () {\n    var _this = this;\n    var kanbanRows = [];\n    if (this.parent.swimlaneSettings.keyField) {\n      this.parent.kanbanData.map(function (obj) {\n        if (!_this.parent.swimlaneSettings.showEmptyRow) {\n          if (isNullOrUndefined(obj[_this.parent.keyField]) || obj[_this.parent.keyField] === '' || obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1) {\n            return;\n          }\n        }\n        var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n        var keyField = obj[_this.parent.swimlaneSettings.keyField];\n        if (!obj[_this.parent.swimlaneSettings.keyField]) {\n          if (_this.parent.swimlaneSettings.showUnassignedRow) {\n            textField = _this.parent.localeObj.getConstant('unassigned');\n            keyField = '';\n          } else {\n            return;\n          }\n        }\n        kanbanRows.push({\n          keyField: keyField,\n          textField: textField\n        });\n      });\n      kanbanRows = kanbanRows.filter(function (item, index, arr) {\n        return index === arr.map(function (item) {\n          return item.keyField;\n        }).indexOf(item.keyField);\n      });\n      kanbanRows = this.swimlaneSorting(kanbanRows);\n      kanbanRows.forEach(function (row) {\n        row.count = _this.parent.kanbanData.filter(function (obj) {\n          return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 && obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n        }).length;\n      });\n      if (kanbanRows.length === 0) {\n        kanbanRows.push({\n          keyField: '',\n          textField: ''\n        });\n      }\n    } else {\n      kanbanRows.push({\n        keyField: '',\n        textField: ''\n      });\n    }\n    return kanbanRows;\n  };\n  LayoutRender.prototype.swimlaneSorting = function (rows) {\n    if (this.parent.swimlaneSettings.sortComparer) {\n      rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n    } else {\n      rows.sort(function (a, b) {\n        return a.textField.localeCompare(b.textField, undefined, {\n          numeric: true\n        });\n      });\n      if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n        rows.reverse();\n      }\n    }\n    return rows;\n  };\n  LayoutRender.prototype.createStackedRow = function (rows) {\n    var tr = createElement('tr', {\n      className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS\n    });\n    var stackedHeaders = [];\n    this.parent.columns.forEach(function (column) {\n      var headerText = '';\n      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n        var row = rows_1[_i];\n        if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n          headerText = row.text;\n        }\n      }\n      stackedHeaders.push(headerText);\n    });\n    for (var h = 0; h < stackedHeaders.length; h++) {\n      var colSpan = 1;\n      for (var j = h + 1; j < stackedHeaders.length; j++) {\n        if (stackedHeaders[h] !== '' && stackedHeaders[j] !== '' && stackedHeaders[h] === stackedHeaders[j]) {\n          colSpan++;\n        } else {\n          break;\n        }\n      }\n      var div = createElement('div', {\n        className: cls.HEADER_TEXT_CLASS,\n        innerHTML: stackedHeaders[h]\n      });\n      var th = createElement('th', {\n        className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n        attrs: {\n          'colspan': colSpan.toString()\n        }\n      });\n      tr.appendChild(th).appendChild(div);\n      h += colSpan - 1;\n    }\n    return tr;\n  };\n  LayoutRender.prototype.scrollUiUpdate = function () {\n    var _this = this;\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    var height = this.parent.element.offsetHeight - header.offsetHeight;\n    if (this.parent.isAdaptive) {\n      height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n      var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n      if (swimlaneToolbar) {\n        height -= swimlaneToolbar.offsetHeight;\n      }\n      var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n      cardWrappers.forEach(function (cell) {\n        var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n        if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n          cardWrapper.style.height = formatUnit(height);\n          EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n        }\n      });\n    }\n    if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n      content.style.height = formatUnit(height);\n    }\n    [].slice.call(header.children).forEach(function (node) {\n      var paddingValue = 0;\n      if (content.offsetWidth - content.clientWidth > 0) {\n        paddingValue = 17;\n        if (content.offsetHeight - content.clientHeight > 0) {\n          node.style.width = formatUnit(content.clientWidth);\n        }\n      }\n      if (_this.parent.enableRtl) {\n        node.style.paddingLeft = formatUnit(paddingValue);\n      } else {\n        node.style.paddingRight = formatUnit(paddingValue);\n      }\n    });\n    this.updateScrollPosition();\n  };\n  LayoutRender.prototype.onContentScroll = function (e) {\n    var target = e.target;\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    [].slice.call(header.children).forEach(function (node) {\n      node.scrollLeft = target.scrollLeft;\n    });\n    this.parent.scrollPosition.content = {\n      left: target.scrollLeft,\n      top: target.scrollTop\n    };\n    if (!isNullOrUndefined(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n      this.frozenRows(e);\n    }\n  };\n  LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n    var frozenKey = currentElem.getAttribute('data-key');\n    if (!isNullOrUndefined(frozenKey)) {\n      this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n    }\n  };\n  LayoutRender.prototype.frozenRows = function (e) {\n    var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    if (isNullOrUndefined(this.frozenSwimlaneRow)) {\n      this.frozenSwimlaneRow = createElement('div', {\n        className: cls.FROZEN_SWIMLANE_ROW_CLASS\n      });\n      var frozenRow = createElement('div', {\n        className: cls.FROZEN_ROW_CLASS\n      });\n      this.frozenSwimlaneRow.appendChild(frozenRow);\n      this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n      frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n      this.addFrozenSwimlaneDataKey(firstSwimlane);\n      setStyleAttribute(this.frozenSwimlaneRow, {\n        height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n        width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n        top: formatUnit(header.getBoundingClientRect().height.toString())\n      });\n      setStyleAttribute(header, {\n        position: 'relative',\n        top: formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)\n      });\n      setStyleAttribute(content, {\n        position: 'relative',\n        top: formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)\n      });\n    } else {\n      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n      var curSwim = swimlaneRows[this.frozenOrder];\n      var prevSwim = swimlaneRows[this.frozenOrder - 1];\n      var nextSwim = swimlaneRows[this.frozenOrder + 1];\n      var curSwimHeight = void 0;\n      var prevSwimHeight = void 0;\n      var nextSwimHeight = void 0;\n      if (curSwim) {\n        curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n      }\n      if (prevSwim) {\n        prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n      }\n      if (nextSwim) {\n        nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n      }\n      var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n      var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n      if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n        if (frozenRowsElement) {\n          remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n          frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n          this.addFrozenSwimlaneDataKey(nextSwim);\n        }\n        ++this.frozenOrder;\n      } else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n        if (frozenRowsElement) {\n          remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n          frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n          this.addFrozenSwimlaneDataKey(prevSwim);\n        }\n        --this.frozenOrder;\n      }\n    }\n    if (e && e.target.scrollTop == 0) {\n      this.removeFrozenRows();\n    }\n  };\n  LayoutRender.prototype.removeFrozenRows = function () {\n    remove(this.frozenSwimlaneRow);\n    this.frozenSwimlaneRow = null;\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    setStyleAttribute(header, {\n      position: '',\n      top: ''\n    });\n    setStyleAttribute(content, {\n      position: '',\n      top: ''\n    });\n    this.parent.scrollPosition.content = {\n      left: this.parent.scrollPosition.content.left,\n      top: 0\n    };\n    content.scrollTop = 0;\n    this.frozenOrder = 0;\n  };\n  LayoutRender.prototype.onColumnScroll = function (e) {\n    var target = e.target;\n    if (target.offsetParent) {\n      var columnKey = target.offsetParent.getAttribute('data-key');\n      this.parent.scrollPosition.column[columnKey] = {\n        left: target.scrollLeft,\n        top: target.scrollTop\n      };\n    }\n  };\n  LayoutRender.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n      e.preventDefault();\n    }\n  };\n  /**\n   * Check column is visible or not.\n   *\n   * @param {ColumnsModel} column - specifies the column.\n   * @returns {boolean}\n   * @private\n   * @hidden\n   */\n  LayoutRender.prototype.isColumnVisible = function (column) {\n    var _this = this;\n    var isVisible = false;\n    var isNumeric = typeof column.keyField === 'number';\n    if (isNumeric) {\n      isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n    } else {\n      column.keyField.split(',').forEach(function (key) {\n        isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1;\n      });\n    }\n    return isVisible;\n  };\n  LayoutRender.prototype.renderLimits = function (column, target) {\n    var limits = createElement('div', {\n      className: cls.LIMITS_CLASS\n    });\n    if (column.minCount) {\n      limits.appendChild(createElement('div', {\n        className: cls.MIN_COUNT_CLASS,\n        innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n      }));\n    }\n    if (column.maxCount) {\n      limits.appendChild(createElement('div', {\n        className: cls.MAX_COUNT_CLASS,\n        innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n      }));\n    }\n    if (limits.childElementCount > 0) {\n      if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n        target.insertBefore(limits, target.firstElementChild);\n      } else {\n        target.appendChild(limits);\n      }\n    }\n  };\n  LayoutRender.prototype.renderValidation = function () {\n    var _this = this;\n    this.parent.columns.forEach(function (column) {\n      if (!column.minCount && !column.maxCount) {\n        return;\n      }\n      var cardData = _this.columnData[column.keyField];\n      var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n      var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n      var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n      if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n        _this.swimlaneRow.forEach(function (row, index) {\n          _this.renderLimits(column, rowCells[index]);\n          var rowCards = cardData.filter(function (card) {\n            return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n          });\n          var colorClass = _this.getValidationClass(column, rowCards.length);\n          if (colorClass) {\n            addClass([rowCells[index]], colorClass);\n          }\n        });\n      } else {\n        _this.renderLimits(column, headerCell);\n        var colorClass = _this.getValidationClass(column, cardData.length);\n        if (colorClass) {\n          addClass(rowCells.concat(headerCell), colorClass);\n        }\n      }\n    });\n  };\n  LayoutRender.prototype.getValidationClass = function (column, count) {\n    var colorClass;\n    if (column.maxCount && count > column.maxCount) {\n      colorClass = cls.MAX_COLOR_CLASS;\n    } else if (column.minCount && count < column.minCount) {\n      colorClass = cls.MIN_COLOR_CLASS;\n    }\n    return colorClass;\n  };\n  LayoutRender.prototype.refreshValidation = function () {\n    var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n    validations.forEach(function (node) {\n      remove(node);\n    });\n    var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n    removeClass(minClass, cls.MIN_COLOR_CLASS);\n    var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n    removeClass(maxClass, cls.MAX_COLOR_CLASS);\n    this.renderValidation();\n  };\n  LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n    var _this = this;\n    if (dataSource === void 0) {\n      dataSource = this.parent.kanbanData;\n    }\n    var cardData = [];\n    var isNumeric = typeof columnValue === 'number';\n    if (isNumeric) {\n      var keyData = dataSource.filter(function (cardObj) {\n        return cardObj[_this.parent.keyField] === columnValue;\n      });\n      cardData = cardData.concat(keyData);\n    } else {\n      var columnKeys = columnValue.split(',');\n      var _loop_4 = function (key) {\n        var keyData = dataSource.filter(function (cardObj) {\n          return cardObj[_this.parent.keyField] === key.trim();\n        });\n        cardData = cardData.concat(keyData);\n      };\n      for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n        var key = columnKeys_1[_i];\n        _loop_4(key);\n      }\n    }\n    this.sortCategory(cardData);\n    return cardData;\n  };\n  LayoutRender.prototype.sortCategory = function (cardData) {\n    var key = this.parent.cardSettings.headerField;\n    var direction = this.parent.sortSettings.direction;\n    switch (this.parent.sortSettings.sortBy) {\n      case 'DataSourceOrder':\n        this.sortOrder(key, direction, cardData);\n        break;\n      case 'Custom':\n      case 'Index':\n        if (this.parent.sortSettings.field) {\n          key = this.parent.sortSettings.field;\n        }\n        this.sortOrder(key, direction, cardData);\n        break;\n    }\n    return cardData;\n  };\n  LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n    var isNumeric = true;\n    if (this.parent.kanbanData.length > 0) {\n      isNumeric = typeof this.parent.kanbanData[0][key] === 'number';\n    }\n    if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n      return cardData;\n    }\n    var first;\n    var second;\n    cardData = cardData.sort(function (firstData, secondData) {\n      if (!isNumeric) {\n        first = firstData[key].toLowerCase();\n        second = secondData[key].toLowerCase();\n      } else {\n        first = firstData[key];\n        second = secondData[key];\n      }\n      return first > second ? 1 : second > first ? -1 : 0;\n    });\n    if (direction === 'Descending') {\n      cardData.reverse();\n    }\n    return cardData;\n  };\n  LayoutRender.prototype.documentClick = function (args) {\n    if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) && this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n      this.treePopup.hide();\n      removeClass([this.popupOverlay], 'e-enable');\n    }\n    if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n      return;\n    }\n    var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n    removeClass(cards, cls.CARD_SELECTION_CLASS);\n    this.disableAttributeSelection(cards);\n  };\n  LayoutRender.prototype.disableAttributeSelection = function (cards) {\n    if (cards instanceof Element) {\n      cards.setAttribute('aria-selected', 'false');\n    } else {\n      cards.forEach(function (card) {\n        card.setAttribute('aria-selected', 'false');\n      });\n    }\n  };\n  LayoutRender.prototype.getColumnCards = function (data) {\n    var _this = this;\n    var columnData = {};\n    this.columnKeys = [];\n    this.parent.columns.forEach(function (column) {\n      var isNumeric = typeof column.keyField === 'number';\n      if (isNumeric) {\n        _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n      } else {\n        _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) {\n          return e.trim();\n        }));\n      }\n      var cardData = _this.getColumnData(column.keyField, data);\n      columnData[column.keyField] = cardData;\n    });\n    return columnData;\n  };\n  LayoutRender.prototype.getSwimlaneCards = function () {\n    var _this = this;\n    var swimlaneData = {};\n    if (this.parent.swimlaneSettings.keyField) {\n      this.kanbanRows.forEach(function (row) {\n        return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n          return !isNullOrUndefined(obj[_this.parent.keyField]) && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 && (!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow ? '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n        });\n      });\n    }\n    return swimlaneData;\n  };\n  LayoutRender.prototype.refreshHeaders = function () {\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    [].slice.call(header.children).forEach(function (child) {\n      return remove(child);\n    });\n    this.renderHeader(header);\n  };\n  LayoutRender.prototype.refreshCards = function () {\n    this.parent.resetTemplates(['cardTemplate']);\n    var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cards.forEach(function (card) {\n      return remove(card);\n    });\n    this.renderCards();\n    this.wireDragEvent();\n    this.parent.renderTemplates();\n  };\n  LayoutRender.prototype.refresh = function () {\n    var _this = this;\n    var isColumnTemplateRefreshed = false;\n    this.parent.columns.forEach(function (column) {\n      if (column.showItemCount) {\n        if (column && column.template && !isColumnTemplateRefreshed) {\n          _this.refreshHeaders();\n          isColumnTemplateRefreshed = true;\n        }\n        var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n        var itemCount = _this.parent.element.querySelector(countSelector);\n        if (itemCount) {\n          var isNumeric = typeof column.keyField === 'number';\n          var cardLength = 0;\n          if (isNumeric) {\n            cardLength = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]')).length;\n          } else {\n            var keys = column.keyField.split(',');\n            for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n              var key = keys_2[_i];\n              var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n              cardLength = cards.length + cardLength;\n            }\n          }\n          itemCount.innerHTML = '- ' + cardLength + ' ' + _this.parent.localeObj.getConstant('items');\n        }\n      }\n    });\n    if (this.parent.swimlaneSettings.keyField) {\n      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n      swimlaneRows.forEach(function (swimlane) {\n        var swimlaneKey = swimlane.getAttribute('data-key');\n        var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n        if (itemCount && swimlaneKey) {\n          var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n          itemCount.innerHTML = '- ' + cards.length + ' ' + _this.parent.localeObj.getConstant('items');\n        }\n      });\n    }\n    this.refreshValidation();\n  };\n  LayoutRender.prototype.updateScrollPosition = function () {\n    var _this = this;\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    if (content) {\n      content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n    }\n    var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cardWrapper.forEach(function (wrapper) {\n      if (wrapper.offsetParent) {\n        var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n        if (scrollData) {\n          wrapper.scrollTo(scrollData.left, scrollData.top);\n        }\n      }\n    });\n  };\n  LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n    var _this = this;\n    var key = data[this.parent.keyField];\n    var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n    if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n      var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n      if (this.parent.element.querySelector(rowSelector)) {\n        cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n      } else {\n        var columnIndex = this.columnKeys.indexOf(key);\n        if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n          var index_1 = this.kanbanRows.findIndex(function (rowData) {\n            return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField];\n          });\n          var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n          var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n          if (swim[index_1]) {\n            swimRow = swim[index_1];\n          }\n          this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n          this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n        }\n        cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n        [].slice.call(cardRow.children).forEach(function (cell) {\n          var cardWrapper = createElement('div', {\n            className: cls.CARD_WRAPPER_CLASS\n          });\n          cell.appendChild(cardWrapper);\n          cardWrapper.appendChild(_this.renderEmptyCard());\n        });\n      }\n    }\n    if (this.parent.sortSettings.sortBy !== 'Index') {\n      var field_1 = this.parent.cardSettings.headerField;\n      if (this.parent.sortSettings.sortBy === 'Custom') {\n        field_1 = this.parent.sortSettings.field;\n      }\n      if (isNullOrUndefined(this.parent.swimlaneSettings.keyField)) {\n        index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n          return colData[field_1] === data[field_1];\n        });\n      } else {\n        var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n        index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) {\n          return colData[field_1] === data[field_1];\n        });\n      }\n    } else if (this.parent.sortSettings.sortBy === 'Index' && this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n      index = data[this.parent.sortSettings.field] - 1;\n    }\n    if (cardRow) {\n      var td = [].slice.call(cardRow.children).filter(function (e) {\n        return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n      })[0];\n      var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n      var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n      if (emptyCard) {\n        remove(emptyCard);\n      }\n      var cardElement_1 = this.renderCard(data);\n      if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n        this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n        addClass([cardElement_1], cls.DROPPABLE_CLASS);\n      }\n      var args = {\n        data: data,\n        element: cardElement_1,\n        cancel: false\n      };\n      this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n        if (!cardArgs.cancel) {\n          if (isNullOrUndefined(index) || cardWrapper_2.children.length === 0) {\n            cardWrapper_2.appendChild(cardElement_1);\n          } else {\n            cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n          }\n        }\n      });\n    }\n  };\n  LayoutRender.prototype.removeCard = function (data) {\n    var cardKey = data[this.parent.cardSettings.headerField];\n    var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n    this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n    var cardContainer = cardElement.parentElement;\n    if (cardElement) {\n      remove(cardElement);\n    }\n    if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n      cardContainer.appendChild(this.renderEmptyCard());\n    }\n  };\n  LayoutRender.prototype.wireEvents = function () {\n    var _this = this;\n    EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n    EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n    EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    EventHandler.add(content, 'scroll', this.onContentScroll, this);\n    var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cardWrapper.forEach(function (wrapper) {\n      if (_this.parent.isInitialRender && wrapper.offsetParent) {\n        _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = {\n          left: 0,\n          top: 0\n        };\n      }\n      EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n    });\n    if (this.parent.isAdaptive) {\n      this.parent.touchModule.wireTouchEvents();\n      content.scrollLeft = this.scrollLeft;\n    }\n    this.wireDragEvent();\n  };\n  LayoutRender.prototype.unWireEvents = function () {\n    var _this = this;\n    EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n    EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n    EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    if (content) {\n      EventHandler.remove(content, 'scroll', this.onContentScroll);\n      if (this.parent.allowDragAndDrop) {\n        this.unWireDragEvent();\n      }\n    }\n    var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n    cardWrapper.forEach(function (wrapper) {\n      EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll);\n    });\n    if (this.parent.isAdaptive) {\n      this.parent.touchModule.unWireTouchEvents();\n    }\n  };\n  LayoutRender.prototype.wireDragEvent = function () {\n    var _this = this;\n    if (this.parent.allowDragAndDrop) {\n      var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n      addClass(cards, cls.DROPPABLE_CLASS);\n      cards.forEach(function (card) {\n        return _this.parent.dragAndDropModule.wireDragEvents(card);\n      });\n    }\n  };\n  LayoutRender.prototype.unWireDragEvent = function () {\n    var _this = this;\n    var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n    removeClass(cards, cls.DROPPABLE_CLASS);\n    cards.forEach(function (card) {\n      return _this.parent.dragAndDropModule.unWireDragEvents(card);\n    });\n  };\n  LayoutRender.prototype.destroy = function () {\n    this.parent.resetTemplates();\n    this.parent.off(events.dataReady, this.initRender);\n    this.parent.off(events.contentReady, this.scrollUiUpdate);\n    this.unWireEvents();\n    var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n    if (header) {\n      remove(header);\n    }\n    var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n    if (content) {\n      remove(content);\n    }\n    if (this.treeViewObj) {\n      this.treeViewObj.destroy();\n      this.treeViewObj = null;\n    }\n    if (this.treePopup) {\n      this.treePopup.destroy();\n      this.treePopup = null;\n    }\n    var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n    if (swimlaneToolBarEle) {\n      remove(swimlaneToolBarEle);\n    }\n    var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n    if (swimlaneContent) {\n      remove(swimlaneContent);\n    }\n  };\n  return LayoutRender;\n}(MobileLayout);\nexport { LayoutRender };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","createElement","formatUnit","EventHandler","addClass","remove","extend","Browser","isNullOrUndefined","removeClass","closest","setStyleAttribute","MobileLayout","events","cls","LayoutRender","_super","parent","_this","call","kanbanRows","columnKeys","swimlaneIndex","swimlaneData","scrollLeft","frozenOrder","on","dataReady","initRender","contentReady","scrollUiUpdate","columns","length","columnData","getColumnCards","getRows","getSwimlaneCards","isAdaptive","parent_1","element","querySelector","CONTENT_CLASS","destroy","swimlaneSettings","keyField","kanbanData","renderSwimlaneHeader","header","className","HEADER_CLASS","appendChild","renderHeader","renderContent","renderCards","renderValidation","renderTemplates","notify","wireEvents","isInitialRender","headerWrap","SWIMLANE_CLASS","headerTable","TABLE_CLASS","HEADER_TABLE_CLASS","attrs","renderColGroup","tableHead","stackedHeaders","createStackedRow","tr","HEADER_ROW_CLASS","_loop_1","column","this_1","isColumnVisible","index","actionModule","columnToggleArray","indexOf","toString","th_1","HEADER_CELLS_CLASS","COLLAPSED_CLASS","classList","allowToggle","push","HEADER_ROW_TOGGLE_CLASS","isExpanded","headerWrapper","HEADER_WRAP_CLASS","noOfCard","headerTitle","HEADER_TITLE_CLASS","template","templateArgs","headerText","minCount","maxCount","showItemCount","count","TEMPLATE_CLASS","templateId","id","templateHeader","templateParser","header_1","HEADER_TEXT_CLASS","innerHTML","itemCount","CARD_ITEM_COUNT_CLASS","localeObj","getConstant","isExpand","name_1","COLUMN_EXPAND_CLASS","COLUMN_COLLAPSE_CLASS","icon","HEADER_ICON_CLASS","ICON_CLASS","setAttribute","dataObj","textField","args","data","cancel","requestType","trigger","queryCellInfo","columnArgs","_i","_a","content","contentWrap","contentTable","CONTENT_TABLE_CLASS","tBody","isCollaspsed","swimlaneRow","initializeSwimlaneTree","row","swimlaneToggleArray","renderSwimlaneRow","renderSingleContent","CONTENT_ROW_CLASS","className_1","CONTENT_CELLS_CLASS","dragClass","allowDrag","DRAG_CLASS","allowDrop","DROP_CLASS","DROPPABLE_CLASS","td","text","getColumnData","COLLAPSE_HEADER_TEXT_CLASS","showAddButton","button","SHOW_ADD_BUTTON","SHOW_ADD_ICON","contains","insertAdjacentElement","renderSwimlaneTree","TOOLBAR_SWIMLANE_NAME_CLASS","isCollapsed","name","SWIMLANE_ROW_CLASS","col","hideColumnKeys","swimlaneHeader","SWIMLANE_HEADER_CLASS","iconClass","SWIMLANE_ROW_COLLAPSE_CLASS","SWIMLANE_ROW_EXPAND_CLASS","iconDiv","cardCount","swimlaneTemplate","SWIMLANE_ROW_TEXT_CLASS","rows","cardRows","slice","querySelectorAll","swimlaneRows","removeTrs","forEach","dataCount","_loop_2","columnWrapper","cardWrapper_1","CARD_WRAPPER_CLASS","_loop_3","cardText","cardSettings","headerField","cardIndex","selectionArray","cardElement","renderCard","CARD_SELECTION_CLASS","cardRendered","cardArgs","renderEmptyCard","showEmptyRow","showEmptyColumn","CARD_CLASS","cardTemplate","tooltipClass","enableTooltip","TOOLTIP_TEXT_CLASS","showHeader","cardHeader","CARD_HEADER_CLASS","cardCaption","CARD_HEADER_TEXT_CLASS","CARD_HEADER_TITLE_CLASS","cardContent","CARD_CONTENT_CLASS","contentField","tagsField","cardTags","CARD_TAGS_CLASS","tags","split","tags_1","tag","CARD_TAG_CLASS","CARD_LABEL_CLASS","grabberField","CARD_COLOR_CLASS","style","borderLeftColor","footerCssField","cardFields","CARD_FOOTER_CLASS","keys","keys_1","key","trim","CARD_FOOTER_CSS_CLASS","emptyCard","EMPTY_CARD_CLASS","table","colGroup","isToggle","styles","toggleWidth","getWidth","map","obj","showUnassignedRow","filter","item","arr","swimlaneSorting","sortComparer","sort","a","localeCompare","undefined","numeric","sortDirection","reverse","STACKED_HEADER_ROW_CLASS","rows_1","keyFields","h","colSpan","j","div","th","STACKED_HEADER_CELL_CLASS","height","offsetHeight","window","innerHeight","bottomSpace","swimlaneToolbar","cardWrappers","cell","cardWrapper","MULTI_CARD_WRAPPER_CLASS","add","onAdaptiveScroll","children","node","paddingValue","offsetWidth","clientWidth","clientHeight","width","enableRtl","paddingLeft","paddingRight","updateScrollPosition","onContentScroll","e","target","scrollPosition","left","top","scrollTop","enableFrozenRows","frozenRows","addFrozenSwimlaneDataKey","currentElem","frozenKey","getAttribute","frozenSwimlaneRow","firstSwimlane","FROZEN_SWIMLANE_ROW_CLASS","frozenRow","FROZEN_ROW_CLASS","insertBefore","firstElementChild","cloneNode","getBoundingClientRect","position","curSwim","prevSwim","nextSwim","curSwimHeight","prevSwimHeight","nextSwimHeight","frozenSwimHeight","frozenRowsElement","removeFrozenRows","onColumnScroll","offsetParent","columnKey","touchModule","tabHold","mobilePopup","preventDefault","isVisible","isNumeric","renderLimits","limits","LIMITS_CLASS","MIN_COUNT_CLASS","MAX_COUNT_CLASS","childElementCount","cardData","keySelector","headerCell","rowCells","constraintType","rowCards","card","colorClass","getValidationClass","concat","MAX_COLOR_CLASS","MIN_COLOR_CLASS","refreshValidation","validations","minClass","maxClass","columnValue","dataSource","keyData","cardObj","_loop_4","columnKeys_1","sortCategory","direction","sortSettings","sortBy","sortOrder","field","first","second","firstData","secondData","toLowerCase","documentClick","SWIMLANE_OVERLAY_CLASS","SWIMLANE_RESOURCE_CLASS","treePopup","hide","popupOverlay","ROOT_CLASS","cards","disableAttributeSelection","Element","refreshHeaders","child","refreshCards","resetTemplates","wireDragEvent","refresh","isColumnTemplateRefreshed","countSelector","cardLength","keys_2","swimlane","swimlaneKey","nextElementSibling","scrollTo","wrapper","scrollData","renderCardBasedOnIndex","cardRow","rowSelector","columnIndex","index_1","findIndex","rowData","swim","swimRow","field_1","colData","swimlaneDatas","getSwimlaneData","replace","cardWrapper_2","cardElement_1","allowDragAndDrop","dragAndDropModule","wireDragEvents","childNodes","removeCard","cardKey","isSelectedCard","cardContainer","parentElement","CLONED_CARD_CLASS","clickHandler","doubleClickHandler","document","touchStartEvent","wireTouchEvents","unWireEvents","unWireDragEvent","unWireTouchEvents","unWireDragEvents","off","treeViewObj","swimlaneToolBarEle","swimlaneContent","SWIMLANE_CONTENT_CLASS"],"sources":["C:/skyz-web-react-he/node_modules/@syncfusion/ej2-kanban/src/kanban/base/layout-render.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, formatUnit, EventHandler, addClass, remove, extend, Browser, isNullOrUndefined, removeClass, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { MobileLayout } from './mobile-layout';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Kanban layout rendering module\n *\n */\nvar LayoutRender = /** @class */ (function (_super) {\n    __extends(LayoutRender, _super);\n    function LayoutRender(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.kanbanRows = [];\n        _this.parent = parent;\n        _this.columnKeys = [];\n        _this.swimlaneIndex = 0;\n        _this.swimlaneData = {};\n        _this.scrollLeft = 0;\n        _this.frozenOrder = 0;\n        _this.parent.on(events.dataReady, _this.initRender, _this);\n        _this.parent.on(events.contentReady, _this.scrollUiUpdate, _this);\n        return _this;\n    }\n    LayoutRender.prototype.initRender = function () {\n        if (this.parent.columns.length === 0) {\n            return;\n        }\n        this.columnData = this.getColumnCards();\n        this.kanbanRows = this.getRows();\n        this.swimlaneData = this.getSwimlaneCards();\n        if (this.parent.isAdaptive) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n            if (parent_1) {\n                this.scrollLeft = parent_1.scrollLeft;\n            }\n        }\n        this.destroy();\n        this.parent.on(events.dataReady, this.initRender, this);\n        this.parent.on(events.contentReady, this.scrollUiUpdate, this);\n        if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {\n            this.renderSwimlaneHeader();\n        }\n        var header = createElement('div', { className: cls.HEADER_CLASS });\n        this.parent.element.appendChild(header);\n        this.renderHeader(header);\n        this.renderContent();\n        this.renderCards();\n        this.renderValidation();\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n        this.wireEvents();\n        if (this.parent.isInitialRender) {\n            this.parent.isInitialRender = false;\n        }\n    };\n    LayoutRender.prototype.renderHeader = function (header) {\n        var headerWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        header.appendChild(headerWrap);\n        var headerTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.HEADER_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        headerWrap.appendChild(headerTable);\n        this.renderColGroup(headerTable);\n        var tableHead = createElement('thead');\n        headerTable.appendChild(tableHead);\n        if (this.parent.stackedHeaders.length > 0) {\n            tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));\n        }\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        tableHead.appendChild(tr);\n        var _loop_1 = function (column) {\n            if (this_1.isColumnVisible(column)) {\n                var index = this_1.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var th_1 = createElement('th', {\n                    className: index === -1 ? cls.HEADER_CELLS_CLASS : cls.HEADER_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString() }\n                });\n                var classList = [];\n                if (column.allowToggle) {\n                    classList.push(cls.HEADER_ROW_TOGGLE_CLASS);\n                    if (!column.isExpanded) {\n                        classList.push(cls.COLLAPSED_CLASS);\n                    }\n                }\n                addClass([th_1], classList);\n                var headerWrapper = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n                th_1.appendChild(headerWrapper);\n                var noOfCard = this_1.columnData[column.keyField].length;\n                var headerTitle = createElement('div', { className: cls.HEADER_TITLE_CLASS });\n                headerWrapper.appendChild(headerTitle);\n                if (column.template) {\n                    var templateArgs = {\n                        keyField: column.keyField, headerText: column.headerText, minCount: column.minCount, maxCount: column.maxCount,\n                        allowToggle: column.allowToggle, isExpanded: column.isExpanded, showItemCount: column.showItemCount, count: noOfCard\n                    };\n                    addClass([th_1], cls.TEMPLATE_CLASS);\n                    var templateId = this_1.parent.element.id + '_columnTemplate';\n                    var templateHeader = this_1.parent.templateParser(column.template)(templateArgs, this_1.parent, 'columnTemplate', templateId, false);\n                    append(templateHeader, headerTitle);\n                }\n                else {\n                    var header_1 = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: column.headerText });\n                    headerTitle.appendChild(header_1);\n                    if (column.showItemCount) {\n                        var itemCount = createElement('div', {\n                            className: cls.CARD_ITEM_COUNT_CLASS,\n                            innerHTML: '- ' + noOfCard.toString() + ' ' + this_1.parent.localeObj.getConstant('items')\n                        });\n                        headerTitle.appendChild(itemCount);\n                    }\n                }\n                if (column.allowToggle) {\n                    var isExpand = (column.isExpanded && index === -1) ? true : false;\n                    var name_1 = (isExpand) ? cls.COLUMN_EXPAND_CLASS : cls.COLUMN_COLLAPSE_CLASS;\n                    var icon = createElement('div', {\n                        className: cls.HEADER_ICON_CLASS + ' ' + cls.ICON_CLASS + ' ' + name_1,\n                        attrs: { 'tabindex': '0' }\n                    });\n                    icon.setAttribute('aria-label', isExpand ? column.keyField + ' Expand' : column.keyField + ' Collapse');\n                    th_1.setAttribute('aria-expanded', isExpand.toString());\n                    headerWrapper.appendChild(icon);\n                }\n                var dataObj = [{ keyField: column.keyField, textField: column.headerText, count: noOfCard }];\n                var args = { data: dataObj, element: tr, cancel: false, requestType: 'headerRow' };\n                this_1.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n                    if (!columnArgs.cancel) {\n                        tr.appendChild(th_1);\n                    }\n                });\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            _loop_1(column);\n        }\n    };\n    LayoutRender.prototype.renderContent = function () {\n        var content = createElement('div', { className: cls.CONTENT_CLASS });\n        this.parent.element.appendChild(content);\n        var contentWrap = createElement('div', { className: this.parent.swimlaneSettings.keyField ? cls.SWIMLANE_CLASS : '' });\n        content.appendChild(contentWrap);\n        var contentTable = createElement('table', {\n            className: cls.TABLE_CLASS + ' ' + cls.CONTENT_TABLE_CLASS,\n            attrs: { 'role': 'presentation' }\n        });\n        contentWrap.appendChild(contentTable);\n        this.renderColGroup(contentTable);\n        var tBody = createElement('tbody');\n        contentTable.appendChild(tBody);\n        var className;\n        var isCollaspsed = false;\n        this.swimlaneRow = this.kanbanRows;\n        this.initializeSwimlaneTree();\n        for (var _i = 0, _a = this.swimlaneRow; _i < _a.length; _i++) {\n            var row = _a[_i];\n            if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {\n                var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);\n                isCollaspsed = index !== -1;\n            }\n            if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n                this.renderSwimlaneRow(tBody, row, isCollaspsed);\n            }\n            this.renderSingleContent(tBody, row, isCollaspsed);\n        }\n    };\n    LayoutRender.prototype.renderSingleContent = function (tBody, row, isCollaspsed) {\n        var className = isCollaspsed ? cls.CONTENT_ROW_CLASS + ' ' + cls.COLLAPSED_CLASS : cls.CONTENT_ROW_CLASS;\n        var tr = createElement('tr', { className: className, attrs: { 'aria-expanded': 'true' } });\n        for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {\n            var column = _a[_i];\n            if (this.isColumnVisible(column)) {\n                var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var className_1 = index === -1 ? cls.CONTENT_CELLS_CLASS : cls.CONTENT_CELLS_CLASS + ' ' + cls.COLLAPSED_CLASS;\n                var dragClass = (column.allowDrag ? ' ' + cls.DRAG_CLASS : '') + (column.allowDrop ? ' ' + cls.DROP_CLASS\n                    + ' ' + cls.DROPPABLE_CLASS : '');\n                var td = createElement('td', {\n                    className: className_1 + dragClass,\n                    attrs: { 'data-role': 'kanban-column', 'data-key': column.keyField.toString(), 'aria-expanded': 'true',\n                        'tabindex': '0', 'role': 'navigation' }\n                });\n                if (column.allowToggle && !column.isExpanded || index !== -1) {\n                    addClass([td], cls.COLLAPSED_CLASS);\n                    var text = (column.showItemCount ? '[' +\n                        this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + '] ' : '') + column.headerText;\n                    td.appendChild(createElement('div', { className: cls.COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));\n                    td.setAttribute('aria-expanded', 'false');\n                }\n                if (column.showAddButton) {\n                    var button = createElement('div', { className: cls.SHOW_ADD_BUTTON, attrs: { 'tabindex': '-1' } });\n                    button.appendChild(createElement('div', { className: cls.SHOW_ADD_ICON + ' ' + cls.ICON_CLASS }));\n                    td.appendChild(button);\n                }\n                tr.appendChild(td);\n            }\n        }\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'contentRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.initializeSwimlaneTree = function () {\n        if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {\n            this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];\n            this.renderSwimlaneTree();\n            this.parent.element.querySelector('.' + cls.TOOLBAR_SWIMLANE_NAME_CLASS).innerHTML = this.swimlaneRow[0].textField;\n        }\n    };\n    LayoutRender.prototype.renderSwimlaneRow = function (tBody, row, isCollapsed) {\n        var name = cls.CONTENT_ROW_CLASS + ' ' + cls.SWIMLANE_ROW_CLASS;\n        var className = isCollapsed ? ' ' + cls.COLLAPSED_CLASS : '';\n        var tr = createElement('tr', {\n            className: name + className, attrs: { 'data-key': row.keyField, 'aria-expanded': (!isCollapsed).toString() }\n        });\n        var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;\n        var td = createElement('td', {\n            className: cls.CONTENT_CELLS_CLASS, attrs: { 'data-role': 'kanban-column', 'colspan': col.toString() }\n        });\n        var swimlaneHeader = createElement('div', { className: cls.SWIMLANE_HEADER_CLASS });\n        td.appendChild(swimlaneHeader);\n        var iconClass = isCollapsed ? cls.SWIMLANE_ROW_COLLAPSE_CLASS : cls.SWIMLANE_ROW_EXPAND_CLASS;\n        var iconDiv = createElement('div', {\n            className: cls.ICON_CLASS + ' ' + iconClass, attrs: {\n                'tabindex': '0',\n                'aria-label': isCollapsed ? row.keyField + ' Collapse' : row.keyField + ' Expand'\n            }\n        });\n        swimlaneHeader.appendChild(iconDiv);\n        var headerWrap = createElement('div', { className: cls.HEADER_WRAP_CLASS });\n        swimlaneHeader.appendChild(headerWrap);\n        var cardCount = this.swimlaneData[row.keyField].length;\n        if (this.parent.swimlaneSettings.template) {\n            var templateArgs = extend({}, row, { count: cardCount }, true);\n            addClass([td], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_swimlaneTemplate';\n            var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, 'swimlaneTemplate', templateId, false);\n            append(swimlaneTemplate, headerWrap);\n        }\n        else {\n            headerWrap.appendChild(createElement('div', {\n                className: cls.SWIMLANE_ROW_TEXT_CLASS,\n                innerHTML: row.textField,\n                attrs: { 'data-role': row.textField }\n            }));\n        }\n        if (this.parent.swimlaneSettings.showItemCount) {\n            swimlaneHeader.appendChild(createElement('div', {\n                className: cls.CARD_ITEM_COUNT_CLASS,\n                innerHTML: \"- \" + cardCount.toString() + \" \" + this.parent.localeObj.getConstant('items')\n            }));\n        }\n        tr.appendChild(td);\n        var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];\n        var args = { data: dataObj, element: tr, cancel: false, requestType: 'swimlaneRow' };\n        this.parent.trigger(events.queryCellInfo, args, function (columnArgs) {\n            if (!columnArgs.cancel) {\n                if (tBody.classList.contains('e-swimlane-row')) {\n                    tBody.insertAdjacentElement('beforebegin', tr);\n                }\n                else {\n                    tBody.appendChild(tr);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCards = function () {\n        var _this = this;\n        var rows = this.swimlaneRow;\n        var cardRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row:not(.e-swimlane-row)'));\n        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.e-content-row.e-swimlane-row'));\n        var removeTrs = [];\n        cardRows.forEach(function (tr, index) {\n            var dataCount = 0;\n            var _loop_2 = function (column) {\n                if (_this.isColumnVisible(column)) {\n                    var columnData = _this.parent.swimlaneSettings.keyField ?\n                        _this.getColumnData(column.keyField, _this.swimlaneData[rows[index].keyField]) : _this.columnData[column.keyField];\n                    dataCount += columnData.length;\n                    var columnWrapper = tr.querySelector('[data-key=\"' + column.keyField + '\"]');\n                    var cardWrapper_1 = createElement('div', {\n                        className: cls.CARD_WRAPPER_CLASS, attrs: { 'role': 'listbox' }\n                    });\n                    columnWrapper.appendChild(cardWrapper_1);\n                    if (columnData.length > 0) {\n                        var _loop_3 = function (data) {\n                            var cardText = data[_this.parent.cardSettings.headerField];\n                            var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);\n                            var cardElement = _this.renderCard(data);\n                            if (cardIndex !== -1) {\n                                cardElement.setAttribute('aria-selected', 'true');\n                                addClass([cardElement], cls.CARD_SELECTION_CLASS);\n                            }\n                            var args = { data: data, element: cardElement, cancel: false };\n                            _this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                                if (!cardArgs.cancel) {\n                                    cardWrapper_1.appendChild(cardElement);\n                                }\n                            });\n                        };\n                        for (var _i = 0, _a = columnData; _i < _a.length; _i++) {\n                            var data = _a[_i];\n                            _loop_3(data);\n                        }\n                    }\n                    else {\n                        cardWrapper_1.appendChild(_this.renderEmptyCard());\n                    }\n                }\n            };\n            for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {\n                var column = _a[_i];\n                _loop_2(column);\n            }\n            if (dataCount === 0) {\n                removeTrs.push(tr);\n                if (swimlaneRows.length > 0) {\n                    removeTrs.push(swimlaneRows[index]);\n                }\n            }\n        });\n        if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {\n            removeTrs.forEach(function (tr) { return remove(tr); });\n        }\n    };\n    LayoutRender.prototype.renderCard = function (data) {\n        var cardElement = createElement('div', {\n            className: cls.CARD_CLASS,\n            attrs: {\n                'data-id': data[this.parent.cardSettings.headerField], 'data-key': data[this.parent.keyField],\n                'aria-selected': 'false', 'tabindex': '-1', 'role': 'option'\n            }\n        });\n        if (this.parent.cardSettings.template) {\n            addClass([cardElement], cls.TEMPLATE_CLASS);\n            var templateId = this.parent.element.id + '_cardTemplate';\n            var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, 'cardTemplate', templateId, false);\n            append(cardTemplate, cardElement);\n        }\n        else {\n            var tooltipClass = this.parent.enableTooltip ? ' ' + cls.TOOLTIP_TEXT_CLASS : '';\n            if (this.parent.cardSettings.showHeader) {\n                var cardHeader = createElement('div', { className: cls.CARD_HEADER_CLASS });\n                var cardCaption = createElement('div', { className: cls.CARD_HEADER_TEXT_CLASS });\n                var cardText = createElement('div', {\n                    className: cls.CARD_HEADER_TITLE_CLASS + tooltipClass,\n                    innerHTML: data[this.parent.cardSettings.headerField] || ''\n                });\n                cardHeader.appendChild(cardCaption);\n                cardCaption.appendChild(cardText);\n                cardElement.appendChild(cardHeader);\n            }\n            var cardContent = createElement('div', {\n                className: cls.CARD_CONTENT_CLASS + tooltipClass,\n                innerHTML: data[this.parent.cardSettings.contentField] || ''\n            });\n            cardElement.appendChild(cardContent);\n            if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {\n                var cardTags = createElement('div', { className: cls.CARD_TAGS_CLASS });\n                var tags = data[this.parent.cardSettings.tagsField].toString().split(',');\n                for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n                    var tag = tags_1[_i];\n                    cardTags.appendChild(createElement('div', {\n                        className: cls.CARD_TAG_CLASS + ' ' + cls.CARD_LABEL_CLASS, innerHTML: tag\n                    }));\n                }\n                cardElement.appendChild(cardTags);\n            }\n            if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {\n                addClass([cardElement], cls.CARD_COLOR_CLASS);\n                cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];\n            }\n            if (this.parent.cardSettings.footerCssField) {\n                var cardFields = createElement('div', { className: cls.CARD_FOOTER_CLASS });\n                var keys = data[this.parent.cardSettings.footerCssField].split(',');\n                for (var _a = 0, keys_1 = keys; _a < keys_1.length; _a++) {\n                    var key = keys_1[_a];\n                    cardFields.appendChild(createElement('div', {\n                        className: key.trim() + ' ' + cls.CARD_FOOTER_CSS_CLASS\n                    }));\n                }\n                cardElement.appendChild(cardFields);\n            }\n        }\n        return cardElement;\n    };\n    LayoutRender.prototype.renderEmptyCard = function () {\n        var emptyCard = createElement('span', {\n            className: cls.EMPTY_CARD_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noCard')\n        });\n        return emptyCard;\n    };\n    LayoutRender.prototype.renderColGroup = function (table) {\n        var _this = this;\n        var colGroup = createElement('colgroup');\n        this.parent.columns.forEach(function (column) {\n            if (_this.isColumnVisible(column)) {\n                var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());\n                var isToggle = column.allowToggle && !column.isExpanded;\n                var className = index === -1 ? (isToggle ? cls.COLLAPSED_CLASS : '') : cls.COLLAPSED_CLASS;\n                var col = createElement('col', {\n                    className: className,\n                    attrs: { 'data-key': column.keyField.toString() },\n                    styles: _this.parent.isAdaptive ? 'width: ' +\n                        (isToggle ? formatUnit(events.toggleWidth) : formatUnit(_this.getWidth())) : ''\n                });\n                colGroup.appendChild(col);\n            }\n        });\n        table.appendChild(colGroup);\n    };\n    LayoutRender.prototype.getRows = function () {\n        var _this = this;\n        var kanbanRows = [];\n        if (this.parent.swimlaneSettings.keyField) {\n            this.parent.kanbanData.map(function (obj) {\n                if (!_this.parent.swimlaneSettings.showEmptyRow) {\n                    if ((isNullOrUndefined(obj[_this.parent.keyField])) || (obj[_this.parent.keyField] === '') ||\n                        (obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1)) {\n                        return;\n                    }\n                }\n                var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];\n                var keyField = obj[_this.parent.swimlaneSettings.keyField];\n                if (!obj[_this.parent.swimlaneSettings.keyField]) {\n                    if (_this.parent.swimlaneSettings.showUnassignedRow) {\n                        textField = _this.parent.localeObj.getConstant('unassigned');\n                        keyField = '';\n                    }\n                    else {\n                        return;\n                    }\n                }\n                kanbanRows.push({ keyField: keyField, textField: textField });\n            });\n            kanbanRows = kanbanRows.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.keyField; }).indexOf(item.keyField);\n            });\n            kanbanRows = this.swimlaneSorting(kanbanRows);\n            kanbanRows.forEach(function (row) {\n                row.count = _this.parent.kanbanData.filter(function (obj) {\n                    return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 &&\n                        obj[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                }).length;\n            });\n            if (kanbanRows.length === 0) {\n                kanbanRows.push({ keyField: '', textField: '' });\n            }\n        }\n        else {\n            kanbanRows.push({ keyField: '', textField: '' });\n        }\n        return kanbanRows;\n    };\n    LayoutRender.prototype.swimlaneSorting = function (rows) {\n        if (this.parent.swimlaneSettings.sortComparer) {\n            rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);\n        }\n        else {\n            rows.sort(function (a, b) { return a.textField.localeCompare(b.textField, undefined, { numeric: true }); });\n            if (this.parent.swimlaneSettings.sortDirection === 'Descending') {\n                rows.reverse();\n            }\n        }\n        return rows;\n    };\n    LayoutRender.prototype.createStackedRow = function (rows) {\n        var tr = createElement('tr', { className: cls.HEADER_ROW_CLASS + ' ' + cls.STACKED_HEADER_ROW_CLASS });\n        var stackedHeaders = [];\n        this.parent.columns.forEach(function (column) {\n            var headerText = '';\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {\n                    headerText = row.text;\n                }\n            }\n            stackedHeaders.push(headerText);\n        });\n        for (var h = 0; h < stackedHeaders.length; h++) {\n            var colSpan = 1;\n            for (var j = h + 1; j < stackedHeaders.length; j++) {\n                if ((stackedHeaders[h] !== '') && (stackedHeaders[j] !== '') && stackedHeaders[h] === stackedHeaders[j]) {\n                    colSpan++;\n                }\n                else {\n                    break;\n                }\n            }\n            var div = createElement('div', { className: cls.HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h] });\n            var th = createElement('th', {\n                className: cls.HEADER_CELLS_CLASS + ' ' + cls.STACKED_HEADER_CELL_CLASS,\n                attrs: { 'colspan': colSpan.toString() }\n            });\n            tr.appendChild(th).appendChild(div);\n            h += colSpan - 1;\n        }\n        return tr;\n    };\n    LayoutRender.prototype.scrollUiUpdate = function () {\n        var _this = this;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        var height = this.parent.element.offsetHeight - header.offsetHeight;\n        if (this.parent.isAdaptive) {\n            height = window.innerHeight - (header.offsetHeight + events.bottomSpace);\n            var swimlaneToolbar = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n            if (swimlaneToolbar) {\n                height -= swimlaneToolbar.offsetHeight;\n            }\n            var cardWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS));\n            cardWrappers.forEach(function (cell) {\n                var cardWrapper = cell.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n                if (!cardWrapper.classList.contains(cls.MULTI_CARD_WRAPPER_CLASS)) {\n                    cardWrapper.style.height = formatUnit(height);\n                    EventHandler.add(cell, 'touchmove', _this.onAdaptiveScroll, _this);\n                }\n            });\n        }\n        if (this.parent.height !== 'auto' && this.parent.height !== '100%') {\n            content.style.height = formatUnit(height);\n        }\n        [].slice.call(header.children).forEach(function (node) {\n            var paddingValue = 0;\n            if ((content.offsetWidth - content.clientWidth) > 0) {\n                paddingValue = 17;\n                if ((content.offsetHeight - content.clientHeight) > 0) {\n                    node.style.width = formatUnit(content.clientWidth);\n                }\n            }\n            if (_this.parent.enableRtl) {\n                node.style.paddingLeft = formatUnit(paddingValue);\n            }\n            else {\n                node.style.paddingRight = formatUnit(paddingValue);\n            }\n        });\n        this.updateScrollPosition();\n    };\n    LayoutRender.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (node) { node.scrollLeft = target.scrollLeft; });\n        this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };\n        if (!isNullOrUndefined(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {\n            this.frozenRows(e);\n        }\n    };\n    LayoutRender.prototype.addFrozenSwimlaneDataKey = function (currentElem) {\n        var frozenKey = currentElem.getAttribute('data-key');\n        if (!isNullOrUndefined(frozenKey)) {\n            this.frozenSwimlaneRow.setAttribute('data-key', frozenKey);\n        }\n    };\n    LayoutRender.prototype.frozenRows = function (e) {\n        var firstSwimlane = this.parent.element.querySelector('.' + cls.SWIMLANE_ROW_CLASS);\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (isNullOrUndefined(this.frozenSwimlaneRow)) {\n            this.frozenSwimlaneRow = createElement('div', { className: cls.FROZEN_SWIMLANE_ROW_CLASS });\n            var frozenRow = createElement('div', { className: cls.FROZEN_ROW_CLASS });\n            this.frozenSwimlaneRow.appendChild(frozenRow);\n            this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);\n            frozenRow.appendChild(firstSwimlane.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n            this.addFrozenSwimlaneDataKey(firstSwimlane);\n            setStyleAttribute(this.frozenSwimlaneRow, { height: formatUnit(firstSwimlane.getBoundingClientRect().height),\n                width: formatUnit(content.querySelector('.e-swimlane').getBoundingClientRect().width),\n                top: formatUnit(header.getBoundingClientRect().height.toString())\n            });\n            setStyleAttribute(header, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n            setStyleAttribute(content, { position: 'relative', top: formatUnit((-this.frozenSwimlaneRow.getBoundingClientRect().height)) });\n        }\n        else {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.SWIMLANE_ROW_CLASS));\n            var curSwim = swimlaneRows[this.frozenOrder];\n            var prevSwim = swimlaneRows[this.frozenOrder - 1];\n            var nextSwim = swimlaneRows[this.frozenOrder + 1];\n            var curSwimHeight = void 0;\n            var prevSwimHeight = void 0;\n            var nextSwimHeight = void 0;\n            if (curSwim) {\n                curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;\n            }\n            if (prevSwim) {\n                prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;\n            }\n            if (nextSwim) {\n                nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;\n            }\n            var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;\n            var frozenRowsElement = this.frozenSwimlaneRow.querySelector('.' + cls.FROZEN_ROW_CLASS);\n            if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(nextSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(nextSwim);\n                }\n                ++this.frozenOrder;\n            }\n            else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {\n                if (frozenRowsElement) {\n                    remove(frozenRowsElement.querySelector('.' + cls.SWIMLANE_HEADER_CLASS));\n                    frozenRowsElement.appendChild(prevSwim.querySelector('.' + cls.SWIMLANE_HEADER_CLASS).cloneNode(true));\n                    this.addFrozenSwimlaneDataKey(prevSwim);\n                }\n                --this.frozenOrder;\n            }\n        }\n        if (e && e.target.scrollTop == 0) {\n            this.removeFrozenRows();\n        }\n    };\n    LayoutRender.prototype.removeFrozenRows = function () {\n        remove(this.frozenSwimlaneRow);\n        this.frozenSwimlaneRow = null;\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        setStyleAttribute(header, { position: '', top: '' });\n        setStyleAttribute(content, { position: '', top: '' });\n        this.parent.scrollPosition.content = { left: this.parent.scrollPosition.content.left, top: 0 };\n        content.scrollTop = 0;\n        this.frozenOrder = 0;\n    };\n    LayoutRender.prototype.onColumnScroll = function (e) {\n        var target = e.target;\n        if (target.offsetParent) {\n            var columnKey = target.offsetParent.getAttribute('data-key');\n            this.parent.scrollPosition.column[columnKey] = { left: target.scrollLeft, top: target.scrollTop };\n        }\n    };\n    LayoutRender.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {\n            e.preventDefault();\n        }\n    };\n    /**\n     * Check column is visible or not.\n     *\n     * @param {ColumnsModel} column - specifies the column.\n     * @returns {boolean}\n     * @private\n     * @hidden\n     */\n    LayoutRender.prototype.isColumnVisible = function (column) {\n        var _this = this;\n        var isVisible = false;\n        var isNumeric = typeof column.keyField === 'number';\n        if (isNumeric) {\n            isVisible = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;\n        }\n        else {\n            column.keyField.split(',').forEach(function (key) { isVisible = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1; });\n        }\n        return isVisible;\n    };\n    LayoutRender.prototype.renderLimits = function (column, target) {\n        var limits = createElement('div', { className: cls.LIMITS_CLASS });\n        if (column.minCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MIN_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('min') + ': ' + column.minCount.toString()\n            }));\n        }\n        if (column.maxCount) {\n            limits.appendChild(createElement('div', {\n                className: cls.MAX_COUNT_CLASS,\n                innerHTML: this.parent.localeObj.getConstant('max') + ': ' + column.maxCount.toString()\n            }));\n        }\n        if (limits.childElementCount > 0) {\n            if (target.querySelector('.' + cls.CARD_WRAPPER_CLASS)) {\n                target.insertBefore(limits, target.firstElementChild);\n            }\n            else {\n                target.appendChild(limits);\n            }\n        }\n    };\n    LayoutRender.prototype.renderValidation = function () {\n        var _this = this;\n        this.parent.columns.forEach(function (column) {\n            if (!column.minCount && !column.maxCount) {\n                return;\n            }\n            var cardData = _this.columnData[column.keyField];\n            var keySelector = \"[data-key=\\\"\" + column.keyField + \"\\\"]\";\n            var headerCell = _this.parent.element.querySelector(\".\" + (cls.HEADER_CELLS_CLASS + keySelector));\n            var rowCells = [].slice.call(_this.parent.element.querySelectorAll(\".\" + (cls.CONTENT_CELLS_CLASS + keySelector)));\n            if (_this.parent.constraintType === 'Swimlane' && _this.parent.swimlaneSettings.keyField) {\n                _this.swimlaneRow.forEach(function (row, index) {\n                    _this.renderLimits(column, rowCells[index]);\n                    var rowCards = cardData.filter(function (card) {\n                        return card[_this.parent.swimlaneSettings.keyField] === row.keyField;\n                    });\n                    var colorClass = _this.getValidationClass(column, rowCards.length);\n                    if (colorClass) {\n                        addClass([rowCells[index]], colorClass);\n                    }\n                });\n            }\n            else {\n                _this.renderLimits(column, headerCell);\n                var colorClass = _this.getValidationClass(column, cardData.length);\n                if (colorClass) {\n                    addClass(rowCells.concat(headerCell), colorClass);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.getValidationClass = function (column, count) {\n        var colorClass;\n        if (column.maxCount && count > column.maxCount) {\n            colorClass = cls.MAX_COLOR_CLASS;\n        }\n        else if (column.minCount && count < column.minCount) {\n            colorClass = cls.MIN_COLOR_CLASS;\n        }\n        return colorClass;\n    };\n    LayoutRender.prototype.refreshValidation = function () {\n        var validations = [].slice.call(this.parent.element.querySelectorAll('.' + cls.LIMITS_CLASS));\n        validations.forEach(function (node) { remove(node); });\n        var minClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MIN_COLOR_CLASS));\n        removeClass(minClass, cls.MIN_COLOR_CLASS);\n        var maxClass = [].slice.call(this.parent.element.querySelectorAll('.' + cls.MAX_COLOR_CLASS));\n        removeClass(maxClass, cls.MAX_COLOR_CLASS);\n        this.renderValidation();\n    };\n    LayoutRender.prototype.getColumnData = function (columnValue, dataSource) {\n        var _this = this;\n        if (dataSource === void 0) { dataSource = this.parent.kanbanData; }\n        var cardData = [];\n        var isNumeric = typeof columnValue === 'number';\n        if (isNumeric) {\n            var keyData = dataSource.filter(function (cardObj) {\n                return cardObj[_this.parent.keyField] === columnValue;\n            });\n            cardData = cardData.concat(keyData);\n        }\n        else {\n            var columnKeys = columnValue.split(',');\n            var _loop_4 = function (key) {\n                var keyData = dataSource.filter(function (cardObj) {\n                    return cardObj[_this.parent.keyField] === key.trim();\n                });\n                cardData = cardData.concat(keyData);\n            };\n            for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {\n                var key = columnKeys_1[_i];\n                _loop_4(key);\n            }\n        }\n        this.sortCategory(cardData);\n        return cardData;\n    };\n    LayoutRender.prototype.sortCategory = function (cardData) {\n        var key = this.parent.cardSettings.headerField;\n        var direction = this.parent.sortSettings.direction;\n        switch (this.parent.sortSettings.sortBy) {\n            case 'DataSourceOrder':\n                this.sortOrder(key, direction, cardData);\n                break;\n            case 'Custom':\n            case 'Index':\n                if (this.parent.sortSettings.field) {\n                    key = this.parent.sortSettings.field;\n                }\n                this.sortOrder(key, direction, cardData);\n                break;\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.sortOrder = function (key, direction, cardData) {\n        var isNumeric = true;\n        if (this.parent.kanbanData.length > 0) {\n            isNumeric = typeof (this.parent.kanbanData[0])[key] === 'number';\n        }\n        if (!isNumeric && this.parent.sortSettings.sortBy === 'Index') {\n            return cardData;\n        }\n        var first;\n        var second;\n        cardData = cardData.sort(function (firstData, secondData) {\n            if (!isNumeric) {\n                first = firstData[key].toLowerCase();\n                second = secondData[key].toLowerCase();\n            }\n            else {\n                first = firstData[key];\n                second = secondData[key];\n            }\n            return (first > second) ? 1 : ((second > first) ? -1 : 0);\n        });\n        if (direction === 'Descending') {\n            cardData.reverse();\n        }\n        return cardData;\n    };\n    LayoutRender.prototype.documentClick = function (args) {\n        if (args.target.classList.contains(cls.SWIMLANE_OVERLAY_CLASS) &&\n            this.parent.element.querySelector('.' + cls.SWIMLANE_RESOURCE_CLASS).classList.contains('e-popup-open')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], 'e-enable');\n        }\n        if (closest(args.target, \".\" + cls.ROOT_CLASS)) {\n            return;\n        }\n        var cards = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.CARD_CLASS + \".\" + cls.CARD_SELECTION_CLASS));\n        removeClass(cards, cls.CARD_SELECTION_CLASS);\n        this.disableAttributeSelection(cards);\n    };\n    LayoutRender.prototype.disableAttributeSelection = function (cards) {\n        if (cards instanceof Element) {\n            cards.setAttribute('aria-selected', 'false');\n        }\n        else {\n            cards.forEach(function (card) { card.setAttribute('aria-selected', 'false'); });\n        }\n    };\n    LayoutRender.prototype.getColumnCards = function (data) {\n        var _this = this;\n        var columnData = {};\n        this.columnKeys = [];\n        this.parent.columns.forEach(function (column) {\n            var isNumeric = typeof column.keyField === 'number';\n            if (isNumeric) {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());\n            }\n            else {\n                _this.columnKeys = _this.columnKeys.concat(column.keyField.split(',').map(function (e) { return e.trim(); }));\n            }\n            var cardData = _this.getColumnData(column.keyField, data);\n            columnData[column.keyField] = cardData;\n        });\n        return columnData;\n    };\n    LayoutRender.prototype.getSwimlaneCards = function () {\n        var _this = this;\n        var swimlaneData = {};\n        if (this.parent.swimlaneSettings.keyField) {\n            this.kanbanRows.forEach(function (row) {\n                return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function (obj) {\n                    return !isNullOrUndefined(obj[_this.parent.keyField]) && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 &&\n                        ((!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow) ?\n                            '' : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;\n                });\n            });\n        }\n        return swimlaneData;\n    };\n    LayoutRender.prototype.refreshHeaders = function () {\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        [].slice.call(header.children).forEach(function (child) { return remove(child); });\n        this.renderHeader(header);\n    };\n    LayoutRender.prototype.refreshCards = function () {\n        this.parent.resetTemplates(['cardTemplate']);\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cards.forEach(function (card) { return remove(card); });\n        this.renderCards();\n        this.wireDragEvent();\n        this.parent.renderTemplates();\n    };\n    LayoutRender.prototype.refresh = function () {\n        var _this = this;\n        var isColumnTemplateRefreshed = false;\n        this.parent.columns.forEach(function (column) {\n            if (column.showItemCount) {\n                if (column && column.template && !isColumnTemplateRefreshed) {\n                    _this.refreshHeaders();\n                    isColumnTemplateRefreshed = true;\n                }\n                var countSelector = \".\" + cls.HEADER_CELLS_CLASS + \"[data-key=\\\"\" + column.keyField + \"\\\"] .\" + cls.CARD_ITEM_COUNT_CLASS;\n                var itemCount = _this.parent.element.querySelector(countSelector);\n                if (itemCount) {\n                    var isNumeric = typeof column.keyField === 'number';\n                    var cardLength = 0;\n                    if (isNumeric) {\n                        cardLength = ([].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + column.keyField + '\\\"]'))).length;\n                    }\n                    else {\n                        var keys = column.keyField.split(',');\n                        for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {\n                            var key = keys_2[_i];\n                            var cards = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.CARD_CLASS + '[data-key=\\\"' + key.trim() + '\\\"]'));\n                            cardLength = cards.length + cardLength;\n                        }\n                    }\n                    itemCount.innerHTML = '- ' + cardLength + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            }\n        });\n        if (this.parent.swimlaneSettings.keyField) {\n            var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.SWIMLANE_ROW_CLASS));\n            swimlaneRows.forEach(function (swimlane) {\n                var swimlaneKey = swimlane.getAttribute('data-key');\n                var itemCount = swimlane.querySelector(\".\" + cls.CARD_ITEM_COUNT_CLASS);\n                if (itemCount && swimlaneKey) {\n                    var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll('.' + cls.CARD_CLASS));\n                    itemCount.innerHTML = '- ' + cards.length + ' ' + _this.parent.localeObj.getConstant('items');\n                }\n            });\n        }\n        this.refreshValidation();\n    };\n    LayoutRender.prototype.updateScrollPosition = function () {\n        var _this = this;\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (wrapper.offsetParent) {\n                var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')];\n                if (scrollData) {\n                    wrapper.scrollTo(scrollData.left, scrollData.top);\n                }\n            }\n        });\n    };\n    LayoutRender.prototype.renderCardBasedOnIndex = function (data, index) {\n        var _this = this;\n        var key = data[this.parent.keyField];\n        var cardRow = this.parent.element.querySelector('.e-content-row:not(.e-swimlane-row)');\n        if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {\n            var rowSelector = \".e-content-row.e-swimlane-row[data-key=\\\"\" + data[this.parent.swimlaneSettings.keyField] + \"\\\"]\";\n            if (this.parent.element.querySelector(rowSelector)) {\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n            }\n            else {\n                var columnIndex = this.columnKeys.indexOf(key);\n                if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {\n                    var index_1 = this.kanbanRows.findIndex(function (rowData) { return rowData['keyField'] === data[_this.parent.swimlaneSettings.keyField]; });\n                    var swim = [].slice.call(this.parent.element.querySelectorAll('.e-swimlane-row'));\n                    var swimRow = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n                    if (swim[index_1]) {\n                        swimRow = swim[index_1];\n                    }\n                    this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);\n                    this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);\n                }\n                cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;\n                [].slice.call(cardRow.children).forEach(function (cell) {\n                    var cardWrapper = createElement('div', { className: cls.CARD_WRAPPER_CLASS });\n                    cell.appendChild(cardWrapper);\n                    cardWrapper.appendChild(_this.renderEmptyCard());\n                });\n            }\n        }\n        if (this.parent.sortSettings.sortBy !== 'Index') {\n            var field_1 = this.parent.cardSettings.headerField;\n            if (this.parent.sortSettings.sortBy === 'Custom') {\n                field_1 = this.parent.sortSettings.field;\n            }\n            if (isNullOrUndefined(this.parent.swimlaneSettings.keyField)) {\n                index = this.getColumnData(key, this.parent.kanbanData).findIndex(function (colData) {\n                    return colData[field_1] === data[field_1];\n                });\n            }\n            else {\n                var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);\n                index = this.getColumnData(key, swimlaneDatas).findIndex(function (colData) { return colData[field_1] === data[field_1]; });\n            }\n        }\n        else if (this.parent.sortSettings.sortBy === 'Index' &&\n            this.parent.sortSettings.field && this.parent.sortSettings.direction === 'Ascending') {\n            index = data[this.parent.sortSettings.field] - 1;\n        }\n        if (cardRow) {\n            var td = [].slice.call(cardRow.children).filter(function (e) {\n                return e.getAttribute('data-key').replace(/\\s/g, '').split(',').indexOf(key.toString().replace(/\\s/g, '')) !== -1;\n            })[0];\n            var cardWrapper_2 = td.querySelector('.' + cls.CARD_WRAPPER_CLASS);\n            var emptyCard = cardWrapper_2.querySelector('.' + cls.EMPTY_CARD_CLASS);\n            if (emptyCard) {\n                remove(emptyCard);\n            }\n            var cardElement_1 = this.renderCard(data);\n            if (this.parent.allowDragAndDrop && td.classList.contains(cls.DRAG_CLASS)) {\n                this.parent.dragAndDropModule.wireDragEvents(cardElement_1);\n                addClass([cardElement_1], cls.DROPPABLE_CLASS);\n            }\n            var args = { data: data, element: cardElement_1, cancel: false };\n            this.parent.trigger(events.cardRendered, args, function (cardArgs) {\n                if (!cardArgs.cancel) {\n                    if (isNullOrUndefined(index) || cardWrapper_2.children.length === 0) {\n                        cardWrapper_2.appendChild(cardElement_1);\n                    }\n                    else {\n                        cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);\n                    }\n                }\n            });\n        }\n    };\n    LayoutRender.prototype.removeCard = function (data) {\n        var cardKey = data[this.parent.cardSettings.headerField];\n        var cardElement = this.parent.element.querySelector(\".\" + cls.CARD_CLASS + \"[data-id=\\\"\" + cardKey + \"\\\"]\");\n        this.isSelectedCard = cardElement.classList.contains(cls.CARD_SELECTION_CLASS) ? true : false;\n        var cardContainer = cardElement.parentElement;\n        if (cardElement) {\n            remove(cardElement);\n        }\n        if (cardContainer.querySelectorAll('.' + cls.CARD_CLASS + ':not(.' + cls.CLONED_CARD_CLASS + ')').length === 0) {\n            cardContainer.appendChild(this.renderEmptyCard());\n        }\n    };\n    LayoutRender.prototype.wireEvents = function () {\n        var _this = this;\n        EventHandler.add(this.parent.element, 'click', this.parent.actionModule.clickHandler, this.parent.actionModule);\n        EventHandler.add(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler, this.parent.actionModule);\n        EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        EventHandler.add(content, 'scroll', this.onContentScroll, this);\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) {\n            if (_this.parent.isInitialRender && wrapper.offsetParent) {\n                _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute('data-key')] = { left: 0, top: 0 };\n            }\n            EventHandler.add(wrapper, 'scroll', _this.onColumnScroll, _this);\n        });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.wireTouchEvents();\n            content.scrollLeft = this.scrollLeft;\n        }\n        this.wireDragEvent();\n    };\n    LayoutRender.prototype.unWireEvents = function () {\n        var _this = this;\n        EventHandler.remove(this.parent.element, 'click', this.parent.actionModule.clickHandler);\n        EventHandler.remove(this.parent.element, 'dblclick', this.parent.actionModule.doubleClickHandler);\n        EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            EventHandler.remove(content, 'scroll', this.onContentScroll);\n            if (this.parent.allowDragAndDrop) {\n                this.unWireDragEvent();\n            }\n        }\n        var cardWrapper = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CARD_WRAPPER_CLASS));\n        cardWrapper.forEach(function (wrapper) { EventHandler.remove(wrapper, 'scroll', _this.onColumnScroll); });\n        if (this.parent.isAdaptive) {\n            this.parent.touchModule.unWireTouchEvents();\n        }\n    };\n    LayoutRender.prototype.wireDragEvent = function () {\n        var _this = this;\n        if (this.parent.allowDragAndDrop) {\n            var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n                + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n            addClass(cards, cls.DROPPABLE_CLASS);\n            cards.forEach(function (card) { return _this.parent.dragAndDropModule.wireDragEvents(card); });\n        }\n    };\n    LayoutRender.prototype.unWireDragEvent = function () {\n        var _this = this;\n        var cards = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_CELLS_CLASS\n            + '.' + cls.DRAG_CLASS + ' .' + cls.CARD_CLASS));\n        removeClass(cards, cls.DROPPABLE_CLASS);\n        cards.forEach(function (card) { return _this.parent.dragAndDropModule.unWireDragEvents(card); });\n    };\n    LayoutRender.prototype.destroy = function () {\n        this.parent.resetTemplates();\n        this.parent.off(events.dataReady, this.initRender);\n        this.parent.off(events.contentReady, this.scrollUiUpdate);\n        this.unWireEvents();\n        var header = this.parent.element.querySelector('.' + cls.HEADER_CLASS);\n        if (header) {\n            remove(header);\n        }\n        var content = this.parent.element.querySelector('.' + cls.CONTENT_CLASS);\n        if (content) {\n            remove(content);\n        }\n        if (this.treeViewObj) {\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n        }\n        var swimlaneToolBarEle = this.parent.element.querySelector('.' + cls.SWIMLANE_HEADER_CLASS);\n        if (swimlaneToolBarEle) {\n            remove(swimlaneToolBarEle);\n        }\n        var swimlaneContent = this.parent.element.querySelector('.' + cls.SWIMLANE_CONTENT_CLASS);\n        if (swimlaneContent) {\n            remove(swimlaneContent);\n        }\n    };\n    return LayoutRender;\n}(MobileLayout));\nexport { LayoutRender };\n"],"mappings":"AAAA,IAAIA,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;EACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;IAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;MAAEC,SAAS,EAAE;IAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;IAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;MAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIA,CAAC,CAACM,cAAc,CAACD,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAAE,CAAC;IAC9E,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;EAC9B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACnBF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IACnB,SAASO,EAAEA,CAAA,EAAG;MAAE,IAAI,CAACC,WAAW,GAAGT,CAAC;IAAE;IACtCA,CAAC,CAACU,SAAS,GAAGT,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACS,MAAM,CAACV,CAAC,CAAC,IAAIO,EAAE,CAACE,SAAS,GAAGT,CAAC,CAACS,SAAS,EAAE,IAAIF,EAAE,CAAC,CAAC,CAAC;EACxF,CAAC;AACL,CAAC,CAAE,CAAC;AACJ;AACA,SAASI,MAAM,EAAEC,aAAa,EAAEC,UAAU,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,iBAAiB,EAAEC,WAAW,EAAEC,OAAO,EAAEC,iBAAiB,QAAQ,sBAAsB;AACrL,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,OAAO,KAAKC,MAAM,MAAM,kBAAkB;AAC1C,OAAO,KAAKC,GAAG,MAAM,sBAAsB;AAC3C;AACA;AACA;AACA;AACA,IAAIC,YAAY,GAAG,aAAe,UAAUC,MAAM,EAAE;EAChD9B,SAAS,CAAC6B,YAAY,EAAEC,MAAM,CAAC;EAC/B,SAASD,YAAYA,CAACE,MAAM,EAAE;IAC1B,IAAIC,KAAK,GAAGF,MAAM,CAACG,IAAI,CAAC,IAAI,EAAEF,MAAM,CAAC,IAAI,IAAI;IAC7CC,KAAK,CAACE,UAAU,GAAG,EAAE;IACrBF,KAAK,CAACD,MAAM,GAAGA,MAAM;IACrBC,KAAK,CAACG,UAAU,GAAG,EAAE;IACrBH,KAAK,CAACI,aAAa,GAAG,CAAC;IACvBJ,KAAK,CAACK,YAAY,GAAG,CAAC,CAAC;IACvBL,KAAK,CAACM,UAAU,GAAG,CAAC;IACpBN,KAAK,CAACO,WAAW,GAAG,CAAC;IACrBP,KAAK,CAACD,MAAM,CAACS,EAAE,CAACb,MAAM,CAACc,SAAS,EAAET,KAAK,CAACU,UAAU,EAAEV,KAAK,CAAC;IAC1DA,KAAK,CAACD,MAAM,CAACS,EAAE,CAACb,MAAM,CAACgB,YAAY,EAAEX,KAAK,CAACY,cAAc,EAAEZ,KAAK,CAAC;IACjE,OAAOA,KAAK;EAChB;EACAH,YAAY,CAACjB,SAAS,CAAC8B,UAAU,GAAG,YAAY;IAC5C,IAAI,IAAI,CAACX,MAAM,CAACc,OAAO,CAACC,MAAM,KAAK,CAAC,EAAE;MAClC;IACJ;IACA,IAAI,CAACC,UAAU,GAAG,IAAI,CAACC,cAAc,CAAC,CAAC;IACvC,IAAI,CAACd,UAAU,GAAG,IAAI,CAACe,OAAO,CAAC,CAAC;IAChC,IAAI,CAACZ,YAAY,GAAG,IAAI,CAACa,gBAAgB,CAAC,CAAC;IAC3C,IAAI,IAAI,CAACnB,MAAM,CAACoB,UAAU,EAAE;MACxB,IAAIC,QAAQ,GAAG,IAAI,CAACrB,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;MACzE,IAAIH,QAAQ,EAAE;QACV,IAAI,CAACd,UAAU,GAAGc,QAAQ,CAACd,UAAU;MACzC;IACJ;IACA,IAAI,CAACkB,OAAO,CAAC,CAAC;IACd,IAAI,CAACzB,MAAM,CAACS,EAAE,CAACb,MAAM,CAACc,SAAS,EAAE,IAAI,CAACC,UAAU,EAAE,IAAI,CAAC;IACvD,IAAI,CAACX,MAAM,CAACS,EAAE,CAACb,MAAM,CAACgB,YAAY,EAAE,IAAI,CAACC,cAAc,EAAE,IAAI,CAAC;IAC9D,IAAI,IAAI,CAACb,MAAM,CAACoB,UAAU,IAAI,IAAI,CAACpB,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,IAAI,IAAI,CAAC3B,MAAM,CAAC4B,UAAU,CAACb,MAAM,KAAK,CAAC,EAAE;MACxG,IAAI,CAACc,oBAAoB,CAAC,CAAC;IAC/B;IACA,IAAIC,MAAM,GAAG9C,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAACmC;IAAa,CAAC,CAAC;IAClE,IAAI,CAAChC,MAAM,CAACsB,OAAO,CAACW,WAAW,CAACH,MAAM,CAAC;IACvC,IAAI,CAACI,YAAY,CAACJ,MAAM,CAAC;IACzB,IAAI,CAACK,aAAa,CAAC,CAAC;IACpB,IAAI,CAACC,WAAW,CAAC,CAAC;IAClB,IAAI,CAACC,gBAAgB,CAAC,CAAC;IACvB,IAAI,CAACrC,MAAM,CAACsC,eAAe,CAAC,CAAC;IAC7B,IAAI,CAACtC,MAAM,CAACuC,MAAM,CAAC3C,MAAM,CAACgB,YAAY,EAAE,CAAC,CAAC,CAAC;IAC3C,IAAI,CAAC4B,UAAU,CAAC,CAAC;IACjB,IAAI,IAAI,CAACxC,MAAM,CAACyC,eAAe,EAAE;MAC7B,IAAI,CAACzC,MAAM,CAACyC,eAAe,GAAG,KAAK;IACvC;EACJ,CAAC;EACD3C,YAAY,CAACjB,SAAS,CAACqD,YAAY,GAAG,UAAUJ,MAAM,EAAE;IACpD,IAAIY,UAAU,GAAG1D,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAE,IAAI,CAAC/B,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,GAAG9B,GAAG,CAAC8C,cAAc,GAAG;IAAG,CAAC,CAAC;IACrHb,MAAM,CAACG,WAAW,CAACS,UAAU,CAAC;IAC9B,IAAIE,WAAW,GAAG5D,aAAa,CAAC,OAAO,EAAE;MACrC+C,SAAS,EAAElC,GAAG,CAACgD,WAAW,GAAG,GAAG,GAAGhD,GAAG,CAACiD,kBAAkB;MACzDC,KAAK,EAAE;QAAE,MAAM,EAAE;MAAe;IACpC,CAAC,CAAC;IACFL,UAAU,CAACT,WAAW,CAACW,WAAW,CAAC;IACnC,IAAI,CAACI,cAAc,CAACJ,WAAW,CAAC;IAChC,IAAIK,SAAS,GAAGjE,aAAa,CAAC,OAAO,CAAC;IACtC4D,WAAW,CAACX,WAAW,CAACgB,SAAS,CAAC;IAClC,IAAI,IAAI,CAACjD,MAAM,CAACkD,cAAc,CAACnC,MAAM,GAAG,CAAC,EAAE;MACvCkC,SAAS,CAAChB,WAAW,CAAC,IAAI,CAACkB,gBAAgB,CAAC,IAAI,CAACnD,MAAM,CAACkD,cAAc,CAAC,CAAC;IAC5E;IACA,IAAIE,EAAE,GAAGpE,aAAa,CAAC,IAAI,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAACwD;IAAiB,CAAC,CAAC;IACjEJ,SAAS,CAAChB,WAAW,CAACmB,EAAE,CAAC;IACzB,IAAIE,OAAO,GAAG,SAAAA,CAAUC,MAAM,EAAE;MAC5B,IAAIC,MAAM,CAACC,eAAe,CAACF,MAAM,CAAC,EAAE;QAChC,IAAIG,KAAK,GAAGF,MAAM,CAACxD,MAAM,CAAC2D,YAAY,CAACC,iBAAiB,CAACC,OAAO,CAACN,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC;QAC5F,IAAIC,IAAI,GAAG/E,aAAa,CAAC,IAAI,EAAE;UAC3B+C,SAAS,EAAE2B,KAAK,KAAK,CAAC,CAAC,GAAG7D,GAAG,CAACmE,kBAAkB,GAAGnE,GAAG,CAACmE,kBAAkB,GAAG,GAAG,GAAGnE,GAAG,CAACoE,eAAe;UACrGlB,KAAK,EAAE;YAAE,WAAW,EAAE,eAAe;YAAE,UAAU,EAAEQ,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC;UAAE;QAClF,CAAC,CAAC;QACF,IAAII,SAAS,GAAG,EAAE;QAClB,IAAIX,MAAM,CAACY,WAAW,EAAE;UACpBD,SAAS,CAACE,IAAI,CAACvE,GAAG,CAACwE,uBAAuB,CAAC;UAC3C,IAAI,CAACd,MAAM,CAACe,UAAU,EAAE;YACpBJ,SAAS,CAACE,IAAI,CAACvE,GAAG,CAACoE,eAAe,CAAC;UACvC;QACJ;QACA9E,QAAQ,CAAC,CAAC4E,IAAI,CAAC,EAAEG,SAAS,CAAC;QAC3B,IAAIK,aAAa,GAAGvF,aAAa,CAAC,KAAK,EAAE;UAAE+C,SAAS,EAAElC,GAAG,CAAC2E;QAAkB,CAAC,CAAC;QAC9ET,IAAI,CAAC9B,WAAW,CAACsC,aAAa,CAAC;QAC/B,IAAIE,QAAQ,GAAGjB,MAAM,CAACxC,UAAU,CAACuC,MAAM,CAAC5B,QAAQ,CAAC,CAACZ,MAAM;QACxD,IAAI2D,WAAW,GAAG1F,aAAa,CAAC,KAAK,EAAE;UAAE+C,SAAS,EAAElC,GAAG,CAAC8E;QAAmB,CAAC,CAAC;QAC7EJ,aAAa,CAACtC,WAAW,CAACyC,WAAW,CAAC;QACtC,IAAInB,MAAM,CAACqB,QAAQ,EAAE;UACjB,IAAIC,YAAY,GAAG;YACflD,QAAQ,EAAE4B,MAAM,CAAC5B,QAAQ;YAAEmD,UAAU,EAAEvB,MAAM,CAACuB,UAAU;YAAEC,QAAQ,EAAExB,MAAM,CAACwB,QAAQ;YAAEC,QAAQ,EAAEzB,MAAM,CAACyB,QAAQ;YAC9Gb,WAAW,EAAEZ,MAAM,CAACY,WAAW;YAAEG,UAAU,EAAEf,MAAM,CAACe,UAAU;YAAEW,aAAa,EAAE1B,MAAM,CAAC0B,aAAa;YAAEC,KAAK,EAAET;UAChH,CAAC;UACDtF,QAAQ,CAAC,CAAC4E,IAAI,CAAC,EAAElE,GAAG,CAACsF,cAAc,CAAC;UACpC,IAAIC,UAAU,GAAG5B,MAAM,CAACxD,MAAM,CAACsB,OAAO,CAAC+D,EAAE,GAAG,iBAAiB;UAC7D,IAAIC,cAAc,GAAG9B,MAAM,CAACxD,MAAM,CAACuF,cAAc,CAAChC,MAAM,CAACqB,QAAQ,CAAC,CAACC,YAAY,EAAErB,MAAM,CAACxD,MAAM,EAAE,gBAAgB,EAAEoF,UAAU,EAAE,KAAK,CAAC;UACpIrG,MAAM,CAACuG,cAAc,EAAEZ,WAAW,CAAC;QACvC,CAAC,MACI;UACD,IAAIc,QAAQ,GAAGxG,aAAa,CAAC,KAAK,EAAE;YAAE+C,SAAS,EAAElC,GAAG,CAAC4F,iBAAiB;YAAEC,SAAS,EAAEnC,MAAM,CAACuB;UAAW,CAAC,CAAC;UACvGJ,WAAW,CAACzC,WAAW,CAACuD,QAAQ,CAAC;UACjC,IAAIjC,MAAM,CAAC0B,aAAa,EAAE;YACtB,IAAIU,SAAS,GAAG3G,aAAa,CAAC,KAAK,EAAE;cACjC+C,SAAS,EAAElC,GAAG,CAAC+F,qBAAqB;cACpCF,SAAS,EAAE,IAAI,GAAGjB,QAAQ,CAACX,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAGN,MAAM,CAACxD,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,OAAO;YAC7F,CAAC,CAAC;YACFpB,WAAW,CAACzC,WAAW,CAAC0D,SAAS,CAAC;UACtC;QACJ;QACA,IAAIpC,MAAM,CAACY,WAAW,EAAE;UACpB,IAAI4B,QAAQ,GAAIxC,MAAM,CAACe,UAAU,IAAIZ,KAAK,KAAK,CAAC,CAAC,GAAI,IAAI,GAAG,KAAK;UACjE,IAAIsC,MAAM,GAAID,QAAQ,GAAIlG,GAAG,CAACoG,mBAAmB,GAAGpG,GAAG,CAACqG,qBAAqB;UAC7E,IAAIC,IAAI,GAAGnH,aAAa,CAAC,KAAK,EAAE;YAC5B+C,SAAS,EAAElC,GAAG,CAACuG,iBAAiB,GAAG,GAAG,GAAGvG,GAAG,CAACwG,UAAU,GAAG,GAAG,GAAGL,MAAM;YACtEjD,KAAK,EAAE;cAAE,UAAU,EAAE;YAAI;UAC7B,CAAC,CAAC;UACFoD,IAAI,CAACG,YAAY,CAAC,YAAY,EAAEP,QAAQ,GAAGxC,MAAM,CAAC5B,QAAQ,GAAG,SAAS,GAAG4B,MAAM,CAAC5B,QAAQ,GAAG,WAAW,CAAC;UACvGoC,IAAI,CAACuC,YAAY,CAAC,eAAe,EAAEP,QAAQ,CAACjC,QAAQ,CAAC,CAAC,CAAC;UACvDS,aAAa,CAACtC,WAAW,CAACkE,IAAI,CAAC;QACnC;QACA,IAAII,OAAO,GAAG,CAAC;UAAE5E,QAAQ,EAAE4B,MAAM,CAAC5B,QAAQ;UAAE6E,SAAS,EAAEjD,MAAM,CAACuB,UAAU;UAAEI,KAAK,EAAET;QAAS,CAAC,CAAC;QAC5F,IAAIgC,IAAI,GAAG;UAAEC,IAAI,EAAEH,OAAO;UAAEjF,OAAO,EAAE8B,EAAE;UAAEuD,MAAM,EAAE,KAAK;UAAEC,WAAW,EAAE;QAAY,CAAC;QAClFpD,MAAM,CAACxD,MAAM,CAAC6G,OAAO,CAACjH,MAAM,CAACkH,aAAa,EAAEL,IAAI,EAAE,UAAUM,UAAU,EAAE;UACpE,IAAI,CAACA,UAAU,CAACJ,MAAM,EAAE;YACpBvD,EAAE,CAACnB,WAAW,CAAC8B,IAAI,CAAC;UACxB;QACJ,CAAC,CAAC;MACN;IACJ,CAAC;IACD,IAAIP,MAAM,GAAG,IAAI;IACjB,KAAK,IAAIwD,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACjH,MAAM,CAACc,OAAO,EAAEkG,EAAE,GAAGC,EAAE,CAAClG,MAAM,EAAEiG,EAAE,EAAE,EAAE;MAC7D,IAAIzD,MAAM,GAAG0D,EAAE,CAACD,EAAE,CAAC;MACnB1D,OAAO,CAACC,MAAM,CAAC;IACnB;EACJ,CAAC;EACDzD,YAAY,CAACjB,SAAS,CAACsD,aAAa,GAAG,YAAY;IAC/C,IAAI+E,OAAO,GAAGlI,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAAC2B;IAAc,CAAC,CAAC;IACpE,IAAI,CAACxB,MAAM,CAACsB,OAAO,CAACW,WAAW,CAACiF,OAAO,CAAC;IACxC,IAAIC,WAAW,GAAGnI,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAE,IAAI,CAAC/B,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,GAAG9B,GAAG,CAAC8C,cAAc,GAAG;IAAG,CAAC,CAAC;IACtHuE,OAAO,CAACjF,WAAW,CAACkF,WAAW,CAAC;IAChC,IAAIC,YAAY,GAAGpI,aAAa,CAAC,OAAO,EAAE;MACtC+C,SAAS,EAAElC,GAAG,CAACgD,WAAW,GAAG,GAAG,GAAGhD,GAAG,CAACwH,mBAAmB;MAC1DtE,KAAK,EAAE;QAAE,MAAM,EAAE;MAAe;IACpC,CAAC,CAAC;IACFoE,WAAW,CAAClF,WAAW,CAACmF,YAAY,CAAC;IACrC,IAAI,CAACpE,cAAc,CAACoE,YAAY,CAAC;IACjC,IAAIE,KAAK,GAAGtI,aAAa,CAAC,OAAO,CAAC;IAClCoI,YAAY,CAACnF,WAAW,CAACqF,KAAK,CAAC;IAC/B,IAAIvF,SAAS;IACb,IAAIwF,YAAY,GAAG,KAAK;IACxB,IAAI,CAACC,WAAW,GAAG,IAAI,CAACrH,UAAU;IAClC,IAAI,CAACsH,sBAAsB,CAAC,CAAC;IAC7B,KAAK,IAAIT,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACO,WAAW,EAAER,EAAE,GAAGC,EAAE,CAAClG,MAAM,EAAEiG,EAAE,EAAE,EAAE;MAC1D,IAAIU,GAAG,GAAGT,EAAE,CAACD,EAAE,CAAC;MAChB,IAAI,IAAI,CAAChH,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,IAAI,IAAI,CAAC3B,MAAM,CAAC2H,mBAAmB,CAAC5G,MAAM,KAAK,CAAC,EAAE;QACvF,IAAI2C,KAAK,GAAG,IAAI,CAAC1D,MAAM,CAAC2H,mBAAmB,CAAC9D,OAAO,CAAC6D,GAAG,CAAC/F,QAAQ,CAAC;QACjE4F,YAAY,GAAG7D,KAAK,KAAK,CAAC,CAAC;MAC/B;MACA,IAAI,IAAI,CAAC1D,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,IAAI,CAAC,IAAI,CAAC3B,MAAM,CAACoB,UAAU,EAAE;QAClE,IAAI,CAACwG,iBAAiB,CAACN,KAAK,EAAEI,GAAG,EAAEH,YAAY,CAAC;MACpD;MACA,IAAI,CAACM,mBAAmB,CAACP,KAAK,EAAEI,GAAG,EAAEH,YAAY,CAAC;IACtD;EACJ,CAAC;EACDzH,YAAY,CAACjB,SAAS,CAACgJ,mBAAmB,GAAG,UAAUP,KAAK,EAAEI,GAAG,EAAEH,YAAY,EAAE;IAC7E,IAAIxF,SAAS,GAAGwF,YAAY,GAAG1H,GAAG,CAACiI,iBAAiB,GAAG,GAAG,GAAGjI,GAAG,CAACoE,eAAe,GAAGpE,GAAG,CAACiI,iBAAiB;IACxG,IAAI1E,EAAE,GAAGpE,aAAa,CAAC,IAAI,EAAE;MAAE+C,SAAS,EAAEA,SAAS;MAAEgB,KAAK,EAAE;QAAE,eAAe,EAAE;MAAO;IAAE,CAAC,CAAC;IAC1F,KAAK,IAAIiE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAG,IAAI,CAACjH,MAAM,CAACc,OAAO,EAAEkG,EAAE,GAAGC,EAAE,CAAClG,MAAM,EAAEiG,EAAE,EAAE,EAAE;MAC7D,IAAIzD,MAAM,GAAG0D,EAAE,CAACD,EAAE,CAAC;MACnB,IAAI,IAAI,CAACvD,eAAe,CAACF,MAAM,CAAC,EAAE;QAC9B,IAAIG,KAAK,GAAG,IAAI,CAAC1D,MAAM,CAAC2D,YAAY,CAACC,iBAAiB,CAACC,OAAO,CAACN,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC;QAC1F,IAAIiE,WAAW,GAAGrE,KAAK,KAAK,CAAC,CAAC,GAAG7D,GAAG,CAACmI,mBAAmB,GAAGnI,GAAG,CAACmI,mBAAmB,GAAG,GAAG,GAAGnI,GAAG,CAACoE,eAAe;QAC9G,IAAIgE,SAAS,GAAG,CAAC1E,MAAM,CAAC2E,SAAS,GAAG,GAAG,GAAGrI,GAAG,CAACsI,UAAU,GAAG,EAAE,KAAK5E,MAAM,CAAC6E,SAAS,GAAG,GAAG,GAAGvI,GAAG,CAACwI,UAAU,GACnG,GAAG,GAAGxI,GAAG,CAACyI,eAAe,GAAG,EAAE,CAAC;QACrC,IAAIC,EAAE,GAAGvJ,aAAa,CAAC,IAAI,EAAE;UACzB+C,SAAS,EAAEgG,WAAW,GAAGE,SAAS;UAClClF,KAAK,EAAE;YAAE,WAAW,EAAE,eAAe;YAAE,UAAU,EAAEQ,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC;YAAE,eAAe,EAAE,MAAM;YAClG,UAAU,EAAE,GAAG;YAAE,MAAM,EAAE;UAAa;QAC9C,CAAC,CAAC;QACF,IAAIP,MAAM,CAACY,WAAW,IAAI,CAACZ,MAAM,CAACe,UAAU,IAAIZ,KAAK,KAAK,CAAC,CAAC,EAAE;UAC1DvE,QAAQ,CAAC,CAACoJ,EAAE,CAAC,EAAE1I,GAAG,CAACoE,eAAe,CAAC;UACnC,IAAIuE,IAAI,GAAG,CAACjF,MAAM,CAAC0B,aAAa,GAAG,GAAG,GAClC,IAAI,CAACwD,aAAa,CAAClF,MAAM,CAAC5B,QAAQ,EAAE,IAAI,CAACrB,YAAY,CAACoH,GAAG,CAAC/F,QAAQ,CAAC,CAAC,CAACZ,MAAM,GAAG,IAAI,GAAG,EAAE,IAAIwC,MAAM,CAACuB,UAAU;UAChHyD,EAAE,CAACtG,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;YAAE+C,SAAS,EAAElC,GAAG,CAAC6I,0BAA0B;YAAEhD,SAAS,EAAE8C;UAAK,CAAC,CAAC,CAAC;UACpGD,EAAE,CAACjC,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;QAC7C;QACA,IAAI/C,MAAM,CAACoF,aAAa,EAAE;UACtB,IAAIC,MAAM,GAAG5J,aAAa,CAAC,KAAK,EAAE;YAAE+C,SAAS,EAAElC,GAAG,CAACgJ,eAAe;YAAE9F,KAAK,EAAE;cAAE,UAAU,EAAE;YAAK;UAAE,CAAC,CAAC;UAClG6F,MAAM,CAAC3G,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;YAAE+C,SAAS,EAAElC,GAAG,CAACiJ,aAAa,GAAG,GAAG,GAAGjJ,GAAG,CAACwG;UAAW,CAAC,CAAC,CAAC;UACjGkC,EAAE,CAACtG,WAAW,CAAC2G,MAAM,CAAC;QAC1B;QACAxF,EAAE,CAACnB,WAAW,CAACsG,EAAE,CAAC;MACtB;IACJ;IACA,IAAIhC,OAAO,GAAG,CAAC;MAAE5E,QAAQ,EAAE+F,GAAG,CAAC/F,QAAQ;MAAE6E,SAAS,EAAEkB,GAAG,CAAClB,SAAS;MAAEtB,KAAK,EAAEwC,GAAG,CAACxC;IAAM,CAAC,CAAC;IACtF,IAAIuB,IAAI,GAAG;MAAEC,IAAI,EAAEH,OAAO;MAAEjF,OAAO,EAAE8B,EAAE;MAAEuD,MAAM,EAAE,KAAK;MAAEC,WAAW,EAAE;IAAa,CAAC;IACnF,IAAI,CAAC5G,MAAM,CAAC6G,OAAO,CAACjH,MAAM,CAACkH,aAAa,EAAEL,IAAI,EAAE,UAAUM,UAAU,EAAE;MAClE,IAAI,CAACA,UAAU,CAACJ,MAAM,EAAE;QACpB,IAAIW,KAAK,CAACpD,SAAS,CAAC6E,QAAQ,CAAC,gBAAgB,CAAC,EAAE;UAC5CzB,KAAK,CAAC0B,qBAAqB,CAAC,aAAa,EAAE5F,EAAE,CAAC;QAClD,CAAC,MACI;UACDkE,KAAK,CAACrF,WAAW,CAACmB,EAAE,CAAC;QACzB;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACDtD,YAAY,CAACjB,SAAS,CAAC4I,sBAAsB,GAAG,YAAY;IACxD,IAAI,IAAI,CAACzH,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,IAAI,IAAI,CAAC3B,MAAM,CAACoB,UAAU,IAAI,IAAI,CAACpB,MAAM,CAAC4B,UAAU,CAACb,MAAM,KAAK,CAAC,EAAE;MACxG,IAAI,CAACyG,WAAW,GAAG,CAAC,IAAI,CAACrH,UAAU,CAAC,IAAI,CAACE,aAAa,CAAC,CAAC;MACxD,IAAI,CAAC4I,kBAAkB,CAAC,CAAC;MACzB,IAAI,CAACjJ,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACqJ,2BAA2B,CAAC,CAACxD,SAAS,GAAG,IAAI,CAAC8B,WAAW,CAAC,CAAC,CAAC,CAAChB,SAAS;IACtH;EACJ,CAAC;EACD1G,YAAY,CAACjB,SAAS,CAAC+I,iBAAiB,GAAG,UAAUN,KAAK,EAAEI,GAAG,EAAEyB,WAAW,EAAE;IAC1E,IAAIC,IAAI,GAAGvJ,GAAG,CAACiI,iBAAiB,GAAG,GAAG,GAAGjI,GAAG,CAACwJ,kBAAkB;IAC/D,IAAItH,SAAS,GAAGoH,WAAW,GAAG,GAAG,GAAGtJ,GAAG,CAACoE,eAAe,GAAG,EAAE;IAC5D,IAAIb,EAAE,GAAGpE,aAAa,CAAC,IAAI,EAAE;MACzB+C,SAAS,EAAEqH,IAAI,GAAGrH,SAAS;MAAEgB,KAAK,EAAE;QAAE,UAAU,EAAE2E,GAAG,CAAC/F,QAAQ;QAAE,eAAe,EAAE,CAAC,CAACwH,WAAW,EAAErF,QAAQ,CAAC;MAAE;IAC/G,CAAC,CAAC;IACF,IAAIwF,GAAG,GAAG,IAAI,CAACtJ,MAAM,CAACc,OAAO,CAACC,MAAM,GAAG,IAAI,CAACf,MAAM,CAAC2D,YAAY,CAAC4F,cAAc,CAACxI,MAAM;IACrF,IAAIwH,EAAE,GAAGvJ,aAAa,CAAC,IAAI,EAAE;MACzB+C,SAAS,EAAElC,GAAG,CAACmI,mBAAmB;MAAEjF,KAAK,EAAE;QAAE,WAAW,EAAE,eAAe;QAAE,SAAS,EAAEuG,GAAG,CAACxF,QAAQ,CAAC;MAAE;IACzG,CAAC,CAAC;IACF,IAAI0F,cAAc,GAAGxK,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAAC4J;IAAsB,CAAC,CAAC;IACnFlB,EAAE,CAACtG,WAAW,CAACuH,cAAc,CAAC;IAC9B,IAAIE,SAAS,GAAGP,WAAW,GAAGtJ,GAAG,CAAC8J,2BAA2B,GAAG9J,GAAG,CAAC+J,yBAAyB;IAC7F,IAAIC,OAAO,GAAG7K,aAAa,CAAC,KAAK,EAAE;MAC/B+C,SAAS,EAAElC,GAAG,CAACwG,UAAU,GAAG,GAAG,GAAGqD,SAAS;MAAE3G,KAAK,EAAE;QAChD,UAAU,EAAE,GAAG;QACf,YAAY,EAAEoG,WAAW,GAAGzB,GAAG,CAAC/F,QAAQ,GAAG,WAAW,GAAG+F,GAAG,CAAC/F,QAAQ,GAAG;MAC5E;IACJ,CAAC,CAAC;IACF6H,cAAc,CAACvH,WAAW,CAAC4H,OAAO,CAAC;IACnC,IAAInH,UAAU,GAAG1D,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAAC2E;IAAkB,CAAC,CAAC;IAC3EgF,cAAc,CAACvH,WAAW,CAACS,UAAU,CAAC;IACtC,IAAIoH,SAAS,GAAG,IAAI,CAACxJ,YAAY,CAACoH,GAAG,CAAC/F,QAAQ,CAAC,CAACZ,MAAM;IACtD,IAAI,IAAI,CAACf,MAAM,CAAC0B,gBAAgB,CAACkD,QAAQ,EAAE;MACvC,IAAIC,YAAY,GAAGxF,MAAM,CAAC,CAAC,CAAC,EAAEqI,GAAG,EAAE;QAAExC,KAAK,EAAE4E;MAAU,CAAC,EAAE,IAAI,CAAC;MAC9D3K,QAAQ,CAAC,CAACoJ,EAAE,CAAC,EAAE1I,GAAG,CAACsF,cAAc,CAAC;MAClC,IAAIC,UAAU,GAAG,IAAI,CAACpF,MAAM,CAACsB,OAAO,CAAC+D,EAAE,GAAG,mBAAmB;MAC7D,IAAI0E,gBAAgB,GAAG,IAAI,CAAC/J,MAAM,CAACuF,cAAc,CAAC,IAAI,CAACvF,MAAM,CAAC0B,gBAAgB,CAACkD,QAAQ,CAAC,CAACC,YAAY,EAAE,IAAI,CAAC7E,MAAM,EAAE,kBAAkB,EAAEoF,UAAU,EAAE,KAAK,CAAC;MAC1JrG,MAAM,CAACgL,gBAAgB,EAAErH,UAAU,CAAC;IACxC,CAAC,MACI;MACDA,UAAU,CAACT,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;QACxC+C,SAAS,EAAElC,GAAG,CAACmK,uBAAuB;QACtCtE,SAAS,EAAEgC,GAAG,CAAClB,SAAS;QACxBzD,KAAK,EAAE;UAAE,WAAW,EAAE2E,GAAG,CAAClB;QAAU;MACxC,CAAC,CAAC,CAAC;IACP;IACA,IAAI,IAAI,CAACxG,MAAM,CAAC0B,gBAAgB,CAACuD,aAAa,EAAE;MAC5CuE,cAAc,CAACvH,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;QAC5C+C,SAAS,EAAElC,GAAG,CAAC+F,qBAAqB;QACpCF,SAAS,EAAE,IAAI,GAAGoE,SAAS,CAAChG,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC9D,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,OAAO;MAC5F,CAAC,CAAC,CAAC;IACP;IACA1C,EAAE,CAACnB,WAAW,CAACsG,EAAE,CAAC;IAClB,IAAIhC,OAAO,GAAG,CAAC;MAAE5E,QAAQ,EAAE+F,GAAG,CAAC/F,QAAQ;MAAE6E,SAAS,EAAEkB,GAAG,CAAClB,SAAS;MAAEtB,KAAK,EAAEwC,GAAG,CAACxC;IAAM,CAAC,CAAC;IACtF,IAAIuB,IAAI,GAAG;MAAEC,IAAI,EAAEH,OAAO;MAAEjF,OAAO,EAAE8B,EAAE;MAAEuD,MAAM,EAAE,KAAK;MAAEC,WAAW,EAAE;IAAc,CAAC;IACpF,IAAI,CAAC5G,MAAM,CAAC6G,OAAO,CAACjH,MAAM,CAACkH,aAAa,EAAEL,IAAI,EAAE,UAAUM,UAAU,EAAE;MAClE,IAAI,CAACA,UAAU,CAACJ,MAAM,EAAE;QACpB,IAAIW,KAAK,CAACpD,SAAS,CAAC6E,QAAQ,CAAC,gBAAgB,CAAC,EAAE;UAC5CzB,KAAK,CAAC0B,qBAAqB,CAAC,aAAa,EAAE5F,EAAE,CAAC;QAClD,CAAC,MACI;UACDkE,KAAK,CAACrF,WAAW,CAACmB,EAAE,CAAC;QACzB;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACDtD,YAAY,CAACjB,SAAS,CAACuD,WAAW,GAAG,YAAY;IAC7C,IAAInC,KAAK,GAAG,IAAI;IAChB,IAAIgK,IAAI,GAAG,IAAI,CAACzC,WAAW;IAC3B,IAAI0C,QAAQ,GAAG,EAAE,CAACC,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,qCAAqC,CAAC,CAAC;IACzG,IAAIC,YAAY,GAAG,EAAE,CAACF,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,+BAA+B,CAAC,CAAC;IACvG,IAAIE,SAAS,GAAG,EAAE;IAClBJ,QAAQ,CAACK,OAAO,CAAC,UAAUnH,EAAE,EAAEM,KAAK,EAAE;MAClC,IAAI8G,SAAS,GAAG,CAAC;MACjB,IAAIC,OAAO,GAAG,SAAAA,CAAUlH,MAAM,EAAE;QAC5B,IAAItD,KAAK,CAACwD,eAAe,CAACF,MAAM,CAAC,EAAE;UAC/B,IAAIvC,UAAU,GAAGf,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,GACnD1B,KAAK,CAACwI,aAAa,CAAClF,MAAM,CAAC5B,QAAQ,EAAE1B,KAAK,CAACK,YAAY,CAAC2J,IAAI,CAACvG,KAAK,CAAC,CAAC/B,QAAQ,CAAC,CAAC,GAAG1B,KAAK,CAACe,UAAU,CAACuC,MAAM,CAAC5B,QAAQ,CAAC;UACtH6I,SAAS,IAAIxJ,UAAU,CAACD,MAAM;UAC9B,IAAI2J,aAAa,GAAGtH,EAAE,CAAC7B,aAAa,CAAC,aAAa,GAAGgC,MAAM,CAAC5B,QAAQ,GAAG,IAAI,CAAC;UAC5E,IAAIgJ,aAAa,GAAG3L,aAAa,CAAC,KAAK,EAAE;YACrC+C,SAAS,EAAElC,GAAG,CAAC+K,kBAAkB;YAAE7H,KAAK,EAAE;cAAE,MAAM,EAAE;YAAU;UAClE,CAAC,CAAC;UACF2H,aAAa,CAACzI,WAAW,CAAC0I,aAAa,CAAC;UACxC,IAAI3J,UAAU,CAACD,MAAM,GAAG,CAAC,EAAE;YACvB,IAAI8J,OAAO,GAAG,SAAAA,CAAUnE,IAAI,EAAE;cAC1B,IAAIoE,QAAQ,GAAGpE,IAAI,CAACzG,KAAK,CAACD,MAAM,CAAC+K,YAAY,CAACC,WAAW,CAAC;cAC1D,IAAIC,SAAS,GAAGhL,KAAK,CAACD,MAAM,CAAC2D,YAAY,CAACuH,cAAc,CAACrH,OAAO,CAACiH,QAAQ,CAAC;cAC1E,IAAIK,WAAW,GAAGlL,KAAK,CAACmL,UAAU,CAAC1E,IAAI,CAAC;cACxC,IAAIuE,SAAS,KAAK,CAAC,CAAC,EAAE;gBAClBE,WAAW,CAAC7E,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;gBACjDnH,QAAQ,CAAC,CAACgM,WAAW,CAAC,EAAEtL,GAAG,CAACwL,oBAAoB,CAAC;cACrD;cACA,IAAI5E,IAAI,GAAG;gBAAEC,IAAI,EAAEA,IAAI;gBAAEpF,OAAO,EAAE6J,WAAW;gBAAExE,MAAM,EAAE;cAAM,CAAC;cAC9D1G,KAAK,CAACD,MAAM,CAAC6G,OAAO,CAACjH,MAAM,CAAC0L,YAAY,EAAE7E,IAAI,EAAE,UAAU8E,QAAQ,EAAE;gBAChE,IAAI,CAACA,QAAQ,CAAC5E,MAAM,EAAE;kBAClBgE,aAAa,CAAC1I,WAAW,CAACkJ,WAAW,CAAC;gBAC1C;cACJ,CAAC,CAAC;YACN,CAAC;YACD,KAAK,IAAInE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGjG,UAAU,EAAEgG,EAAE,GAAGC,EAAE,CAAClG,MAAM,EAAEiG,EAAE,EAAE,EAAE;cACpD,IAAIN,IAAI,GAAGO,EAAE,CAACD,EAAE,CAAC;cACjB6D,OAAO,CAACnE,IAAI,CAAC;YACjB;UACJ,CAAC,MACI;YACDiE,aAAa,CAAC1I,WAAW,CAAChC,KAAK,CAACuL,eAAe,CAAC,CAAC,CAAC;UACtD;QACJ;MACJ,CAAC;MACD,KAAK,IAAIxE,EAAE,GAAG,CAAC,EAAEC,EAAE,GAAGhH,KAAK,CAACD,MAAM,CAACc,OAAO,EAAEkG,EAAE,GAAGC,EAAE,CAAClG,MAAM,EAAEiG,EAAE,EAAE,EAAE;QAC9D,IAAIzD,MAAM,GAAG0D,EAAE,CAACD,EAAE,CAAC;QACnByD,OAAO,CAAClH,MAAM,CAAC;MACnB;MACA,IAAIiH,SAAS,KAAK,CAAC,EAAE;QACjBF,SAAS,CAAClG,IAAI,CAAChB,EAAE,CAAC;QAClB,IAAIiH,YAAY,CAACtJ,MAAM,GAAG,CAAC,EAAE;UACzBuJ,SAAS,CAAClG,IAAI,CAACiG,YAAY,CAAC3G,KAAK,CAAC,CAAC;QACvC;MACJ;IACJ,CAAC,CAAC;IACF,IAAI,CAAC,IAAI,CAAC1D,MAAM,CAAC0B,gBAAgB,CAAC+J,YAAY,IAAK,IAAI,CAACzL,MAAM,CAAC4B,UAAU,CAACb,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAACf,MAAM,CAAC0L,eAAgB,EAAE;MACrHpB,SAAS,CAACC,OAAO,CAAC,UAAUnH,EAAE,EAAE;QAAE,OAAOhE,MAAM,CAACgE,EAAE,CAAC;MAAE,CAAC,CAAC;IAC3D;EACJ,CAAC;EACDtD,YAAY,CAACjB,SAAS,CAACuM,UAAU,GAAG,UAAU1E,IAAI,EAAE;IAChD,IAAIyE,WAAW,GAAGnM,aAAa,CAAC,KAAK,EAAE;MACnC+C,SAAS,EAAElC,GAAG,CAAC8L,UAAU;MACzB5I,KAAK,EAAE;QACH,SAAS,EAAE2D,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACC,WAAW,CAAC;QAAE,UAAU,EAAEtE,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC2B,QAAQ,CAAC;QAC7F,eAAe,EAAE,OAAO;QAAE,UAAU,EAAE,IAAI;QAAE,MAAM,EAAE;MACxD;IACJ,CAAC,CAAC;IACF,IAAI,IAAI,CAAC3B,MAAM,CAAC+K,YAAY,CAACnG,QAAQ,EAAE;MACnCzF,QAAQ,CAAC,CAACgM,WAAW,CAAC,EAAEtL,GAAG,CAACsF,cAAc,CAAC;MAC3C,IAAIC,UAAU,GAAG,IAAI,CAACpF,MAAM,CAACsB,OAAO,CAAC+D,EAAE,GAAG,eAAe;MACzD,IAAIuG,YAAY,GAAG,IAAI,CAAC5L,MAAM,CAACuF,cAAc,CAAC,IAAI,CAACvF,MAAM,CAAC+K,YAAY,CAACnG,QAAQ,CAAC,CAAC8B,IAAI,EAAE,IAAI,CAAC1G,MAAM,EAAE,cAAc,EAAEoF,UAAU,EAAE,KAAK,CAAC;MACtIrG,MAAM,CAAC6M,YAAY,EAAET,WAAW,CAAC;IACrC,CAAC,MACI;MACD,IAAIU,YAAY,GAAG,IAAI,CAAC7L,MAAM,CAAC8L,aAAa,GAAG,GAAG,GAAGjM,GAAG,CAACkM,kBAAkB,GAAG,EAAE;MAChF,IAAI,IAAI,CAAC/L,MAAM,CAAC+K,YAAY,CAACiB,UAAU,EAAE;QACrC,IAAIC,UAAU,GAAGjN,aAAa,CAAC,KAAK,EAAE;UAAE+C,SAAS,EAAElC,GAAG,CAACqM;QAAkB,CAAC,CAAC;QAC3E,IAAIC,WAAW,GAAGnN,aAAa,CAAC,KAAK,EAAE;UAAE+C,SAAS,EAAElC,GAAG,CAACuM;QAAuB,CAAC,CAAC;QACjF,IAAItB,QAAQ,GAAG9L,aAAa,CAAC,KAAK,EAAE;UAChC+C,SAAS,EAAElC,GAAG,CAACwM,uBAAuB,GAAGR,YAAY;UACrDnG,SAAS,EAAEgB,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACC,WAAW,CAAC,IAAI;QAC7D,CAAC,CAAC;QACFiB,UAAU,CAAChK,WAAW,CAACkK,WAAW,CAAC;QACnCA,WAAW,CAAClK,WAAW,CAAC6I,QAAQ,CAAC;QACjCK,WAAW,CAAClJ,WAAW,CAACgK,UAAU,CAAC;MACvC;MACA,IAAIK,WAAW,GAAGtN,aAAa,CAAC,KAAK,EAAE;QACnC+C,SAAS,EAAElC,GAAG,CAAC0M,kBAAkB,GAAGV,YAAY;QAChDnG,SAAS,EAAEgB,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACyB,YAAY,CAAC,IAAI;MAC9D,CAAC,CAAC;MACFrB,WAAW,CAAClJ,WAAW,CAACqK,WAAW,CAAC;MACpC,IAAI,IAAI,CAACtM,MAAM,CAAC+K,YAAY,CAAC0B,SAAS,IAAI/F,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAAC0B,SAAS,CAAC,EAAE;QAChF,IAAIC,QAAQ,GAAG1N,aAAa,CAAC,KAAK,EAAE;UAAE+C,SAAS,EAAElC,GAAG,CAAC8M;QAAgB,CAAC,CAAC;QACvE,IAAIC,IAAI,GAAGlG,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAAC0B,SAAS,CAAC,CAAC3I,QAAQ,CAAC,CAAC,CAAC+I,KAAK,CAAC,GAAG,CAAC;QACzE,KAAK,IAAI7F,EAAE,GAAG,CAAC,EAAE8F,MAAM,GAAGF,IAAI,EAAE5F,EAAE,GAAG8F,MAAM,CAAC/L,MAAM,EAAEiG,EAAE,EAAE,EAAE;UACtD,IAAI+F,GAAG,GAAGD,MAAM,CAAC9F,EAAE,CAAC;UACpB0F,QAAQ,CAACzK,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;YACtC+C,SAAS,EAAElC,GAAG,CAACmN,cAAc,GAAG,GAAG,GAAGnN,GAAG,CAACoN,gBAAgB;YAAEvH,SAAS,EAAEqH;UAC3E,CAAC,CAAC,CAAC;QACP;QACA5B,WAAW,CAAClJ,WAAW,CAACyK,QAAQ,CAAC;MACrC;MACA,IAAI,IAAI,CAAC1M,MAAM,CAAC+K,YAAY,CAACmC,YAAY,IAAIxG,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACmC,YAAY,CAAC,EAAE;QACtF/N,QAAQ,CAAC,CAACgM,WAAW,CAAC,EAAEtL,GAAG,CAACsN,gBAAgB,CAAC;QAC7ChC,WAAW,CAACiC,KAAK,CAACC,eAAe,GAAG3G,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACmC,YAAY,CAAC;MACnF;MACA,IAAI,IAAI,CAAClN,MAAM,CAAC+K,YAAY,CAACuC,cAAc,EAAE;QACzC,IAAIC,UAAU,GAAGvO,aAAa,CAAC,KAAK,EAAE;UAAE+C,SAAS,EAAElC,GAAG,CAAC2N;QAAkB,CAAC,CAAC;QAC3E,IAAIC,IAAI,GAAG/G,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACuC,cAAc,CAAC,CAACT,KAAK,CAAC,GAAG,CAAC;QACnE,KAAK,IAAI5F,EAAE,GAAG,CAAC,EAAEyG,MAAM,GAAGD,IAAI,EAAExG,EAAE,GAAGyG,MAAM,CAAC3M,MAAM,EAAEkG,EAAE,EAAE,EAAE;UACtD,IAAI0G,GAAG,GAAGD,MAAM,CAACzG,EAAE,CAAC;UACpBsG,UAAU,CAACtL,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;YACxC+C,SAAS,EAAE4L,GAAG,CAACC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG/N,GAAG,CAACgO;UACtC,CAAC,CAAC,CAAC;QACP;QACA1C,WAAW,CAAClJ,WAAW,CAACsL,UAAU,CAAC;MACvC;IACJ;IACA,OAAOpC,WAAW;EACtB,CAAC;EACDrL,YAAY,CAACjB,SAAS,CAAC2M,eAAe,GAAG,YAAY;IACjD,IAAIsC,SAAS,GAAG9O,aAAa,CAAC,MAAM,EAAE;MAClC+C,SAAS,EAAElC,GAAG,CAACkO,gBAAgB;MAC/BrI,SAAS,EAAE,IAAI,CAAC1F,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,QAAQ;IACzD,CAAC,CAAC;IACF,OAAOgI,SAAS;EACpB,CAAC;EACDhO,YAAY,CAACjB,SAAS,CAACmE,cAAc,GAAG,UAAUgL,KAAK,EAAE;IACrD,IAAI/N,KAAK,GAAG,IAAI;IAChB,IAAIgO,QAAQ,GAAGjP,aAAa,CAAC,UAAU,CAAC;IACxC,IAAI,CAACgB,MAAM,CAACc,OAAO,CAACyJ,OAAO,CAAC,UAAUhH,MAAM,EAAE;MAC1C,IAAItD,KAAK,CAACwD,eAAe,CAACF,MAAM,CAAC,EAAE;QAC/B,IAAIG,KAAK,GAAGzD,KAAK,CAACD,MAAM,CAAC2D,YAAY,CAACC,iBAAiB,CAACC,OAAO,CAACN,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC;QAC3F,IAAIoK,QAAQ,GAAG3K,MAAM,CAACY,WAAW,IAAI,CAACZ,MAAM,CAACe,UAAU;QACvD,IAAIvC,SAAS,GAAG2B,KAAK,KAAK,CAAC,CAAC,GAAIwK,QAAQ,GAAGrO,GAAG,CAACoE,eAAe,GAAG,EAAE,GAAIpE,GAAG,CAACoE,eAAe;QAC1F,IAAIqF,GAAG,GAAGtK,aAAa,CAAC,KAAK,EAAE;UAC3B+C,SAAS,EAAEA,SAAS;UACpBgB,KAAK,EAAE;YAAE,UAAU,EAAEQ,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC;UAAE,CAAC;UACjDqK,MAAM,EAAElO,KAAK,CAACD,MAAM,CAACoB,UAAU,GAAG,SAAS,IACtC8M,QAAQ,GAAGjP,UAAU,CAACW,MAAM,CAACwO,WAAW,CAAC,GAAGnP,UAAU,CAACgB,KAAK,CAACoO,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG;QACrF,CAAC,CAAC;QACFJ,QAAQ,CAAChM,WAAW,CAACqH,GAAG,CAAC;MAC7B;IACJ,CAAC,CAAC;IACF0E,KAAK,CAAC/L,WAAW,CAACgM,QAAQ,CAAC;EAC/B,CAAC;EACDnO,YAAY,CAACjB,SAAS,CAACqC,OAAO,GAAG,YAAY;IACzC,IAAIjB,KAAK,GAAG,IAAI;IAChB,IAAIE,UAAU,GAAG,EAAE;IACnB,IAAI,IAAI,CAACH,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,EAAE;MACvC,IAAI,CAAC3B,MAAM,CAAC4B,UAAU,CAAC0M,GAAG,CAAC,UAAUC,GAAG,EAAE;QACtC,IAAI,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAAC+J,YAAY,EAAE;UAC7C,IAAKlM,iBAAiB,CAACgP,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,CAAC,IAAM4M,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,KAAK,EAAG,IACrF4M,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,IAAI1B,KAAK,CAACG,UAAU,CAACyD,OAAO,CAAC0K,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,CAACmC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAE,EAAE;YACxG;UACJ;QACJ;QACA,IAAI0C,SAAS,GAAG+H,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAAC8E,SAAS,CAAC,IAAI+H,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC;QAC3G,IAAIA,QAAQ,GAAG4M,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC;QAC1D,IAAI,CAAC4M,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,EAAE;UAC9C,IAAI1B,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAAC8M,iBAAiB,EAAE;YACjDhI,SAAS,GAAGvG,KAAK,CAACD,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,YAAY,CAAC;YAC5DnE,QAAQ,GAAG,EAAE;UACjB,CAAC,MACI;YACD;UACJ;QACJ;QACAxB,UAAU,CAACiE,IAAI,CAAC;UAAEzC,QAAQ,EAAEA,QAAQ;UAAE6E,SAAS,EAAEA;QAAU,CAAC,CAAC;MACjE,CAAC,CAAC;MACFrG,UAAU,GAAGA,UAAU,CAACsO,MAAM,CAAC,UAAUC,IAAI,EAAEhL,KAAK,EAAEiL,GAAG,EAAE;QACvD,OAAOjL,KAAK,KAAKiL,GAAG,CAACL,GAAG,CAAC,UAAUI,IAAI,EAAE;UAAE,OAAOA,IAAI,CAAC/M,QAAQ;QAAE,CAAC,CAAC,CAACkC,OAAO,CAAC6K,IAAI,CAAC/M,QAAQ,CAAC;MAC9F,CAAC,CAAC;MACFxB,UAAU,GAAG,IAAI,CAACyO,eAAe,CAACzO,UAAU,CAAC;MAC7CA,UAAU,CAACoK,OAAO,CAAC,UAAU7C,GAAG,EAAE;QAC9BA,GAAG,CAACxC,KAAK,GAAGjF,KAAK,CAACD,MAAM,CAAC4B,UAAU,CAAC6M,MAAM,CAAC,UAAUF,GAAG,EAAE;UACtD,OAAOtO,KAAK,CAACG,UAAU,CAACyD,OAAO,CAAC0K,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,IAC5D4M,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,KAAK+F,GAAG,CAAC/F,QAAQ;QACpE,CAAC,CAAC,CAACZ,MAAM;MACb,CAAC,CAAC;MACF,IAAIZ,UAAU,CAACY,MAAM,KAAK,CAAC,EAAE;QACzBZ,UAAU,CAACiE,IAAI,CAAC;UAAEzC,QAAQ,EAAE,EAAE;UAAE6E,SAAS,EAAE;QAAG,CAAC,CAAC;MACpD;IACJ,CAAC,MACI;MACDrG,UAAU,CAACiE,IAAI,CAAC;QAAEzC,QAAQ,EAAE,EAAE;QAAE6E,SAAS,EAAE;MAAG,CAAC,CAAC;IACpD;IACA,OAAOrG,UAAU;EACrB,CAAC;EACDL,YAAY,CAACjB,SAAS,CAAC+P,eAAe,GAAG,UAAU3E,IAAI,EAAE;IACrD,IAAI,IAAI,CAACjK,MAAM,CAAC0B,gBAAgB,CAACmN,YAAY,EAAE;MAC3C5E,IAAI,GAAG,IAAI,CAACjK,MAAM,CAAC0B,gBAAgB,CAACmN,YAAY,CAAC3O,IAAI,CAAC,IAAI,CAACF,MAAM,EAAEiK,IAAI,CAAC;IAC5E,CAAC,MACI;MACDA,IAAI,CAAC6E,IAAI,CAAC,UAAUC,CAAC,EAAE3Q,CAAC,EAAE;QAAE,OAAO2Q,CAAC,CAACvI,SAAS,CAACwI,aAAa,CAAC5Q,CAAC,CAACoI,SAAS,EAAEyI,SAAS,EAAE;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;MAAE,CAAC,CAAC;MAC3G,IAAI,IAAI,CAAClP,MAAM,CAAC0B,gBAAgB,CAACyN,aAAa,KAAK,YAAY,EAAE;QAC7DlF,IAAI,CAACmF,OAAO,CAAC,CAAC;MAClB;IACJ;IACA,OAAOnF,IAAI;EACf,CAAC;EACDnK,YAAY,CAACjB,SAAS,CAACsE,gBAAgB,GAAG,UAAU8G,IAAI,EAAE;IACtD,IAAI7G,EAAE,GAAGpE,aAAa,CAAC,IAAI,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAACwD,gBAAgB,GAAG,GAAG,GAAGxD,GAAG,CAACwP;IAAyB,CAAC,CAAC;IACtG,IAAInM,cAAc,GAAG,EAAE;IACvB,IAAI,CAAClD,MAAM,CAACc,OAAO,CAACyJ,OAAO,CAAC,UAAUhH,MAAM,EAAE;MAC1C,IAAIuB,UAAU,GAAG,EAAE;MACnB,KAAK,IAAIkC,EAAE,GAAG,CAAC,EAAEsI,MAAM,GAAGrF,IAAI,EAAEjD,EAAE,GAAGsI,MAAM,CAACvO,MAAM,EAAEiG,EAAE,EAAE,EAAE;QACtD,IAAIU,GAAG,GAAG4H,MAAM,CAACtI,EAAE,CAAC;QACpB,IAAIU,GAAG,CAAC6H,SAAS,CAAC1L,OAAO,CAACN,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;UAC1DgB,UAAU,GAAG4C,GAAG,CAACc,IAAI;QACzB;MACJ;MACAtF,cAAc,CAACkB,IAAI,CAACU,UAAU,CAAC;IACnC,CAAC,CAAC;IACF,KAAK,IAAI0K,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtM,cAAc,CAACnC,MAAM,EAAEyO,CAAC,EAAE,EAAE;MAC5C,IAAIC,OAAO,GAAG,CAAC;MACf,KAAK,IAAIC,CAAC,GAAGF,CAAC,GAAG,CAAC,EAAEE,CAAC,GAAGxM,cAAc,CAACnC,MAAM,EAAE2O,CAAC,EAAE,EAAE;QAChD,IAAKxM,cAAc,CAACsM,CAAC,CAAC,KAAK,EAAE,IAAMtM,cAAc,CAACwM,CAAC,CAAC,KAAK,EAAG,IAAIxM,cAAc,CAACsM,CAAC,CAAC,KAAKtM,cAAc,CAACwM,CAAC,CAAC,EAAE;UACrGD,OAAO,EAAE;QACb,CAAC,MACI;UACD;QACJ;MACJ;MACA,IAAIE,GAAG,GAAG3Q,aAAa,CAAC,KAAK,EAAE;QAAE+C,SAAS,EAAElC,GAAG,CAAC4F,iBAAiB;QAAEC,SAAS,EAAExC,cAAc,CAACsM,CAAC;MAAE,CAAC,CAAC;MAClG,IAAII,EAAE,GAAG5Q,aAAa,CAAC,IAAI,EAAE;QACzB+C,SAAS,EAAElC,GAAG,CAACmE,kBAAkB,GAAG,GAAG,GAAGnE,GAAG,CAACgQ,yBAAyB;QACvE9M,KAAK,EAAE;UAAE,SAAS,EAAE0M,OAAO,CAAC3L,QAAQ,CAAC;QAAE;MAC3C,CAAC,CAAC;MACFV,EAAE,CAACnB,WAAW,CAAC2N,EAAE,CAAC,CAAC3N,WAAW,CAAC0N,GAAG,CAAC;MACnCH,CAAC,IAAIC,OAAO,GAAG,CAAC;IACpB;IACA,OAAOrM,EAAE;EACb,CAAC;EACDtD,YAAY,CAACjB,SAAS,CAACgC,cAAc,GAAG,YAAY;IAChD,IAAIZ,KAAK,GAAG,IAAI;IAChB,IAAI6B,MAAM,GAAG,IAAI,CAAC9B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACmC,YAAY,CAAC;IACtE,IAAIkF,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxE,IAAIsO,MAAM,GAAG,IAAI,CAAC9P,MAAM,CAACsB,OAAO,CAACyO,YAAY,GAAGjO,MAAM,CAACiO,YAAY;IACnE,IAAI,IAAI,CAAC/P,MAAM,CAACoB,UAAU,EAAE;MACxB0O,MAAM,GAAGE,MAAM,CAACC,WAAW,IAAInO,MAAM,CAACiO,YAAY,GAAGnQ,MAAM,CAACsQ,WAAW,CAAC;MACxE,IAAIC,eAAe,GAAG,IAAI,CAACnQ,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC;MACxF,IAAI0G,eAAe,EAAE;QACjBL,MAAM,IAAIK,eAAe,CAACJ,YAAY;MAC1C;MACA,IAAIK,YAAY,GAAG,EAAE,CAACjG,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACmI,mBAAmB,CAAC,CAAC;MACrGoI,YAAY,CAAC7F,OAAO,CAAC,UAAU8F,IAAI,EAAE;QACjC,IAAIC,WAAW,GAAGD,IAAI,CAAC9O,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC+K,kBAAkB,CAAC;QAClE,IAAI,CAAC0F,WAAW,CAACpM,SAAS,CAAC6E,QAAQ,CAAClJ,GAAG,CAAC0Q,wBAAwB,CAAC,EAAE;UAC/DD,WAAW,CAAClD,KAAK,CAAC0C,MAAM,GAAG7Q,UAAU,CAAC6Q,MAAM,CAAC;UAC7C5Q,YAAY,CAACsR,GAAG,CAACH,IAAI,EAAE,WAAW,EAAEpQ,KAAK,CAACwQ,gBAAgB,EAAExQ,KAAK,CAAC;QACtE;MACJ,CAAC,CAAC;IACN;IACA,IAAI,IAAI,CAACD,MAAM,CAAC8P,MAAM,KAAK,MAAM,IAAI,IAAI,CAAC9P,MAAM,CAAC8P,MAAM,KAAK,MAAM,EAAE;MAChE5I,OAAO,CAACkG,KAAK,CAAC0C,MAAM,GAAG7Q,UAAU,CAAC6Q,MAAM,CAAC;IAC7C;IACA,EAAE,CAAC3F,KAAK,CAACjK,IAAI,CAAC4B,MAAM,CAAC4O,QAAQ,CAAC,CAACnG,OAAO,CAAC,UAAUoG,IAAI,EAAE;MACnD,IAAIC,YAAY,GAAG,CAAC;MACpB,IAAK1J,OAAO,CAAC2J,WAAW,GAAG3J,OAAO,CAAC4J,WAAW,GAAI,CAAC,EAAE;QACjDF,YAAY,GAAG,EAAE;QACjB,IAAK1J,OAAO,CAAC6I,YAAY,GAAG7I,OAAO,CAAC6J,YAAY,GAAI,CAAC,EAAE;UACnDJ,IAAI,CAACvD,KAAK,CAAC4D,KAAK,GAAG/R,UAAU,CAACiI,OAAO,CAAC4J,WAAW,CAAC;QACtD;MACJ;MACA,IAAI7Q,KAAK,CAACD,MAAM,CAACiR,SAAS,EAAE;QACxBN,IAAI,CAACvD,KAAK,CAAC8D,WAAW,GAAGjS,UAAU,CAAC2R,YAAY,CAAC;MACrD,CAAC,MACI;QACDD,IAAI,CAACvD,KAAK,CAAC+D,YAAY,GAAGlS,UAAU,CAAC2R,YAAY,CAAC;MACtD;IACJ,CAAC,CAAC;IACF,IAAI,CAACQ,oBAAoB,CAAC,CAAC;EAC/B,CAAC;EACDtR,YAAY,CAACjB,SAAS,CAACwS,eAAe,GAAG,UAAUC,CAAC,EAAE;IAClD,IAAIC,MAAM,GAAGD,CAAC,CAACC,MAAM;IACrB,IAAIzP,MAAM,GAAG,IAAI,CAAC9B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACmC,YAAY,CAAC;IACtE,EAAE,CAACmI,KAAK,CAACjK,IAAI,CAAC4B,MAAM,CAAC4O,QAAQ,CAAC,CAACnG,OAAO,CAAC,UAAUoG,IAAI,EAAE;MAAEA,IAAI,CAACpQ,UAAU,GAAGgR,MAAM,CAAChR,UAAU;IAAE,CAAC,CAAC;IAChG,IAAI,CAACP,MAAM,CAACwR,cAAc,CAACtK,OAAO,GAAG;MAAEuK,IAAI,EAAEF,MAAM,CAAChR,UAAU;MAAEmR,GAAG,EAAEH,MAAM,CAACI;IAAU,CAAC;IACvF,IAAI,CAACpS,iBAAiB,CAAC,IAAI,CAACS,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,IAAI,IAAI,CAAC3B,MAAM,CAAC0B,gBAAgB,CAACkQ,gBAAgB,EAAE;MAC5G,IAAI,CAACC,UAAU,CAACP,CAAC,CAAC;IACtB;EACJ,CAAC;EACDxR,YAAY,CAACjB,SAAS,CAACiT,wBAAwB,GAAG,UAAUC,WAAW,EAAE;IACrE,IAAIC,SAAS,GAAGD,WAAW,CAACE,YAAY,CAAC,UAAU,CAAC;IACpD,IAAI,CAAC1S,iBAAiB,CAACyS,SAAS,CAAC,EAAE;MAC/B,IAAI,CAACE,iBAAiB,CAAC5L,YAAY,CAAC,UAAU,EAAE0L,SAAS,CAAC;IAC9D;EACJ,CAAC;EACDlS,YAAY,CAACjB,SAAS,CAACgT,UAAU,GAAG,UAAUP,CAAC,EAAE;IAC7C,IAAIa,aAAa,GAAG,IAAI,CAACnS,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACwJ,kBAAkB,CAAC;IACnF,IAAIvH,MAAM,GAAG,IAAI,CAAC9B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACmC,YAAY,CAAC;IACtE,IAAIkF,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxE,IAAIjC,iBAAiB,CAAC,IAAI,CAAC2S,iBAAiB,CAAC,EAAE;MAC3C,IAAI,CAACA,iBAAiB,GAAGlT,aAAa,CAAC,KAAK,EAAE;QAAE+C,SAAS,EAAElC,GAAG,CAACuS;MAA0B,CAAC,CAAC;MAC3F,IAAIC,SAAS,GAAGrT,aAAa,CAAC,KAAK,EAAE;QAAE+C,SAAS,EAAElC,GAAG,CAACyS;MAAiB,CAAC,CAAC;MACzE,IAAI,CAACJ,iBAAiB,CAACjQ,WAAW,CAACoQ,SAAS,CAAC;MAC7C,IAAI,CAACrS,MAAM,CAACsB,OAAO,CAACiR,YAAY,CAAC,IAAI,CAACL,iBAAiB,EAAE,IAAI,CAAClS,MAAM,CAACsB,OAAO,CAACkR,iBAAiB,CAAC;MAC/FH,SAAS,CAACpQ,WAAW,CAACkQ,aAAa,CAAC5Q,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC,CAACgJ,SAAS,CAAC,IAAI,CAAC,CAAC;MACnG,IAAI,CAACX,wBAAwB,CAACK,aAAa,CAAC;MAC5CzS,iBAAiB,CAAC,IAAI,CAACwS,iBAAiB,EAAE;QAAEpC,MAAM,EAAE7Q,UAAU,CAACkT,aAAa,CAACO,qBAAqB,CAAC,CAAC,CAAC5C,MAAM,CAAC;QACxGkB,KAAK,EAAE/R,UAAU,CAACiI,OAAO,CAAC3F,aAAa,CAAC,aAAa,CAAC,CAACmR,qBAAqB,CAAC,CAAC,CAAC1B,KAAK,CAAC;QACrFU,GAAG,EAAEzS,UAAU,CAAC6C,MAAM,CAAC4Q,qBAAqB,CAAC,CAAC,CAAC5C,MAAM,CAAChM,QAAQ,CAAC,CAAC;MACpE,CAAC,CAAC;MACFpE,iBAAiB,CAACoC,MAAM,EAAE;QAAE6Q,QAAQ,EAAE,UAAU;QAAEjB,GAAG,EAAEzS,UAAU,CAAE,CAAC,IAAI,CAACiT,iBAAiB,CAACQ,qBAAqB,CAAC,CAAC,CAAC5C,MAAO;MAAE,CAAC,CAAC;MAC9HpQ,iBAAiB,CAACwH,OAAO,EAAE;QAAEyL,QAAQ,EAAE,UAAU;QAAEjB,GAAG,EAAEzS,UAAU,CAAE,CAAC,IAAI,CAACiT,iBAAiB,CAACQ,qBAAqB,CAAC,CAAC,CAAC5C,MAAO;MAAE,CAAC,CAAC;IACnI,CAAC,MACI;MACD,IAAIzF,YAAY,GAAG,EAAE,CAACF,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACwJ,kBAAkB,CAAC,CAAC;MACpG,IAAIuJ,OAAO,GAAGvI,YAAY,CAAC,IAAI,CAAC7J,WAAW,CAAC;MAC5C,IAAIqS,QAAQ,GAAGxI,YAAY,CAAC,IAAI,CAAC7J,WAAW,GAAG,CAAC,CAAC;MACjD,IAAIsS,QAAQ,GAAGzI,YAAY,CAAC,IAAI,CAAC7J,WAAW,GAAG,CAAC,CAAC;MACjD,IAAIuS,aAAa,GAAG,KAAK,CAAC;MAC1B,IAAIC,cAAc,GAAG,KAAK,CAAC;MAC3B,IAAIC,cAAc,GAAG,KAAK,CAAC;MAC3B,IAAIL,OAAO,EAAE;QACTG,aAAa,GAAGH,OAAO,CAACF,qBAAqB,CAAC,CAAC,CAAChB,GAAG,GAAGkB,OAAO,CAACF,qBAAqB,CAAC,CAAC,CAAC5C,MAAM;MAChG;MACA,IAAI+C,QAAQ,EAAE;QACVG,cAAc,GAAGH,QAAQ,CAACH,qBAAqB,CAAC,CAAC,CAAChB,GAAG,GAAGmB,QAAQ,CAACH,qBAAqB,CAAC,CAAC,CAAC5C,MAAM;MACnG;MACA,IAAIgD,QAAQ,EAAE;QACVG,cAAc,GAAGH,QAAQ,CAACJ,qBAAqB,CAAC,CAAC,CAAChB,GAAG,GAAGoB,QAAQ,CAACJ,qBAAqB,CAAC,CAAC,CAAC5C,MAAM;MACnG;MACA,IAAIoD,gBAAgB,GAAGhM,OAAO,CAACwL,qBAAqB,CAAC,CAAC,CAAChB,GAAG,GAAG,IAAI,CAACQ,iBAAiB,CAACQ,qBAAqB,CAAC,CAAC,CAAC5C,MAAM;MAClH,IAAIqD,iBAAiB,GAAG,IAAI,CAACjB,iBAAiB,CAAC3Q,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACyS,gBAAgB,CAAC;MACxF,IAAIW,cAAc,IAAIC,gBAAgB,IAAID,cAAc,IAAI,IAAI,CAACzS,WAAW,GAAG6J,YAAY,CAACtJ,MAAM,GAAG,CAAC,EAAE;QACpG,IAAIoS,iBAAiB,EAAE;UACnB/T,MAAM,CAAC+T,iBAAiB,CAAC5R,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC,CAAC;UACxE0J,iBAAiB,CAAClR,WAAW,CAAC6Q,QAAQ,CAACvR,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC,CAACgJ,SAAS,CAAC,IAAI,CAAC,CAAC;UACtG,IAAI,CAACX,wBAAwB,CAACgB,QAAQ,CAAC;QAC3C;QACA,EAAE,IAAI,CAACtS,WAAW;MACtB,CAAC,MACI,IAAIwS,cAAc,IAAIE,gBAAgB,GAAGH,aAAa,IAAIG,gBAAgB,GAAGF,cAAc,IAAI,IAAI,CAACxS,WAAW,GAAG,CAAC,EAAE;QACtH,IAAI2S,iBAAiB,EAAE;UACnB/T,MAAM,CAAC+T,iBAAiB,CAAC5R,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC,CAAC;UACxE0J,iBAAiB,CAAClR,WAAW,CAAC4Q,QAAQ,CAACtR,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC,CAACgJ,SAAS,CAAC,IAAI,CAAC,CAAC;UACtG,IAAI,CAACX,wBAAwB,CAACe,QAAQ,CAAC;QAC3C;QACA,EAAE,IAAI,CAACrS,WAAW;MACtB;IACJ;IACA,IAAI8Q,CAAC,IAAIA,CAAC,CAACC,MAAM,CAACI,SAAS,IAAI,CAAC,EAAE;MAC9B,IAAI,CAACyB,gBAAgB,CAAC,CAAC;IAC3B;EACJ,CAAC;EACDtT,YAAY,CAACjB,SAAS,CAACuU,gBAAgB,GAAG,YAAY;IAClDhU,MAAM,CAAC,IAAI,CAAC8S,iBAAiB,CAAC;IAC9B,IAAI,CAACA,iBAAiB,GAAG,IAAI;IAC7B,IAAIpQ,MAAM,GAAG,IAAI,CAAC9B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACmC,YAAY,CAAC;IACtE,IAAIkF,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxE9B,iBAAiB,CAACoC,MAAM,EAAE;MAAE6Q,QAAQ,EAAE,EAAE;MAAEjB,GAAG,EAAE;IAAG,CAAC,CAAC;IACpDhS,iBAAiB,CAACwH,OAAO,EAAE;MAAEyL,QAAQ,EAAE,EAAE;MAAEjB,GAAG,EAAE;IAAG,CAAC,CAAC;IACrD,IAAI,CAAC1R,MAAM,CAACwR,cAAc,CAACtK,OAAO,GAAG;MAAEuK,IAAI,EAAE,IAAI,CAACzR,MAAM,CAACwR,cAAc,CAACtK,OAAO,CAACuK,IAAI;MAAEC,GAAG,EAAE;IAAE,CAAC;IAC9FxK,OAAO,CAACyK,SAAS,GAAG,CAAC;IACrB,IAAI,CAACnR,WAAW,GAAG,CAAC;EACxB,CAAC;EACDV,YAAY,CAACjB,SAAS,CAACwU,cAAc,GAAG,UAAU/B,CAAC,EAAE;IACjD,IAAIC,MAAM,GAAGD,CAAC,CAACC,MAAM;IACrB,IAAIA,MAAM,CAAC+B,YAAY,EAAE;MACrB,IAAIC,SAAS,GAAGhC,MAAM,CAAC+B,YAAY,CAACrB,YAAY,CAAC,UAAU,CAAC;MAC5D,IAAI,CAACjS,MAAM,CAACwR,cAAc,CAACjO,MAAM,CAACgQ,SAAS,CAAC,GAAG;QAAE9B,IAAI,EAAEF,MAAM,CAAChR,UAAU;QAAEmR,GAAG,EAAEH,MAAM,CAACI;MAAU,CAAC;IACrG;EACJ,CAAC;EACD7R,YAAY,CAACjB,SAAS,CAAC4R,gBAAgB,GAAG,UAAUa,CAAC,EAAE;IACnD,IAAI,IAAI,CAACtR,MAAM,CAACwT,WAAW,CAACC,OAAO,IAAI,CAAC,IAAI,CAACzT,MAAM,CAACwT,WAAW,CAACE,WAAW,EAAE;MACzEpC,CAAC,CAACqC,cAAc,CAAC,CAAC;IACtB;EACJ,CAAC;EACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI7T,YAAY,CAACjB,SAAS,CAAC4E,eAAe,GAAG,UAAUF,MAAM,EAAE;IACvD,IAAItD,KAAK,GAAG,IAAI;IAChB,IAAI2T,SAAS,GAAG,KAAK;IACrB,IAAIC,SAAS,GAAG,OAAOtQ,MAAM,CAAC5B,QAAQ,KAAK,QAAQ;IACnD,IAAIkS,SAAS,EAAE;MACXD,SAAS,GAAG,IAAI,CAAC5T,MAAM,CAAC2D,YAAY,CAAC4F,cAAc,CAAC1F,OAAO,CAACN,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAClG,CAAC,MACI;MACDP,MAAM,CAAC5B,QAAQ,CAACkL,KAAK,CAAC,GAAG,CAAC,CAACtC,OAAO,CAAC,UAAUoD,GAAG,EAAE;QAAEiG,SAAS,GAAG3T,KAAK,CAACD,MAAM,CAAC2D,YAAY,CAAC4F,cAAc,CAAC1F,OAAO,CAAC8J,GAAG,CAAC,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC;IACpI;IACA,OAAOiG,SAAS;EACpB,CAAC;EACD9T,YAAY,CAACjB,SAAS,CAACiV,YAAY,GAAG,UAAUvQ,MAAM,EAAEgO,MAAM,EAAE;IAC5D,IAAIwC,MAAM,GAAG/U,aAAa,CAAC,KAAK,EAAE;MAAE+C,SAAS,EAAElC,GAAG,CAACmU;IAAa,CAAC,CAAC;IAClE,IAAIzQ,MAAM,CAACwB,QAAQ,EAAE;MACjBgP,MAAM,CAAC9R,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;QACpC+C,SAAS,EAAElC,GAAG,CAACoU,eAAe;QAC9BvO,SAAS,EAAE,IAAI,CAAC1F,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,KAAK,CAAC,GAAG,IAAI,GAAGvC,MAAM,CAACwB,QAAQ,CAACjB,QAAQ,CAAC;MAC1F,CAAC,CAAC,CAAC;IACP;IACA,IAAIP,MAAM,CAACyB,QAAQ,EAAE;MACjB+O,MAAM,CAAC9R,WAAW,CAACjD,aAAa,CAAC,KAAK,EAAE;QACpC+C,SAAS,EAAElC,GAAG,CAACqU,eAAe;QAC9BxO,SAAS,EAAE,IAAI,CAAC1F,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,KAAK,CAAC,GAAG,IAAI,GAAGvC,MAAM,CAACyB,QAAQ,CAAClB,QAAQ,CAAC;MAC1F,CAAC,CAAC,CAAC;IACP;IACA,IAAIiQ,MAAM,CAACI,iBAAiB,GAAG,CAAC,EAAE;MAC9B,IAAI5C,MAAM,CAAChQ,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC+K,kBAAkB,CAAC,EAAE;QACpD2G,MAAM,CAACgB,YAAY,CAACwB,MAAM,EAAExC,MAAM,CAACiB,iBAAiB,CAAC;MACzD,CAAC,MACI;QACDjB,MAAM,CAACtP,WAAW,CAAC8R,MAAM,CAAC;MAC9B;IACJ;EACJ,CAAC;EACDjU,YAAY,CAACjB,SAAS,CAACwD,gBAAgB,GAAG,YAAY;IAClD,IAAIpC,KAAK,GAAG,IAAI;IAChB,IAAI,CAACD,MAAM,CAACc,OAAO,CAACyJ,OAAO,CAAC,UAAUhH,MAAM,EAAE;MAC1C,IAAI,CAACA,MAAM,CAACwB,QAAQ,IAAI,CAACxB,MAAM,CAACyB,QAAQ,EAAE;QACtC;MACJ;MACA,IAAIoP,QAAQ,GAAGnU,KAAK,CAACe,UAAU,CAACuC,MAAM,CAAC5B,QAAQ,CAAC;MAChD,IAAI0S,WAAW,GAAG,cAAc,GAAG9Q,MAAM,CAAC5B,QAAQ,GAAG,KAAK;MAC1D,IAAI2S,UAAU,GAAGrU,KAAK,CAACD,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,IAAI1B,GAAG,CAACmE,kBAAkB,GAAGqQ,WAAW,CAAC,CAAC;MACjG,IAAIE,QAAQ,GAAG,EAAE,CAACpK,KAAK,CAACjK,IAAI,CAACD,KAAK,CAACD,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,IAAIvK,GAAG,CAACmI,mBAAmB,GAAGqM,WAAW,CAAC,CAAC,CAAC;MAClH,IAAIpU,KAAK,CAACD,MAAM,CAACwU,cAAc,KAAK,UAAU,IAAIvU,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,EAAE;QACtF1B,KAAK,CAACuH,WAAW,CAAC+C,OAAO,CAAC,UAAU7C,GAAG,EAAEhE,KAAK,EAAE;UAC5CzD,KAAK,CAAC6T,YAAY,CAACvQ,MAAM,EAAEgR,QAAQ,CAAC7Q,KAAK,CAAC,CAAC;UAC3C,IAAI+Q,QAAQ,GAAGL,QAAQ,CAAC3F,MAAM,CAAC,UAAUiG,IAAI,EAAE;YAC3C,OAAOA,IAAI,CAACzU,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,KAAK+F,GAAG,CAAC/F,QAAQ;UACxE,CAAC,CAAC;UACF,IAAIgT,UAAU,GAAG1U,KAAK,CAAC2U,kBAAkB,CAACrR,MAAM,EAAEkR,QAAQ,CAAC1T,MAAM,CAAC;UAClE,IAAI4T,UAAU,EAAE;YACZxV,QAAQ,CAAC,CAACoV,QAAQ,CAAC7Q,KAAK,CAAC,CAAC,EAAEiR,UAAU,CAAC;UAC3C;QACJ,CAAC,CAAC;MACN,CAAC,MACI;QACD1U,KAAK,CAAC6T,YAAY,CAACvQ,MAAM,EAAE+Q,UAAU,CAAC;QACtC,IAAIK,UAAU,GAAG1U,KAAK,CAAC2U,kBAAkB,CAACrR,MAAM,EAAE6Q,QAAQ,CAACrT,MAAM,CAAC;QAClE,IAAI4T,UAAU,EAAE;UACZxV,QAAQ,CAACoV,QAAQ,CAACM,MAAM,CAACP,UAAU,CAAC,EAAEK,UAAU,CAAC;QACrD;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACD7U,YAAY,CAACjB,SAAS,CAAC+V,kBAAkB,GAAG,UAAUrR,MAAM,EAAE2B,KAAK,EAAE;IACjE,IAAIyP,UAAU;IACd,IAAIpR,MAAM,CAACyB,QAAQ,IAAIE,KAAK,GAAG3B,MAAM,CAACyB,QAAQ,EAAE;MAC5C2P,UAAU,GAAG9U,GAAG,CAACiV,eAAe;IACpC,CAAC,MACI,IAAIvR,MAAM,CAACwB,QAAQ,IAAIG,KAAK,GAAG3B,MAAM,CAACwB,QAAQ,EAAE;MACjD4P,UAAU,GAAG9U,GAAG,CAACkV,eAAe;IACpC;IACA,OAAOJ,UAAU;EACrB,CAAC;EACD7U,YAAY,CAACjB,SAAS,CAACmW,iBAAiB,GAAG,YAAY;IACnD,IAAIC,WAAW,GAAG,EAAE,CAAC9K,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACmU,YAAY,CAAC,CAAC;IAC7FiB,WAAW,CAAC1K,OAAO,CAAC,UAAUoG,IAAI,EAAE;MAAEvR,MAAM,CAACuR,IAAI,CAAC;IAAE,CAAC,CAAC;IACtD,IAAIuE,QAAQ,GAAG,EAAE,CAAC/K,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACkV,eAAe,CAAC,CAAC;IAC7FvV,WAAW,CAAC0V,QAAQ,EAAErV,GAAG,CAACkV,eAAe,CAAC;IAC1C,IAAII,QAAQ,GAAG,EAAE,CAAChL,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACiV,eAAe,CAAC,CAAC;IAC7FtV,WAAW,CAAC2V,QAAQ,EAAEtV,GAAG,CAACiV,eAAe,CAAC;IAC1C,IAAI,CAACzS,gBAAgB,CAAC,CAAC;EAC3B,CAAC;EACDvC,YAAY,CAACjB,SAAS,CAAC4J,aAAa,GAAG,UAAU2M,WAAW,EAAEC,UAAU,EAAE;IACtE,IAAIpV,KAAK,GAAG,IAAI;IAChB,IAAIoV,UAAU,KAAK,KAAK,CAAC,EAAE;MAAEA,UAAU,GAAG,IAAI,CAACrV,MAAM,CAAC4B,UAAU;IAAE;IAClE,IAAIwS,QAAQ,GAAG,EAAE;IACjB,IAAIP,SAAS,GAAG,OAAOuB,WAAW,KAAK,QAAQ;IAC/C,IAAIvB,SAAS,EAAE;MACX,IAAIyB,OAAO,GAAGD,UAAU,CAAC5G,MAAM,CAAC,UAAU8G,OAAO,EAAE;QAC/C,OAAOA,OAAO,CAACtV,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,KAAKyT,WAAW;MACzD,CAAC,CAAC;MACFhB,QAAQ,GAAGA,QAAQ,CAACS,MAAM,CAACS,OAAO,CAAC;IACvC,CAAC,MACI;MACD,IAAIlV,UAAU,GAAGgV,WAAW,CAACvI,KAAK,CAAC,GAAG,CAAC;MACvC,IAAI2I,OAAO,GAAG,SAAAA,CAAU7H,GAAG,EAAE;QACzB,IAAI2H,OAAO,GAAGD,UAAU,CAAC5G,MAAM,CAAC,UAAU8G,OAAO,EAAE;UAC/C,OAAOA,OAAO,CAACtV,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,KAAKgM,GAAG,CAACC,IAAI,CAAC,CAAC;QACxD,CAAC,CAAC;QACFwG,QAAQ,GAAGA,QAAQ,CAACS,MAAM,CAACS,OAAO,CAAC;MACvC,CAAC;MACD,KAAK,IAAItO,EAAE,GAAG,CAAC,EAAEyO,YAAY,GAAGrV,UAAU,EAAE4G,EAAE,GAAGyO,YAAY,CAAC1U,MAAM,EAAEiG,EAAE,EAAE,EAAE;QACxE,IAAI2G,GAAG,GAAG8H,YAAY,CAACzO,EAAE,CAAC;QAC1BwO,OAAO,CAAC7H,GAAG,CAAC;MAChB;IACJ;IACA,IAAI,CAAC+H,YAAY,CAACtB,QAAQ,CAAC;IAC3B,OAAOA,QAAQ;EACnB,CAAC;EACDtU,YAAY,CAACjB,SAAS,CAAC6W,YAAY,GAAG,UAAUtB,QAAQ,EAAE;IACtD,IAAIzG,GAAG,GAAG,IAAI,CAAC3N,MAAM,CAAC+K,YAAY,CAACC,WAAW;IAC9C,IAAI2K,SAAS,GAAG,IAAI,CAAC3V,MAAM,CAAC4V,YAAY,CAACD,SAAS;IAClD,QAAQ,IAAI,CAAC3V,MAAM,CAAC4V,YAAY,CAACC,MAAM;MACnC,KAAK,iBAAiB;QAClB,IAAI,CAACC,SAAS,CAACnI,GAAG,EAAEgI,SAAS,EAAEvB,QAAQ,CAAC;QACxC;MACJ,KAAK,QAAQ;MACb,KAAK,OAAO;QACR,IAAI,IAAI,CAACpU,MAAM,CAAC4V,YAAY,CAACG,KAAK,EAAE;UAChCpI,GAAG,GAAG,IAAI,CAAC3N,MAAM,CAAC4V,YAAY,CAACG,KAAK;QACxC;QACA,IAAI,CAACD,SAAS,CAACnI,GAAG,EAAEgI,SAAS,EAAEvB,QAAQ,CAAC;QACxC;IACR;IACA,OAAOA,QAAQ;EACnB,CAAC;EACDtU,YAAY,CAACjB,SAAS,CAACiX,SAAS,GAAG,UAAUnI,GAAG,EAAEgI,SAAS,EAAEvB,QAAQ,EAAE;IACnE,IAAIP,SAAS,GAAG,IAAI;IACpB,IAAI,IAAI,CAAC7T,MAAM,CAAC4B,UAAU,CAACb,MAAM,GAAG,CAAC,EAAE;MACnC8S,SAAS,GAAG,OAAQ,IAAI,CAAC7T,MAAM,CAAC4B,UAAU,CAAC,CAAC,CAAC,CAAE+L,GAAG,CAAC,KAAK,QAAQ;IACpE;IACA,IAAI,CAACkG,SAAS,IAAI,IAAI,CAAC7T,MAAM,CAAC4V,YAAY,CAACC,MAAM,KAAK,OAAO,EAAE;MAC3D,OAAOzB,QAAQ;IACnB;IACA,IAAI4B,KAAK;IACT,IAAIC,MAAM;IACV7B,QAAQ,GAAGA,QAAQ,CAACtF,IAAI,CAAC,UAAUoH,SAAS,EAAEC,UAAU,EAAE;MACtD,IAAI,CAACtC,SAAS,EAAE;QACZmC,KAAK,GAAGE,SAAS,CAACvI,GAAG,CAAC,CAACyI,WAAW,CAAC,CAAC;QACpCH,MAAM,GAAGE,UAAU,CAACxI,GAAG,CAAC,CAACyI,WAAW,CAAC,CAAC;MAC1C,CAAC,MACI;QACDJ,KAAK,GAAGE,SAAS,CAACvI,GAAG,CAAC;QACtBsI,MAAM,GAAGE,UAAU,CAACxI,GAAG,CAAC;MAC5B;MACA,OAAQqI,KAAK,GAAGC,MAAM,GAAI,CAAC,GAAKA,MAAM,GAAGD,KAAK,GAAI,CAAC,CAAC,GAAG,CAAE;IAC7D,CAAC,CAAC;IACF,IAAIL,SAAS,KAAK,YAAY,EAAE;MAC5BvB,QAAQ,CAAChF,OAAO,CAAC,CAAC;IACtB;IACA,OAAOgF,QAAQ;EACnB,CAAC;EACDtU,YAAY,CAACjB,SAAS,CAACwX,aAAa,GAAG,UAAU5P,IAAI,EAAE;IACnD,IAAIA,IAAI,CAAC8K,MAAM,CAACrN,SAAS,CAAC6E,QAAQ,CAAClJ,GAAG,CAACyW,sBAAsB,CAAC,IAC1D,IAAI,CAACtW,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC0W,uBAAuB,CAAC,CAACrS,SAAS,CAAC6E,QAAQ,CAAC,cAAc,CAAC,EAAE;MACzG,IAAI,CAACyN,SAAS,CAACC,IAAI,CAAC,CAAC;MACrBjX,WAAW,CAAC,CAAC,IAAI,CAACkX,YAAY,CAAC,EAAE,UAAU,CAAC;IAChD;IACA,IAAIjX,OAAO,CAACgH,IAAI,CAAC8K,MAAM,EAAE,GAAG,GAAG1R,GAAG,CAAC8W,UAAU,CAAC,EAAE;MAC5C;IACJ;IACA,IAAIC,KAAK,GAAG,EAAE,CAACzM,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC8L,UAAU,GAAG,GAAG,GAAG9L,GAAG,CAACwL,oBAAoB,CAAC,CAAC;IACtH7L,WAAW,CAACoX,KAAK,EAAE/W,GAAG,CAACwL,oBAAoB,CAAC;IAC5C,IAAI,CAACwL,yBAAyB,CAACD,KAAK,CAAC;EACzC,CAAC;EACD9W,YAAY,CAACjB,SAAS,CAACgY,yBAAyB,GAAG,UAAUD,KAAK,EAAE;IAChE,IAAIA,KAAK,YAAYE,OAAO,EAAE;MAC1BF,KAAK,CAACtQ,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;IAChD,CAAC,MACI;MACDsQ,KAAK,CAACrM,OAAO,CAAC,UAAUmK,IAAI,EAAE;QAAEA,IAAI,CAACpO,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;MAAE,CAAC,CAAC;IACnF;EACJ,CAAC;EACDxG,YAAY,CAACjB,SAAS,CAACoC,cAAc,GAAG,UAAUyF,IAAI,EAAE;IACpD,IAAIzG,KAAK,GAAG,IAAI;IAChB,IAAIe,UAAU,GAAG,CAAC,CAAC;IACnB,IAAI,CAACZ,UAAU,GAAG,EAAE;IACpB,IAAI,CAACJ,MAAM,CAACc,OAAO,CAACyJ,OAAO,CAAC,UAAUhH,MAAM,EAAE;MAC1C,IAAIsQ,SAAS,GAAG,OAAOtQ,MAAM,CAAC5B,QAAQ,KAAK,QAAQ;MACnD,IAAIkS,SAAS,EAAE;QACX5T,KAAK,CAACG,UAAU,GAAGH,KAAK,CAACG,UAAU,CAACyU,MAAM,CAACtR,MAAM,CAAC5B,QAAQ,CAACmC,QAAQ,CAAC,CAAC,CAAC;MAC1E,CAAC,MACI;QACD7D,KAAK,CAACG,UAAU,GAAGH,KAAK,CAACG,UAAU,CAACyU,MAAM,CAACtR,MAAM,CAAC5B,QAAQ,CAACkL,KAAK,CAAC,GAAG,CAAC,CAACyB,GAAG,CAAC,UAAUgD,CAAC,EAAE;UAAE,OAAOA,CAAC,CAAC1D,IAAI,CAAC,CAAC;QAAE,CAAC,CAAC,CAAC;MACjH;MACA,IAAIwG,QAAQ,GAAGnU,KAAK,CAACwI,aAAa,CAAClF,MAAM,CAAC5B,QAAQ,EAAE+E,IAAI,CAAC;MACzD1F,UAAU,CAACuC,MAAM,CAAC5B,QAAQ,CAAC,GAAGyS,QAAQ;IAC1C,CAAC,CAAC;IACF,OAAOpT,UAAU;EACrB,CAAC;EACDlB,YAAY,CAACjB,SAAS,CAACsC,gBAAgB,GAAG,YAAY;IAClD,IAAIlB,KAAK,GAAG,IAAI;IAChB,IAAIK,YAAY,GAAG,CAAC,CAAC;IACrB,IAAI,IAAI,CAACN,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,EAAE;MACvC,IAAI,CAACxB,UAAU,CAACoK,OAAO,CAAC,UAAU7C,GAAG,EAAE;QACnC,OAAOpH,YAAY,CAACoH,GAAG,CAAC/F,QAAQ,CAAC,GAAG1B,KAAK,CAACD,MAAM,CAAC4B,UAAU,CAAC6M,MAAM,CAAC,UAAUF,GAAG,EAAE;UAC9E,OAAO,CAAChP,iBAAiB,CAACgP,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,CAAC,IAAI1B,KAAK,CAACG,UAAU,CAACyD,OAAO,CAAC0K,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC2B,QAAQ,CAAC,CAACmC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IACzH,CAAE,CAACyK,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,IAAI1B,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAAC8M,iBAAiB,GAC7F,EAAE,GAAGD,GAAG,CAACtO,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,MAAM+F,GAAG,CAAC/F,QAAQ;QAC9E,CAAC,CAAC;MACN,CAAC,CAAC;IACN;IACA,OAAOrB,YAAY;EACvB,CAAC;EACDR,YAAY,CAACjB,SAAS,CAACkY,cAAc,GAAG,YAAY;IAChD,IAAIjV,MAAM,GAAG,IAAI,CAAC9B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACmC,YAAY,CAAC;IACtE,EAAE,CAACmI,KAAK,CAACjK,IAAI,CAAC4B,MAAM,CAAC4O,QAAQ,CAAC,CAACnG,OAAO,CAAC,UAAUyM,KAAK,EAAE;MAAE,OAAO5X,MAAM,CAAC4X,KAAK,CAAC;IAAE,CAAC,CAAC;IAClF,IAAI,CAAC9U,YAAY,CAACJ,MAAM,CAAC;EAC7B,CAAC;EACDhC,YAAY,CAACjB,SAAS,CAACoY,YAAY,GAAG,YAAY;IAC9C,IAAI,CAACjX,MAAM,CAACkX,cAAc,CAAC,CAAC,cAAc,CAAC,CAAC;IAC5C,IAAIN,KAAK,GAAG,EAAE,CAACzM,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC+K,kBAAkB,CAAC,CAAC;IAC7FgM,KAAK,CAACrM,OAAO,CAAC,UAAUmK,IAAI,EAAE;MAAE,OAAOtV,MAAM,CAACsV,IAAI,CAAC;IAAE,CAAC,CAAC;IACvD,IAAI,CAACtS,WAAW,CAAC,CAAC;IAClB,IAAI,CAAC+U,aAAa,CAAC,CAAC;IACpB,IAAI,CAACnX,MAAM,CAACsC,eAAe,CAAC,CAAC;EACjC,CAAC;EACDxC,YAAY,CAACjB,SAAS,CAACuY,OAAO,GAAG,YAAY;IACzC,IAAInX,KAAK,GAAG,IAAI;IAChB,IAAIoX,yBAAyB,GAAG,KAAK;IACrC,IAAI,CAACrX,MAAM,CAACc,OAAO,CAACyJ,OAAO,CAAC,UAAUhH,MAAM,EAAE;MAC1C,IAAIA,MAAM,CAAC0B,aAAa,EAAE;QACtB,IAAI1B,MAAM,IAAIA,MAAM,CAACqB,QAAQ,IAAI,CAACyS,yBAAyB,EAAE;UACzDpX,KAAK,CAAC8W,cAAc,CAAC,CAAC;UACtBM,yBAAyB,GAAG,IAAI;QACpC;QACA,IAAIC,aAAa,GAAG,GAAG,GAAGzX,GAAG,CAACmE,kBAAkB,GAAG,cAAc,GAAGT,MAAM,CAAC5B,QAAQ,GAAG,OAAO,GAAG9B,GAAG,CAAC+F,qBAAqB;QACzH,IAAID,SAAS,GAAG1F,KAAK,CAACD,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC+V,aAAa,CAAC;QACjE,IAAI3R,SAAS,EAAE;UACX,IAAIkO,SAAS,GAAG,OAAOtQ,MAAM,CAAC5B,QAAQ,KAAK,QAAQ;UACnD,IAAI4V,UAAU,GAAG,CAAC;UAClB,IAAI1D,SAAS,EAAE;YACX0D,UAAU,GAAI,EAAE,CAACpN,KAAK,CAACjK,IAAI,CAACD,KAAK,CAACD,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC8L,UAAU,GAAG,cAAc,GAAGpI,MAAM,CAAC5B,QAAQ,GAAG,KAAK,CAAC,CAAC,CAAEZ,MAAM;UAC/I,CAAC,MACI;YACD,IAAI0M,IAAI,GAAGlK,MAAM,CAAC5B,QAAQ,CAACkL,KAAK,CAAC,GAAG,CAAC;YACrC,KAAK,IAAI7F,EAAE,GAAG,CAAC,EAAEwQ,MAAM,GAAG/J,IAAI,EAAEzG,EAAE,GAAGwQ,MAAM,CAACzW,MAAM,EAAEiG,EAAE,EAAE,EAAE;cACtD,IAAI2G,GAAG,GAAG6J,MAAM,CAACxQ,EAAE,CAAC;cACpB,IAAI4P,KAAK,GAAG,EAAE,CAACzM,KAAK,CAACjK,IAAI,CAACD,KAAK,CAACD,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC8L,UAAU,GAAG,cAAc,GAAGgC,GAAG,CAACC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;cAC5H2J,UAAU,GAAGX,KAAK,CAAC7V,MAAM,GAAGwW,UAAU;YAC1C;UACJ;UACA5R,SAAS,CAACD,SAAS,GAAG,IAAI,GAAG6R,UAAU,GAAG,GAAG,GAAGtX,KAAK,CAACD,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,OAAO,CAAC;QAC/F;MACJ;IACJ,CAAC,CAAC;IACF,IAAI,IAAI,CAAC9F,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,EAAE;MACvC,IAAI0I,YAAY,GAAG,EAAE,CAACF,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACwJ,kBAAkB,CAAC,CAAC;MACpGgB,YAAY,CAACE,OAAO,CAAC,UAAUkN,QAAQ,EAAE;QACrC,IAAIC,WAAW,GAAGD,QAAQ,CAACxF,YAAY,CAAC,UAAU,CAAC;QACnD,IAAItM,SAAS,GAAG8R,QAAQ,CAAClW,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC+F,qBAAqB,CAAC;QACvE,IAAID,SAAS,IAAI+R,WAAW,EAAE;UAC1B,IAAId,KAAK,GAAG,EAAE,CAACzM,KAAK,CAACjK,IAAI,CAACuX,QAAQ,CAACE,kBAAkB,CAACvN,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC8L,UAAU,CAAC,CAAC;UAC7FhG,SAAS,CAACD,SAAS,GAAG,IAAI,GAAGkR,KAAK,CAAC7V,MAAM,GAAG,GAAG,GAAGd,KAAK,CAACD,MAAM,CAAC6F,SAAS,CAACC,WAAW,CAAC,OAAO,CAAC;QACjG;MACJ,CAAC,CAAC;IACN;IACA,IAAI,CAACkP,iBAAiB,CAAC,CAAC;EAC5B,CAAC;EACDlV,YAAY,CAACjB,SAAS,CAACuS,oBAAoB,GAAG,YAAY;IACtD,IAAInR,KAAK,GAAG,IAAI;IAChB,IAAIiH,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxE,IAAI0F,OAAO,EAAE;MACTA,OAAO,CAAC0Q,QAAQ,CAAC,IAAI,CAAC5X,MAAM,CAACwR,cAAc,CAACtK,OAAO,CAACuK,IAAI,EAAE,IAAI,CAACzR,MAAM,CAACwR,cAAc,CAACtK,OAAO,CAACwK,GAAG,CAAC;IACrG;IACA,IAAIpB,WAAW,GAAG,EAAE,CAACnG,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC+K,kBAAkB,CAAC,CAAC;IACnG0F,WAAW,CAAC/F,OAAO,CAAC,UAAUsN,OAAO,EAAE;MACnC,IAAIA,OAAO,CAACvE,YAAY,EAAE;QACtB,IAAIwE,UAAU,GAAG7X,KAAK,CAACD,MAAM,CAACwR,cAAc,CAACjO,MAAM,CAACsU,OAAO,CAACvE,YAAY,CAACrB,YAAY,CAAC,UAAU,CAAC,CAAC;QAClG,IAAI6F,UAAU,EAAE;UACZD,OAAO,CAACD,QAAQ,CAACE,UAAU,CAACrG,IAAI,EAAEqG,UAAU,CAACpG,GAAG,CAAC;QACrD;MACJ;IACJ,CAAC,CAAC;EACN,CAAC;EACD5R,YAAY,CAACjB,SAAS,CAACkZ,sBAAsB,GAAG,UAAUrR,IAAI,EAAEhD,KAAK,EAAE;IACnE,IAAIzD,KAAK,GAAG,IAAI;IAChB,IAAI0N,GAAG,GAAGjH,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC2B,QAAQ,CAAC;IACpC,IAAIqW,OAAO,GAAG,IAAI,CAAChY,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,qCAAqC,CAAC;IACtF,IAAI,IAAI,CAACvB,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,IAAI,CAAC,IAAI,CAAC3B,MAAM,CAACoB,UAAU,EAAE;MAClE,IAAI6W,WAAW,GAAG,2CAA2C,GAAGvR,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,GAAG,KAAK;MACnH,IAAI,IAAI,CAAC3B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC0W,WAAW,CAAC,EAAE;QAChDD,OAAO,GAAG,IAAI,CAAChY,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC0W,WAAW,CAAC,CAACN,kBAAkB;MAC/E,CAAC,MACI;QACD,IAAIO,WAAW,GAAG,IAAI,CAAC9X,UAAU,CAACyD,OAAO,CAAC8J,GAAG,CAAC;QAC9C,IAAIuK,WAAW,KAAK,CAAC,CAAC,IAAI,IAAI,CAAClY,MAAM,CAAC2D,YAAY,CAAC4F,cAAc,CAAC1F,OAAO,CAAC8J,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;UACnF,IAAIwK,OAAO,GAAG,IAAI,CAAChY,UAAU,CAACiY,SAAS,CAAC,UAAUC,OAAO,EAAE;YAAE,OAAOA,OAAO,CAAC,UAAU,CAAC,KAAK3R,IAAI,CAACzG,KAAK,CAACD,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC;UAAE,CAAC,CAAC;UAC5I,IAAI2W,IAAI,GAAG,EAAE,CAACnO,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,iBAAiB,CAAC,CAAC;UACjF,IAAImO,OAAO,GAAG,IAAI,CAACvY,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACwH,mBAAmB,GAAG,QAAQ,CAAC;UACzF,IAAIiR,IAAI,CAACH,OAAO,CAAC,EAAE;YACfI,OAAO,GAAGD,IAAI,CAACH,OAAO,CAAC;UAC3B;UACA,IAAI,CAACvQ,iBAAiB,CAAC2Q,OAAO,EAAE,IAAI,CAACpY,UAAU,CAACgY,OAAO,CAAC,EAAE,KAAK,CAAC;UAChE,IAAI,CAACtQ,mBAAmB,CAAC0Q,OAAO,EAAE,IAAI,CAACpY,UAAU,CAACgY,OAAO,CAAC,EAAE,KAAK,CAAC;QACtE;QACAH,OAAO,GAAG,IAAI,CAAChY,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC0W,WAAW,CAAC,CAACN,kBAAkB;QAC3E,EAAE,CAACxN,KAAK,CAACjK,IAAI,CAAC8X,OAAO,CAACtH,QAAQ,CAAC,CAACnG,OAAO,CAAC,UAAU8F,IAAI,EAAE;UACpD,IAAIC,WAAW,GAAGtR,aAAa,CAAC,KAAK,EAAE;YAAE+C,SAAS,EAAElC,GAAG,CAAC+K;UAAmB,CAAC,CAAC;UAC7EyF,IAAI,CAACpO,WAAW,CAACqO,WAAW,CAAC;UAC7BA,WAAW,CAACrO,WAAW,CAAChC,KAAK,CAACuL,eAAe,CAAC,CAAC,CAAC;QACpD,CAAC,CAAC;MACN;IACJ;IACA,IAAI,IAAI,CAACxL,MAAM,CAAC4V,YAAY,CAACC,MAAM,KAAK,OAAO,EAAE;MAC7C,IAAI2C,OAAO,GAAG,IAAI,CAACxY,MAAM,CAAC+K,YAAY,CAACC,WAAW;MAClD,IAAI,IAAI,CAAChL,MAAM,CAAC4V,YAAY,CAACC,MAAM,KAAK,QAAQ,EAAE;QAC9C2C,OAAO,GAAG,IAAI,CAACxY,MAAM,CAAC4V,YAAY,CAACG,KAAK;MAC5C;MACA,IAAIxW,iBAAiB,CAAC,IAAI,CAACS,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,EAAE;QAC1D+B,KAAK,GAAG,IAAI,CAAC+E,aAAa,CAACkF,GAAG,EAAE,IAAI,CAAC3N,MAAM,CAAC4B,UAAU,CAAC,CAACwW,SAAS,CAAC,UAAUK,OAAO,EAAE;UACjF,OAAOA,OAAO,CAACD,OAAO,CAAC,KAAK9R,IAAI,CAAC8R,OAAO,CAAC;QAC7C,CAAC,CAAC;MACN,CAAC,MACI;QACD,IAAIE,aAAa,GAAG,IAAI,CAAC1Y,MAAM,CAAC2Y,eAAe,CAACjS,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC0B,gBAAgB,CAACC,QAAQ,CAAC,CAAC;QAC5F+B,KAAK,GAAG,IAAI,CAAC+E,aAAa,CAACkF,GAAG,EAAE+K,aAAa,CAAC,CAACN,SAAS,CAAC,UAAUK,OAAO,EAAE;UAAE,OAAOA,OAAO,CAACD,OAAO,CAAC,KAAK9R,IAAI,CAAC8R,OAAO,CAAC;QAAE,CAAC,CAAC;MAC/H;IACJ,CAAC,MACI,IAAI,IAAI,CAACxY,MAAM,CAAC4V,YAAY,CAACC,MAAM,KAAK,OAAO,IAChD,IAAI,CAAC7V,MAAM,CAAC4V,YAAY,CAACG,KAAK,IAAI,IAAI,CAAC/V,MAAM,CAAC4V,YAAY,CAACD,SAAS,KAAK,WAAW,EAAE;MACtFjS,KAAK,GAAGgD,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC4V,YAAY,CAACG,KAAK,CAAC,GAAG,CAAC;IACpD;IACA,IAAIiC,OAAO,EAAE;MACT,IAAIzP,EAAE,GAAG,EAAE,CAAC4B,KAAK,CAACjK,IAAI,CAAC8X,OAAO,CAACtH,QAAQ,CAAC,CAACjC,MAAM,CAAC,UAAU6C,CAAC,EAAE;QACzD,OAAOA,CAAC,CAACW,YAAY,CAAC,UAAU,CAAC,CAAC2G,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC/L,KAAK,CAAC,GAAG,CAAC,CAAChJ,OAAO,CAAC8J,GAAG,CAAC7J,QAAQ,CAAC,CAAC,CAAC8U,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC;MACrH,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,IAAIC,aAAa,GAAGtQ,EAAE,CAAChH,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC+K,kBAAkB,CAAC;MAClE,IAAIkD,SAAS,GAAG+K,aAAa,CAACtX,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACkO,gBAAgB,CAAC;MACvE,IAAID,SAAS,EAAE;QACX1O,MAAM,CAAC0O,SAAS,CAAC;MACrB;MACA,IAAIgL,aAAa,GAAG,IAAI,CAAC1N,UAAU,CAAC1E,IAAI,CAAC;MACzC,IAAI,IAAI,CAAC1G,MAAM,CAAC+Y,gBAAgB,IAAIxQ,EAAE,CAACrE,SAAS,CAAC6E,QAAQ,CAAClJ,GAAG,CAACsI,UAAU,CAAC,EAAE;QACvE,IAAI,CAACnI,MAAM,CAACgZ,iBAAiB,CAACC,cAAc,CAACH,aAAa,CAAC;QAC3D3Z,QAAQ,CAAC,CAAC2Z,aAAa,CAAC,EAAEjZ,GAAG,CAACyI,eAAe,CAAC;MAClD;MACA,IAAI7B,IAAI,GAAG;QAAEC,IAAI,EAAEA,IAAI;QAAEpF,OAAO,EAAEwX,aAAa;QAAEnS,MAAM,EAAE;MAAM,CAAC;MAChE,IAAI,CAAC3G,MAAM,CAAC6G,OAAO,CAACjH,MAAM,CAAC0L,YAAY,EAAE7E,IAAI,EAAE,UAAU8E,QAAQ,EAAE;QAC/D,IAAI,CAACA,QAAQ,CAAC5E,MAAM,EAAE;UAClB,IAAIpH,iBAAiB,CAACmE,KAAK,CAAC,IAAImV,aAAa,CAACnI,QAAQ,CAAC3P,MAAM,KAAK,CAAC,EAAE;YACjE8X,aAAa,CAAC5W,WAAW,CAAC6W,aAAa,CAAC;UAC5C,CAAC,MACI;YACDD,aAAa,CAACtG,YAAY,CAACuG,aAAa,EAAED,aAAa,CAACK,UAAU,CAACxV,KAAK,CAAC,CAAC;UAC9E;QACJ;MACJ,CAAC,CAAC;IACN;EACJ,CAAC;EACD5D,YAAY,CAACjB,SAAS,CAACsa,UAAU,GAAG,UAAUzS,IAAI,EAAE;IAChD,IAAI0S,OAAO,GAAG1S,IAAI,CAAC,IAAI,CAAC1G,MAAM,CAAC+K,YAAY,CAACC,WAAW,CAAC;IACxD,IAAIG,WAAW,GAAG,IAAI,CAACnL,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC8L,UAAU,GAAG,aAAa,GAAGyN,OAAO,GAAG,KAAK,CAAC;IAC3G,IAAI,CAACC,cAAc,GAAGlO,WAAW,CAACjH,SAAS,CAAC6E,QAAQ,CAAClJ,GAAG,CAACwL,oBAAoB,CAAC,GAAG,IAAI,GAAG,KAAK;IAC7F,IAAIiO,aAAa,GAAGnO,WAAW,CAACoO,aAAa;IAC7C,IAAIpO,WAAW,EAAE;MACb/L,MAAM,CAAC+L,WAAW,CAAC;IACvB;IACA,IAAImO,aAAa,CAAClP,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC8L,UAAU,GAAG,QAAQ,GAAG9L,GAAG,CAAC2Z,iBAAiB,GAAG,GAAG,CAAC,CAACzY,MAAM,KAAK,CAAC,EAAE;MAC5GuY,aAAa,CAACrX,WAAW,CAAC,IAAI,CAACuJ,eAAe,CAAC,CAAC,CAAC;IACrD;EACJ,CAAC;EACD1L,YAAY,CAACjB,SAAS,CAAC2D,UAAU,GAAG,YAAY;IAC5C,IAAIvC,KAAK,GAAG,IAAI;IAChBf,YAAY,CAACsR,GAAG,CAAC,IAAI,CAACxQ,MAAM,CAACsB,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,MAAM,CAAC2D,YAAY,CAAC8V,YAAY,EAAE,IAAI,CAACzZ,MAAM,CAAC2D,YAAY,CAAC;IAC/GzE,YAAY,CAACsR,GAAG,CAAC,IAAI,CAACxQ,MAAM,CAACsB,OAAO,EAAE,UAAU,EAAE,IAAI,CAACtB,MAAM,CAAC2D,YAAY,CAAC+V,kBAAkB,EAAE,IAAI,CAAC1Z,MAAM,CAAC2D,YAAY,CAAC;IACxHzE,YAAY,CAACsR,GAAG,CAACmJ,QAAQ,EAAEra,OAAO,CAACsa,eAAe,EAAE,IAAI,CAACvD,aAAa,EAAE,IAAI,CAAC;IAC7E,IAAInP,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxEtC,YAAY,CAACsR,GAAG,CAACtJ,OAAO,EAAE,QAAQ,EAAE,IAAI,CAACmK,eAAe,EAAE,IAAI,CAAC;IAC/D,IAAIf,WAAW,GAAG,EAAE,CAACnG,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC+K,kBAAkB,CAAC,CAAC;IACnG0F,WAAW,CAAC/F,OAAO,CAAC,UAAUsN,OAAO,EAAE;MACnC,IAAI5X,KAAK,CAACD,MAAM,CAACyC,eAAe,IAAIoV,OAAO,CAACvE,YAAY,EAAE;QACtDrT,KAAK,CAACD,MAAM,CAACwR,cAAc,CAACjO,MAAM,CAACsU,OAAO,CAACvE,YAAY,CAACrB,YAAY,CAAC,UAAU,CAAC,CAAC,GAAG;UAAER,IAAI,EAAE,CAAC;UAAEC,GAAG,EAAE;QAAE,CAAC;MAC3G;MACAxS,YAAY,CAACsR,GAAG,CAACqH,OAAO,EAAE,QAAQ,EAAE5X,KAAK,CAACoT,cAAc,EAAEpT,KAAK,CAAC;IACpE,CAAC,CAAC;IACF,IAAI,IAAI,CAACD,MAAM,CAACoB,UAAU,EAAE;MACxB,IAAI,CAACpB,MAAM,CAACwT,WAAW,CAACqG,eAAe,CAAC,CAAC;MACzC3S,OAAO,CAAC3G,UAAU,GAAG,IAAI,CAACA,UAAU;IACxC;IACA,IAAI,CAAC4W,aAAa,CAAC,CAAC;EACxB,CAAC;EACDrX,YAAY,CAACjB,SAAS,CAACib,YAAY,GAAG,YAAY;IAC9C,IAAI7Z,KAAK,GAAG,IAAI;IAChBf,YAAY,CAACE,MAAM,CAAC,IAAI,CAACY,MAAM,CAACsB,OAAO,EAAE,OAAO,EAAE,IAAI,CAACtB,MAAM,CAAC2D,YAAY,CAAC8V,YAAY,CAAC;IACxFva,YAAY,CAACE,MAAM,CAAC,IAAI,CAACY,MAAM,CAACsB,OAAO,EAAE,UAAU,EAAE,IAAI,CAACtB,MAAM,CAAC2D,YAAY,CAAC+V,kBAAkB,CAAC;IACjGxa,YAAY,CAACE,MAAM,CAACua,QAAQ,EAAEra,OAAO,CAACsa,eAAe,EAAE,IAAI,CAACvD,aAAa,CAAC;IAC1E,IAAInP,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxE,IAAI0F,OAAO,EAAE;MACThI,YAAY,CAACE,MAAM,CAAC8H,OAAO,EAAE,QAAQ,EAAE,IAAI,CAACmK,eAAe,CAAC;MAC5D,IAAI,IAAI,CAACrR,MAAM,CAAC+Y,gBAAgB,EAAE;QAC9B,IAAI,CAACgB,eAAe,CAAC,CAAC;MAC1B;IACJ;IACA,IAAIzJ,WAAW,GAAG,EAAE,CAACnG,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAAC+K,kBAAkB,CAAC,CAAC;IACnG0F,WAAW,CAAC/F,OAAO,CAAC,UAAUsN,OAAO,EAAE;MAAE3Y,YAAY,CAACE,MAAM,CAACyY,OAAO,EAAE,QAAQ,EAAE5X,KAAK,CAACoT,cAAc,CAAC;IAAE,CAAC,CAAC;IACzG,IAAI,IAAI,CAACrT,MAAM,CAACoB,UAAU,EAAE;MACxB,IAAI,CAACpB,MAAM,CAACwT,WAAW,CAACwG,iBAAiB,CAAC,CAAC;IAC/C;EACJ,CAAC;EACDla,YAAY,CAACjB,SAAS,CAACsY,aAAa,GAAG,YAAY;IAC/C,IAAIlX,KAAK,GAAG,IAAI;IAChB,IAAI,IAAI,CAACD,MAAM,CAAC+Y,gBAAgB,EAAE;MAC9B,IAAInC,KAAK,GAAG,EAAE,CAACzM,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACmI,mBAAmB,GACtF,GAAG,GAAGnI,GAAG,CAACsI,UAAU,GAAG,IAAI,GAAGtI,GAAG,CAAC8L,UAAU,CAAC,CAAC;MACpDxM,QAAQ,CAACyX,KAAK,EAAE/W,GAAG,CAACyI,eAAe,CAAC;MACpCsO,KAAK,CAACrM,OAAO,CAAC,UAAUmK,IAAI,EAAE;QAAE,OAAOzU,KAAK,CAACD,MAAM,CAACgZ,iBAAiB,CAACC,cAAc,CAACvE,IAAI,CAAC;MAAE,CAAC,CAAC;IAClG;EACJ,CAAC;EACD5U,YAAY,CAACjB,SAAS,CAACkb,eAAe,GAAG,YAAY;IACjD,IAAI9Z,KAAK,GAAG,IAAI;IAChB,IAAI2W,KAAK,GAAG,EAAE,CAACzM,KAAK,CAACjK,IAAI,CAAC,IAAI,CAACF,MAAM,CAACsB,OAAO,CAAC8I,gBAAgB,CAAC,GAAG,GAAGvK,GAAG,CAACmI,mBAAmB,GACtF,GAAG,GAAGnI,GAAG,CAACsI,UAAU,GAAG,IAAI,GAAGtI,GAAG,CAAC8L,UAAU,CAAC,CAAC;IACpDnM,WAAW,CAACoX,KAAK,EAAE/W,GAAG,CAACyI,eAAe,CAAC;IACvCsO,KAAK,CAACrM,OAAO,CAAC,UAAUmK,IAAI,EAAE;MAAE,OAAOzU,KAAK,CAACD,MAAM,CAACgZ,iBAAiB,CAACiB,gBAAgB,CAACvF,IAAI,CAAC;IAAE,CAAC,CAAC;EACpG,CAAC;EACD5U,YAAY,CAACjB,SAAS,CAAC4C,OAAO,GAAG,YAAY;IACzC,IAAI,CAACzB,MAAM,CAACkX,cAAc,CAAC,CAAC;IAC5B,IAAI,CAAClX,MAAM,CAACka,GAAG,CAACta,MAAM,CAACc,SAAS,EAAE,IAAI,CAACC,UAAU,CAAC;IAClD,IAAI,CAACX,MAAM,CAACka,GAAG,CAACta,MAAM,CAACgB,YAAY,EAAE,IAAI,CAACC,cAAc,CAAC;IACzD,IAAI,CAACiZ,YAAY,CAAC,CAAC;IACnB,IAAIhY,MAAM,GAAG,IAAI,CAAC9B,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACmC,YAAY,CAAC;IACtE,IAAIF,MAAM,EAAE;MACR1C,MAAM,CAAC0C,MAAM,CAAC;IAClB;IACA,IAAIoF,OAAO,GAAG,IAAI,CAAClH,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC2B,aAAa,CAAC;IACxE,IAAI0F,OAAO,EAAE;MACT9H,MAAM,CAAC8H,OAAO,CAAC;IACnB;IACA,IAAI,IAAI,CAACiT,WAAW,EAAE;MAClB,IAAI,CAACA,WAAW,CAAC1Y,OAAO,CAAC,CAAC;MAC1B,IAAI,CAAC0Y,WAAW,GAAG,IAAI;IAC3B;IACA,IAAI,IAAI,CAAC3D,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAAC/U,OAAO,CAAC,CAAC;MACxB,IAAI,CAAC+U,SAAS,GAAG,IAAI;IACzB;IACA,IAAI4D,kBAAkB,GAAG,IAAI,CAACpa,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAAC4J,qBAAqB,CAAC;IAC3F,IAAI2Q,kBAAkB,EAAE;MACpBhb,MAAM,CAACgb,kBAAkB,CAAC;IAC9B;IACA,IAAIC,eAAe,GAAG,IAAI,CAACra,MAAM,CAACsB,OAAO,CAACC,aAAa,CAAC,GAAG,GAAG1B,GAAG,CAACya,sBAAsB,CAAC;IACzF,IAAID,eAAe,EAAE;MACjBjb,MAAM,CAACib,eAAe,CAAC;IAC3B;EACJ,CAAC;EACD,OAAOva,YAAY;AACvB,CAAC,CAACH,YAAY,CAAE;AAChB,SAASG,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}