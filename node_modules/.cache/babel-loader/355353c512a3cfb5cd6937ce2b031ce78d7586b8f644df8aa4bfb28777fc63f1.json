{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const defaultPrefs={fontScale:1,// 1, 1.15, 1.3\ncontrast:false,dyslexia:false,underlineLinks:false,focus:true,reduceMotion:false};const STORAGE_KEY=\"a11y_prefs_v1\";export default function AccessibilityWidget(){var _i18n$language;const{i18n}=useTranslation();const isHe=(_i18n$language=i18n.language)===null||_i18n$language===void 0?void 0:_i18n$language.startsWith(\"he\");const[open,setOpen]=useState(false);const[prefs,setPrefs]=useState(defaultPrefs);// load\nuseEffect(()=>{try{const saved=JSON.parse(localStorage.getItem(STORAGE_KEY));if(saved)setPrefs({...defaultPrefs,...saved});}catch{}},[]);// apply + persist\nuseEffect(()=>{const root=document.documentElement;root.style.setProperty(\"--a11y-font-scale\",String(prefs.fontScale));root.classList.toggle(\"a11y-contrast\",prefs.contrast);root.classList.toggle(\"a11y-dyslexia\",prefs.dyslexia);root.classList.toggle(\"a11y-underline-links\",prefs.underlineLinks);root.classList.toggle(\"a11y-focus\",prefs.focus);root.classList.toggle(\"a11y-reduce-motion\",prefs.reduceMotion);localStorage.setItem(STORAGE_KEY,JSON.stringify(prefs));},[prefs]);const t=(he,en)=>isHe?he:en;const incFont=()=>setPrefs(p=>({...p,fontScale:Math.min(1.3,+(p.fontScale+0.15).toFixed(2))}));const decFont=()=>setPrefs(p=>({...p,fontScale:Math.max(1,+(p.fontScale-0.15).toFixed(2))}));const resetAll=()=>setPrefs(defaultPrefs);return/*#__PURE__*/_jsxs(\"div\",{className:\"a11y-widget\",\"aria-live\":\"polite\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"a11y-toggle\",\"aria-haspopup\":\"true\",\"aria-expanded\":open,\"aria-label\":t(\"פתיחת תפריט נגישות\",\"Open accessibility menu\"),onClick:()=>setOpen(o=>!o),children:\"\\u267F\"}),open&&/*#__PURE__*/_jsxs(\"div\",{className:\"a11y-panel\",role:\"dialog\",\"aria-label\":t(\"תפריט נגישות\",\"Accessibility menu\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"גודל טקסט\",\"Text size\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"group\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:decFont,\"aria-label\":t(\"הקטנת טקסט\",\"Decrease text\"),children:\"A\\u2212\"}),/*#__PURE__*/_jsx(\"button\",{onClick:incFont,\"aria-label\":t(\"הגדלת טקסט\",\"Increase text\"),children:\"A+\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"ניגודיות גבוהה\",\"High contrast\")}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:prefs.contrast,onChange:e=>setPrefs(p=>({...p,contrast:e.target.checked}))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"קו תחתון לקישורים\",\"Underline links\")}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:prefs.underlineLinks,onChange:e=>setPrefs(p=>({...p,underlineLinks:e.target.checked}))})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:t(\"הדגשת פוקוס במקלדת\",\"Highlight keyboard focus\")}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:prefs.focus,onChange:e=>setPrefs(p=>({...p,focus:e.target.checked}))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"reset\",onClick:resetAll,children:t(\"איפוס\",\"Reset\")})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useTranslation","jsx","_jsx","jsxs","_jsxs","defaultPrefs","fontScale","contrast","dyslexia","underlineLinks","focus","reduceMotion","STORAGE_KEY","AccessibilityWidget","_i18n$language","i18n","isHe","language","startsWith","open","setOpen","prefs","setPrefs","saved","JSON","parse","localStorage","getItem","root","document","documentElement","style","setProperty","String","classList","toggle","setItem","stringify","t","he","en","incFont","p","Math","min","toFixed","decFont","max","resetAll","className","children","onClick","o","role","type","checked","onChange","e","target"],"sources":["C:/Users/yulit/skyz-web-react-he/src/components/AccessibilityWidget.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst defaultPrefs = {\r\n  fontScale: 1,            // 1, 1.15, 1.3\r\n  contrast: false,\r\n  dyslexia: false,\r\n  underlineLinks: false,\r\n  focus: true,\r\n  reduceMotion: false,\r\n};\r\n\r\nconst STORAGE_KEY = \"a11y_prefs_v1\";\r\n\r\nexport default function AccessibilityWidget() {\r\n  const { i18n } = useTranslation();\r\n  const isHe = i18n.language?.startsWith(\"he\");\r\n  const [open, setOpen] = useState(false);\r\n  const [prefs, setPrefs] = useState(defaultPrefs);\r\n\r\n  // load\r\n  useEffect(() => {\r\n    try {\r\n      const saved = JSON.parse(localStorage.getItem(STORAGE_KEY));\r\n      if (saved) setPrefs({ ...defaultPrefs, ...saved });\r\n    } catch {}\r\n  }, []);\r\n\r\n  // apply + persist\r\n  useEffect(() => {\r\n    const root = document.documentElement;\r\n    root.style.setProperty(\"--a11y-font-scale\", String(prefs.fontScale));\r\n    root.classList.toggle(\"a11y-contrast\", prefs.contrast);\r\n    root.classList.toggle(\"a11y-dyslexia\", prefs.dyslexia);\r\n    root.classList.toggle(\"a11y-underline-links\", prefs.underlineLinks);\r\n    root.classList.toggle(\"a11y-focus\", prefs.focus);\r\n    root.classList.toggle(\"a11y-reduce-motion\", prefs.reduceMotion);\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(prefs));\r\n  }, [prefs]);\r\n\r\n  const t = (he, en) => (isHe ? he : en);\r\n\r\n  const incFont = () =>\r\n    setPrefs(p => ({ ...p, fontScale: Math.min(1.3, +(p.fontScale + 0.15).toFixed(2)) }));\r\n  const decFont = () =>\r\n    setPrefs(p => ({ ...p, fontScale: Math.max(1, +(p.fontScale - 0.15).toFixed(2)) }));\r\n  const resetAll = () => setPrefs(defaultPrefs);\r\n\r\n  return (\r\n    <div className=\"a11y-widget\" aria-live=\"polite\">\r\n      <button\r\n        className=\"a11y-toggle\"\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open}\r\n        aria-label={t(\"פתיחת תפריט נגישות\", \"Open accessibility menu\")}\r\n        onClick={() => setOpen(o => !o)}\r\n      >\r\n        ♿\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"a11y-panel\" role=\"dialog\" aria-label={t(\"תפריט נגישות\", \"Accessibility menu\")}>\r\n          <div className=\"row\">\r\n            <span>{t(\"גודל טקסט\", \"Text size\")}</span>\r\n            <div className=\"group\">\r\n              <button onClick={decFont} aria-label={t(\"הקטנת טקסט\", \"Decrease text\")}>A−</button>\r\n              <button onClick={incFont} aria-label={t(\"הגדלת טקסט\", \"Increase text\")}>A+</button>\r\n            </div>\r\n          </div>\r\n\r\n          <label className=\"row\">\r\n            <span>{t(\"ניגודיות גבוהה\", \"High contrast\")}</span>\r\n            <input type=\"checkbox\" checked={prefs.contrast}\r\n              onChange={e => setPrefs(p => ({ ...p, contrast: e.target.checked }))}/>\r\n          </label>\r\n\r\n     \r\n          <label className=\"row\">\r\n            <span>{t(\"קו תחתון לקישורים\", \"Underline links\")}</span>\r\n            <input type=\"checkbox\" checked={prefs.underlineLinks}\r\n              onChange={e => setPrefs(p => ({ ...p, underlineLinks: e.target.checked }))}/>\r\n          </label>\r\n\r\n          <label className=\"row\">\r\n            <span>{t(\"הדגשת פוקוס במקלדת\", \"Highlight keyboard focus\")}</span>\r\n            <input type=\"checkbox\" checked={prefs.focus}\r\n              onChange={e => setPrefs(p => ({ ...p, focus: e.target.checked }))}/>\r\n          </label>\r\n\r\n\r\n          <button className=\"reset\" onClick={resetAll}>\r\n            {t(\"איפוס\", \"Reset\")}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}